"use strict";(()=>{var N_=Object.defineProperty;var Kv=Object.getOwnPropertyDescriptor;var e1=Object.getOwnPropertyNames;var t1=Object.prototype.hasOwnProperty;var j=(e,t)=>()=>(e&&(t=e(e=0)),t);var r1=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var s1=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of e1(t))!t1.call(e,n)&&n!==r&&N_(e,n,{get:()=>t[n],enumerable:!(s=Kv(t,n))||s.enumerable});return e};var o=e=>s1(N_({},"__esModule",{value:!0}),e);var No=r1((X$,$l)=>{var zt=function(e){"use strict";var t=1e7,r=7,s=9007199254740992,n=M(s),i="0123456789abcdefghijklmnopqrstuvwxyz",a=typeof BigInt=="function";function u(f,_,x,y){return typeof f>"u"?u[0]:typeof _<"u"?+_==10&&!x?je(f):Qv(f,_,x,y):je(f)}function c(f,_){this.value=f,this.sign=_,this.isSmall=!1}c.prototype=Object.create(u.prototype);function d(f){this.value=f,this.sign=f<0,this.isSmall=!0}d.prototype=Object.create(u.prototype);function m(f){this.value=f}m.prototype=Object.create(u.prototype);function R(f){return-s<f&&f<s}function M(f){return f<1e7?[f]:f<1e14?[f%1e7,Math.floor(f/1e7)]:[f%1e7,Math.floor(f/1e7)%1e7,Math.floor(f/1e14)]}function k(f){H(f);var _=f.length;if(_<4&&Vs(f,n)<0)switch(_){case 0:return 0;case 1:return f[0];case 2:return f[0]+f[1]*t;default:return f[0]+(f[1]+f[2]*t)*t}return f}function H(f){for(var _=f.length;f[--_]===0;);f.length=_+1}function X(f){for(var _=new Array(f),x=-1;++x<f;)_[x]=0;return _}function Ie(f){return f>0?Math.floor(f):Math.ceil(f)}function at(f,_){var x=f.length,y=_.length,A=new Array(x),q=0,P=t,L,$;for($=0;$<y;$++)L=f[$]+_[$]+q,q=L>=P?1:0,A[$]=L-q*P;for(;$<x;)L=f[$]+q,q=L===P?1:0,A[$++]=L-q*P;return q>0&&A.push(q),A}function Ke(f,_){return f.length>=_.length?at(f,_):at(_,f)}function Fe(f,_){var x=f.length,y=new Array(x),A=t,q,P;for(P=0;P<x;P++)q=f[P]-A+_,_=Math.floor(q/A),y[P]=q-_*A,_+=1;for(;_>0;)y[P++]=_%A,_=Math.floor(_/A);return y}c.prototype.add=function(f){var _=je(f);if(this.sign!==_.sign)return this.subtract(_.negate());var x=this.value,y=_.value;return _.isSmall?new c(Fe(x,Math.abs(y)),this.sign):new c(Ke(x,y),this.sign)},c.prototype.plus=c.prototype.add,d.prototype.add=function(f){var _=je(f),x=this.value;if(x<0!==_.sign)return this.subtract(_.negate());var y=_.value;if(_.isSmall){if(R(x+y))return new d(x+y);y=M(Math.abs(y))}return new c(Fe(y,Math.abs(x)),x<0)},d.prototype.plus=d.prototype.add,m.prototype.add=function(f){return new m(this.value+je(f).value)},m.prototype.plus=m.prototype.add;function ft(f,_){var x=f.length,y=_.length,A=new Array(x),q=0,P=t,L,$;for(L=0;L<y;L++)$=f[L]-q-_[L],$<0?($+=P,q=1):q=0,A[L]=$;for(L=y;L<x;L++){if($=f[L]-q,$<0)$+=P;else{A[L++]=$;break}A[L]=$}for(;L<x;L++)A[L]=f[L];return H(A),A}function Se(f,_,x){var y;return Vs(f,_)>=0?y=ft(f,_):(y=ft(_,f),x=!x),y=k(y),typeof y=="number"?(x&&(y=-y),new d(y)):new c(y,x)}function dt(f,_,x){var y=f.length,A=new Array(y),q=-_,P=t,L,$;for(L=0;L<y;L++)$=f[L]+q,q=Math.floor($/P),$%=P,A[L]=$<0?$+P:$;return A=k(A),typeof A=="number"?(x&&(A=-A),new d(A)):new c(A,x)}c.prototype.subtract=function(f){var _=je(f);if(this.sign!==_.sign)return this.add(_.negate());var x=this.value,y=_.value;return _.isSmall?dt(x,Math.abs(y),this.sign):Se(x,y,this.sign)},c.prototype.minus=c.prototype.subtract,d.prototype.subtract=function(f){var _=je(f),x=this.value;if(x<0!==_.sign)return this.add(_.negate());var y=_.value;return _.isSmall?new d(x-y):dt(y,Math.abs(x),x>=0)},d.prototype.minus=d.prototype.subtract,m.prototype.subtract=function(f){return new m(this.value-je(f).value)},m.prototype.minus=m.prototype.subtract,c.prototype.negate=function(){return new c(this.value,!this.sign)},d.prototype.negate=function(){var f=this.sign,_=new d(-this.value);return _.sign=!f,_},m.prototype.negate=function(){return new m(-this.value)},c.prototype.abs=function(){return new c(this.value,!1)},d.prototype.abs=function(){return new d(Math.abs(this.value))},m.prototype.abs=function(){return new m(this.value>=0?this.value:-this.value)};function ir(f,_){var x=f.length,y=_.length,A=x+y,q=X(A),P=t,L,$,Oe,Xe,Re;for(Oe=0;Oe<x;++Oe){Xe=f[Oe];for(var ut=0;ut<y;++ut)Re=_[ut],L=Xe*Re+q[Oe+ut],$=Math.floor(L/P),q[Oe+ut]=L-$*P,q[Oe+ut+1]+=$}return H(q),q}function Ft(f,_){var x=f.length,y=new Array(x),A=t,q=0,P,L;for(L=0;L<x;L++)P=f[L]*_+q,q=Math.floor(P/A),y[L]=P-q*A;for(;q>0;)y[L++]=q%A,q=Math.floor(q/A);return y}function qr(f,_){for(var x=[];_-- >0;)x.push(0);return x.concat(f)}function Lt(f,_){var x=Math.max(f.length,_.length);if(x<=30)return ir(f,_);x=Math.ceil(x/2);var y=f.slice(x),A=f.slice(0,x),q=_.slice(x),P=_.slice(0,x),L=Lt(A,P),$=Lt(y,q),Oe=Lt(Ke(A,y),Ke(P,q)),Xe=Ke(Ke(L,qr(ft(ft(Oe,L),$),x)),qr($,2*x));return H(Xe),Xe}function un(f,_){return-.012*f-.012*_+15e-6*f*_>0}c.prototype.multiply=function(f){var _=je(f),x=this.value,y=_.value,A=this.sign!==_.sign,q;if(_.isSmall){if(y===0)return u[0];if(y===1)return this;if(y===-1)return this.negate();if(q=Math.abs(y),q<t)return new c(Ft(x,q),A);y=M(q)}return un(x.length,y.length)?new c(Lt(x,y),A):new c(ir(x,y),A)},c.prototype.times=c.prototype.multiply;function Ys(f,_,x){return f<t?new c(Ft(_,f),x):new c(ir(_,M(f)),x)}d.prototype._multiplyBySmall=function(f){return R(f.value*this.value)?new d(f.value*this.value):Ys(Math.abs(f.value),M(Math.abs(this.value)),this.sign!==f.sign)},c.prototype._multiplyBySmall=function(f){return f.value===0?u[0]:f.value===1?this:f.value===-1?this.negate():Ys(Math.abs(f.value),this.value,this.sign!==f.sign)},d.prototype.multiply=function(f){return je(f)._multiplyBySmall(this)},d.prototype.times=d.prototype.multiply,m.prototype.multiply=function(f){return new m(this.value*je(f).value)},m.prototype.times=m.prototype.multiply;function ua(f){var _=f.length,x=X(_+_),y=t,A,q,P,L,$;for(P=0;P<_;P++){L=f[P],q=0-L*L;for(var Oe=P;Oe<_;Oe++)$=f[Oe],A=2*(L*$)+x[P+Oe]+q,q=Math.floor(A/y),x[P+Oe]=A-q*y;x[P+_]=q}return H(x),x}c.prototype.square=function(){return new c(ua(this.value),!1)},d.prototype.square=function(){var f=this.value*this.value;return R(f)?new d(f):new c(ua(M(Math.abs(this.value))),!1)},m.prototype.square=function(f){return new m(this.value*this.value)};function Ll(f,_){var x=f.length,y=_.length,A=t,q=X(_.length),P=_[y-1],L=Math.ceil(A/(2*P)),$=Ft(f,L),Oe=Ft(_,L),Xe,Re,ut,Cr,Or,Qc,Wc;for($.length<=x&&$.push(0),Oe.push(0),P=Oe[y-1],Re=x-y;Re>=0;Re--){for(Xe=A-1,$[Re+y]!==P&&(Xe=Math.floor(($[Re+y]*A+$[Re+y-1])/P)),ut=0,Cr=0,Qc=Oe.length,Or=0;Or<Qc;Or++)ut+=Xe*Oe[Or],Wc=Math.floor(ut/A),Cr+=$[Re+Or]-(ut-Wc*A),ut=Wc,Cr<0?($[Re+Or]=Cr+A,Cr=-1):($[Re+Or]=Cr,Cr=0);for(;Cr!==0;){for(Xe-=1,ut=0,Or=0;Or<Qc;Or++)ut+=$[Re+Or]-A+Oe[Or],ut<0?($[Re+Or]=ut+A,ut=0):($[Re+Or]=ut,ut=1);Cr+=ut}q[Re]=Xe}return $=ca($,L)[0],[k(q),k($)]}function Cl(f,_){for(var x=f.length,y=_.length,A=[],q=[],P=t,L,$,Oe,Xe,Re;x;){if(q.unshift(f[--x]),H(q),Vs(q,_)<0){A.push(0);continue}$=q.length,Oe=q[$-1]*P+q[$-2],Xe=_[y-1]*P+_[y-2],$>y&&(Oe=(Oe+1)*P),L=Math.ceil(Oe/Xe);do{if(Re=Ft(_,L),Vs(Re,q)<=0)break;L--}while(L);A.push(L),q=ft(q,Re)}return A.reverse(),[k(A),k(q)]}function ca(f,_){var x=f.length,y=X(x),A=t,q,P,L,$;for(L=0,q=x-1;q>=0;--q)$=L*A+f[q],P=Ie($/_),L=$-P*_,y[q]=P|0;return[y,L|0]}function ss(f,_){var x,y=je(_);if(a)return[new m(f.value/y.value),new m(f.value%y.value)];var A=f.value,q=y.value,P;if(q===0)throw new Error("Cannot divide by zero");if(f.isSmall)return y.isSmall?[new d(Ie(A/q)),new d(A%q)]:[u[0],f];if(y.isSmall){if(q===1)return[f,u[0]];if(q==-1)return[f.negate(),u[0]];var L=Math.abs(q);if(L<t){x=ca(A,L),P=k(x[0]);var $=x[1];return f.sign&&($=-$),typeof P=="number"?(f.sign!==y.sign&&(P=-P),[new d(P),new d($)]):[new c(P,f.sign!==y.sign),new d($)]}q=M(L)}var Oe=Vs(A,q);if(Oe===-1)return[u[0],f];if(Oe===0)return[u[f.sign===y.sign?1:-1],u[0]];A.length+q.length<=200?x=Ll(A,q):x=Cl(A,q),P=x[0];var Xe=f.sign!==y.sign,Re=x[1],ut=f.sign;return typeof P=="number"?(Xe&&(P=-P),P=new d(P)):P=new c(P,Xe),typeof Re=="number"?(ut&&(Re=-Re),Re=new d(Re)):Re=new c(Re,ut),[P,Re]}c.prototype.divmod=function(f){var _=ss(this,f);return{quotient:_[0],remainder:_[1]}},m.prototype.divmod=d.prototype.divmod=c.prototype.divmod,c.prototype.divide=function(f){return ss(this,f)[0]},m.prototype.over=m.prototype.divide=function(f){return new m(this.value/je(f).value)},d.prototype.over=d.prototype.divide=c.prototype.over=c.prototype.divide,c.prototype.mod=function(f){return ss(this,f)[1]},m.prototype.mod=m.prototype.remainder=function(f){return new m(this.value%je(f).value)},d.prototype.remainder=d.prototype.mod=c.prototype.remainder=c.prototype.mod,c.prototype.pow=function(f){var _=je(f),x=this.value,y=_.value,A,q,P;if(y===0)return u[1];if(x===0)return u[0];if(x===1)return u[1];if(x===-1)return _.isEven()?u[1]:u[-1];if(_.sign)return u[0];if(!_.isSmall)throw new Error("The exponent "+_.toString()+" is too large.");if(this.isSmall&&R(A=Math.pow(x,y)))return new d(Ie(A));for(q=this,P=u[1];y&!0&&(P=P.times(q),--y),y!==0;)y/=2,q=q.square();return P},d.prototype.pow=c.prototype.pow,m.prototype.pow=function(f){var _=je(f),x=this.value,y=_.value,A=BigInt(0),q=BigInt(1),P=BigInt(2);if(y===A)return u[1];if(x===A)return u[0];if(x===q)return u[1];if(x===BigInt(-1))return _.isEven()?u[1]:u[-1];if(_.isNegative())return new m(A);for(var L=this,$=u[1];(y&q)===q&&($=$.times(L),--y),y!==A;)y/=P,L=L.square();return $},c.prototype.modPow=function(f,_){if(f=je(f),_=je(_),_.isZero())throw new Error("Cannot take modPow with modulus 0");var x=u[1],y=this.mod(_);for(f.isNegative()&&(f=f.multiply(u[-1]),y=y.modInv(_));f.isPositive();){if(y.isZero())return u[0];f.isOdd()&&(x=x.multiply(y).mod(_)),f=f.divide(2),y=y.square().mod(_)}return x},m.prototype.modPow=d.prototype.modPow=c.prototype.modPow;function Vs(f,_){if(f.length!==_.length)return f.length>_.length?1:-1;for(var x=f.length-1;x>=0;x--)if(f[x]!==_[x])return f[x]>_[x]?1:-1;return 0}c.prototype.compareAbs=function(f){var _=je(f),x=this.value,y=_.value;return _.isSmall?1:Vs(x,y)},d.prototype.compareAbs=function(f){var _=je(f),x=Math.abs(this.value),y=_.value;return _.isSmall?(y=Math.abs(y),x===y?0:x>y?1:-1):-1},m.prototype.compareAbs=function(f){var _=this.value,x=je(f).value;return _=_>=0?_:-_,x=x>=0?x:-x,_===x?0:_>x?1:-1},c.prototype.compare=function(f){if(f===1/0)return-1;if(f===-1/0)return 1;var _=je(f),x=this.value,y=_.value;return this.sign!==_.sign?_.sign?1:-1:_.isSmall?this.sign?-1:1:Vs(x,y)*(this.sign?-1:1)},c.prototype.compareTo=c.prototype.compare,d.prototype.compare=function(f){if(f===1/0)return-1;if(f===-1/0)return 1;var _=je(f),x=this.value,y=_.value;return _.isSmall?x==y?0:x>y?1:-1:x<0!==_.sign?x<0?-1:1:x<0?1:-1},d.prototype.compareTo=d.prototype.compare,m.prototype.compare=function(f){if(f===1/0)return-1;if(f===-1/0)return 1;var _=this.value,x=je(f).value;return _===x?0:_>x?1:-1},m.prototype.compareTo=m.prototype.compare,c.prototype.equals=function(f){return this.compare(f)===0},m.prototype.eq=m.prototype.equals=d.prototype.eq=d.prototype.equals=c.prototype.eq=c.prototype.equals,c.prototype.notEquals=function(f){return this.compare(f)!==0},m.prototype.neq=m.prototype.notEquals=d.prototype.neq=d.prototype.notEquals=c.prototype.neq=c.prototype.notEquals,c.prototype.greater=function(f){return this.compare(f)>0},m.prototype.gt=m.prototype.greater=d.prototype.gt=d.prototype.greater=c.prototype.gt=c.prototype.greater,c.prototype.lesser=function(f){return this.compare(f)<0},m.prototype.lt=m.prototype.lesser=d.prototype.lt=d.prototype.lesser=c.prototype.lt=c.prototype.lesser,c.prototype.greaterOrEquals=function(f){return this.compare(f)>=0},m.prototype.geq=m.prototype.greaterOrEquals=d.prototype.geq=d.prototype.greaterOrEquals=c.prototype.geq=c.prototype.greaterOrEquals,c.prototype.lesserOrEquals=function(f){return this.compare(f)<=0},m.prototype.leq=m.prototype.lesserOrEquals=d.prototype.leq=d.prototype.lesserOrEquals=c.prototype.leq=c.prototype.lesserOrEquals,c.prototype.isEven=function(){return(this.value[0]&1)===0},d.prototype.isEven=function(){return(this.value&1)===0},m.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},c.prototype.isOdd=function(){return(this.value[0]&1)===1},d.prototype.isOdd=function(){return(this.value&1)===1},m.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},c.prototype.isPositive=function(){return!this.sign},d.prototype.isPositive=function(){return this.value>0},m.prototype.isPositive=d.prototype.isPositive,c.prototype.isNegative=function(){return this.sign},d.prototype.isNegative=function(){return this.value<0},m.prototype.isNegative=d.prototype.isNegative,c.prototype.isUnit=function(){return!1},d.prototype.isUnit=function(){return Math.abs(this.value)===1},m.prototype.isUnit=function(){return this.abs().value===BigInt(1)},c.prototype.isZero=function(){return!1},d.prototype.isZero=function(){return this.value===0},m.prototype.isZero=function(){return this.value===BigInt(0)},c.prototype.isDivisibleBy=function(f){var _=je(f);return _.isZero()?!1:_.isUnit()?!0:_.compareAbs(2)===0?this.isEven():this.mod(_).isZero()},m.prototype.isDivisibleBy=d.prototype.isDivisibleBy=c.prototype.isDivisibleBy;function Pl(f){var _=f.abs();if(_.isUnit())return!1;if(_.equals(2)||_.equals(3)||_.equals(5))return!0;if(_.isEven()||_.isDivisibleBy(3)||_.isDivisibleBy(5))return!1;if(_.lesser(49))return!0}function fa(f,_){for(var x=f.prev(),y=x,A=0,q,P,L,$;y.isEven();)y=y.divide(2),A++;e:for(L=0;L<_.length;L++)if(!f.lesser(_[L])&&($=zt(_[L]).modPow(y,f),!($.isUnit()||$.equals(x)))){for(q=A-1;q!=0;q--){if($=$.square().mod(f),$.isUnit())return!1;if($.equals(x))continue e}return!1}return!0}c.prototype.isPrime=function(f){var _=Pl(this);if(_!==e)return _;var x=this.abs(),y=x.bitLength();if(y<=64)return fa(x,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var A=Math.log(2)*y.toJSNumber(),q=Math.ceil(f===!0?2*Math.pow(A,2):A),P=[],L=0;L<q;L++)P.push(zt(L+2));return fa(x,P)},m.prototype.isPrime=d.prototype.isPrime=c.prototype.isPrime,c.prototype.isProbablePrime=function(f,_){var x=Pl(this);if(x!==e)return x;for(var y=this.abs(),A=f===e?5:f,q=[],P=0;P<A;P++)q.push(zt.randBetween(2,y.minus(2),_));return fa(y,q)},m.prototype.isProbablePrime=d.prototype.isProbablePrime=c.prototype.isProbablePrime,c.prototype.modInv=function(f){for(var _=zt.zero,x=zt.one,y=je(f),A=this.abs(),q,P,L;!A.isZero();)q=y.divide(A),P=_,L=y,_=x,y=A,x=P.subtract(q.multiply(x)),A=L.subtract(q.multiply(A));if(!y.isUnit())throw new Error(this.toString()+" and "+f.toString()+" are not co-prime");return _.compare(0)===-1&&(_=_.add(f)),this.isNegative()?_.negate():_},m.prototype.modInv=d.prototype.modInv=c.prototype.modInv,c.prototype.next=function(){var f=this.value;return this.sign?dt(f,1,this.sign):new c(Fe(f,1),this.sign)},d.prototype.next=function(){var f=this.value;return f+1<s?new d(f+1):new c(n,!1)},m.prototype.next=function(){return new m(this.value+BigInt(1))},c.prototype.prev=function(){var f=this.value;return this.sign?new c(Fe(f,1),!0):dt(f,1,this.sign)},d.prototype.prev=function(){var f=this.value;return f-1>-s?new d(f-1):new c(n,!0)},m.prototype.prev=function(){return new m(this.value-BigInt(1))};for(var os=[1];2*os[os.length-1]<=t;)os.push(2*os[os.length-1]);var cn=os.length,Zs=os[cn-1];function Dl(f){return Math.abs(f)<=t}c.prototype.shiftLeft=function(f){var _=je(f).toJSNumber();if(!Dl(_))throw new Error(String(_)+" is too large for shifting.");if(_<0)return this.shiftRight(-_);var x=this;if(x.isZero())return x;for(;_>=cn;)x=x.multiply(Zs),_-=cn-1;return x.multiply(os[_])},m.prototype.shiftLeft=d.prototype.shiftLeft=c.prototype.shiftLeft,c.prototype.shiftRight=function(f){var _,x=je(f).toJSNumber();if(!Dl(x))throw new Error(String(x)+" is too large for shifting.");if(x<0)return this.shiftLeft(-x);for(var y=this;x>=cn;){if(y.isZero()||y.isNegative()&&y.isUnit())return y;_=ss(y,Zs),y=_[1].isNegative()?_[0].prev():_[0],x-=cn-1}return _=ss(y,os[x]),_[1].isNegative()?_[0].prev():_[0]},m.prototype.shiftRight=d.prototype.shiftRight=c.prototype.shiftRight;function da(f,_,x){_=je(_);for(var y=f.isNegative(),A=_.isNegative(),q=y?f.not():f,P=A?_.not():_,L=0,$=0,Oe=null,Xe=null,Re=[];!q.isZero()||!P.isZero();)Oe=ss(q,Zs),L=Oe[1].toJSNumber(),y&&(L=Zs-1-L),Xe=ss(P,Zs),$=Xe[1].toJSNumber(),A&&($=Zs-1-$),q=Oe[0],P=Xe[0],Re.push(x(L,$));for(var ut=x(y?1:0,A?1:0)!==0?zt(-1):zt(0),Cr=Re.length-1;Cr>=0;Cr-=1)ut=ut.multiply(Zs).add(zt(Re[Cr]));return ut}c.prototype.not=function(){return this.negate().prev()},m.prototype.not=d.prototype.not=c.prototype.not,c.prototype.and=function(f){return da(this,f,function(_,x){return _&x})},m.prototype.and=d.prototype.and=c.prototype.and,c.prototype.or=function(f){return da(this,f,function(_,x){return _|x})},m.prototype.or=d.prototype.or=c.prototype.or,c.prototype.xor=function(f){return da(this,f,function(_,x){return _^x})},m.prototype.xor=d.prototype.xor=c.prototype.xor;var _a=1<<30,Hc=(t&-t)*(t&-t)|_a;function ii(f){var _=f.value,x=typeof _=="number"?_|_a:typeof _=="bigint"?_|BigInt(_a):_[0]+_[1]*t|Hc;return x&-x}function kl(f,_){if(_.compareTo(f)<=0){var x=kl(f,_.square(_)),y=x.p,A=x.e,q=y.multiply(_);return q.compareTo(f)<=0?{p:q,e:A*2+1}:{p:y,e:A*2}}return{p:zt(1),e:0}}c.prototype.bitLength=function(){var f=this;return f.compareTo(zt(0))<0&&(f=f.negate().subtract(zt(1))),f.compareTo(zt(0))===0?zt(0):zt(kl(f,zt(2)).e).add(zt(1))},m.prototype.bitLength=d.prototype.bitLength=c.prototype.bitLength;function ma(f,_){return f=je(f),_=je(_),f.greater(_)?f:_}function ai(f,_){return f=je(f),_=je(_),f.lesser(_)?f:_}function A_(f,_){if(f=je(f).abs(),_=je(_).abs(),f.equals(_))return f;if(f.isZero())return _;if(_.isZero())return f;for(var x=u[1],y,A;f.isEven()&&_.isEven();)y=ai(ii(f),ii(_)),f=f.divide(y),_=_.divide(y),x=x.multiply(y);for(;f.isEven();)f=f.divide(ii(f));do{for(;_.isEven();)_=_.divide(ii(_));f.greater(_)&&(A=_,_=f,f=A),_=_.subtract(f)}while(!_.isZero());return x.isUnit()?f:f.multiply(x)}function Xv(f,_){return f=je(f).abs(),_=je(_).abs(),f.divide(A_(f,_)).multiply(_)}function Hv(f,_,x){f=je(f),_=je(_);var y=x||Math.random,A=ai(f,_),q=ma(f,_),P=q.subtract(A).add(1);if(P.isSmall)return A.add(Math.floor(y()*P));for(var L=xa(P,t).value,$=[],Oe=!0,Xe=0;Xe<L.length;Xe++){var Re=Oe?L[Xe]+(Xe+1<L.length?L[Xe+1]/t:0):t,ut=Ie(y()*Re);$.push(ut),ut<L[Xe]&&(Oe=!1)}return A.add(u.fromArray($,t,!1))}var Qv=function(f,_,x,y){x=x||i,f=String(f),y||(f=f.toLowerCase(),x=x.toLowerCase());var A=f.length,q,P=Math.abs(_),L={};for(q=0;q<x.length;q++)L[x[q]]=q;for(q=0;q<A;q++){var $=f[q];if($!=="-"&&$ in L&&L[$]>=P){if($==="1"&&P===1)continue;throw new Error($+" is not a valid digit in base "+_+".")}}_=je(_);var Oe=[],Xe=f[0]==="-";for(q=Xe?1:0;q<f.length;q++){var $=f[q];if($ in L)Oe.push(je(L[$]));else if($==="<"){var Re=q;do q++;while(f[q]!==">"&&q<f.length);Oe.push(je(f.slice(Re+1,q)))}else throw new Error($+" is not a valid character")}return O_(Oe,_,Xe)};function O_(f,_,x){var y=u[0],A=u[1],q;for(q=f.length-1;q>=0;q--)y=y.add(f[q].times(A)),A=A.times(_);return x?y.negate():y}function Wv(f,_){return _=_||i,f<_.length?_[f]:"<"+f+">"}function xa(f,_){if(_=zt(_),_.isZero()){if(f.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(_.equals(-1)){if(f.isZero())return{value:[0],isNegative:!1};if(f.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-f.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var x=Array.apply(null,Array(f.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return x.unshift([1]),{value:[].concat.apply([],x),isNegative:!1}}var y=!1;if(f.isNegative()&&_.isPositive()&&(y=!0,f=f.abs()),_.isUnit())return f.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(f.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:y};for(var A=[],q=f,P;q.isNegative()||q.compareAbs(_)>=0;){P=q.divmod(_),q=P.quotient;var L=P.remainder;L.isNegative()&&(L=_.minus(L).abs(),q=q.next()),A.push(L.toJSNumber())}return A.push(q.toJSNumber()),{value:A.reverse(),isNegative:y}}function M_(f,_,x){var y=xa(f,_);return(y.isNegative?"-":"")+y.value.map(function(A){return Wv(A,x)}).join("")}c.prototype.toArray=function(f){return xa(this,f)},d.prototype.toArray=function(f){return xa(this,f)},m.prototype.toArray=function(f){return xa(this,f)},c.prototype.toString=function(f,_){if(f===e&&(f=10),f!==10)return M_(this,f,_);for(var x=this.value,y=x.length,A=String(x[--y]),q="0000000",P;--y>=0;)P=String(x[y]),A+=q.slice(P.length)+P;var L=this.sign?"-":"";return L+A},d.prototype.toString=function(f,_){return f===e&&(f=10),f!=10?M_(this,f,_):String(this.value)},m.prototype.toString=d.prototype.toString,m.prototype.toJSON=c.prototype.toJSON=d.prototype.toJSON=function(){return this.toString()},c.prototype.valueOf=function(){return parseInt(this.toString(),10)},c.prototype.toJSNumber=c.prototype.valueOf,d.prototype.valueOf=function(){return this.value},d.prototype.toJSNumber=d.prototype.valueOf,m.prototype.valueOf=m.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function T_(f){if(R(+f)){var _=+f;if(_===Ie(_))return a?new m(BigInt(_)):new d(_);throw new Error("Invalid integer: "+f)}var x=f[0]==="-";x&&(f=f.slice(1));var y=f.split(/e/i);if(y.length>2)throw new Error("Invalid integer: "+y.join("e"));if(y.length===2){var A=y[1];if(A[0]==="+"&&(A=A.slice(1)),A=+A,A!==Ie(A)||!R(A))throw new Error("Invalid integer: "+A+" is not a valid exponent.");var q=y[0],P=q.indexOf(".");if(P>=0&&(A-=q.length-P-1,q=q.slice(0,P)+q.slice(P+1)),A<0)throw new Error("Cannot include negative exponent part for integers");q+=new Array(A+1).join("0"),f=q}var L=/^([0-9][0-9]*)$/.test(f);if(!L)throw new Error("Invalid integer: "+f);if(a)return new m(BigInt(x?"-"+f:f));for(var $=[],Oe=f.length,Xe=r,Re=Oe-Xe;Oe>0;)$.push(+f.slice(Re,Oe)),Re-=Xe,Re<0&&(Re=0),Oe-=Xe;return H($),new c($,x)}function Jv(f){if(a)return new m(BigInt(f));if(R(f)){if(f!==Ie(f))throw new Error(f+" is not an integer.");return new d(f)}return T_(f.toString())}function je(f){return typeof f=="number"?Jv(f):typeof f=="string"?T_(f):typeof f=="bigint"?new m(f):f}for(var fn=0;fn<1e3;fn++)u[fn]=je(fn),fn>0&&(u[-fn]=je(-fn));return u.one=u[1],u.zero=u[0],u.minusOne=u[-1],u.max=ma,u.min=ai,u.gcd=A_,u.lcm=Xv,u.isInstance=function(f){return f instanceof c||f instanceof d||f instanceof m},u.randBetween=Hv,u.fromArray=function(f,_,x){return O_(f.map(je),je(_||10),x)},u}();typeof $l<"u"&&$l.hasOwnProperty("exports")&&($l.exports=zt);typeof define=="function"&&define.amd&&define(function(){return zt})});var Jc={};function n1(e,t){return e.compare(t)}var o1,H$,Ul=j(()=>{"use strict";o1=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});exports.mcmp=void 0;H$=o1(No());exports.mcmp=n1});var xr={};function pa(e,t){if((0,i1.equal)(e,t))return!0;if((0,Wt.istensor)(e)){for(let r=0;r<e.tensor.nelem;r++)if(pa(e.tensor.elem[r],t))return!0;return!1}return(0,Wt.iscons)(e)?[...e].some(r=>pa(r,t)):!1}function Kc(e,t){if((0,Bl.isimaginaryunit)(e))return!1;if((0,Wt.ispower)(e)&&!(0,Bl.isinteger)((0,Wt.caddr)(t))&&pa((0,Wt.cadr)(e),Wt.Constants.imaginaryunit)||(0,Wt.ispower)(e)&&(0,Bl.equaln)((0,Wt.cadr)(e),-1)&&!(0,Bl.isinteger)((0,Wt.caddr)(t)))return!0;if((0,Wt.istensor)(e)){for(let r=0;r<e.tensor.nelem;r++)if(Kc(e.tensor.elem[r],t))return!0;return!1}return(0,Wt.iscons)(e)?[...e].some(r=>Kc(r,t)):!1}function e0(e){if((0,Wt.ispower)(e)&&(0,Wt.cadr)(e)===(0,a1.symbol)(Wt.E))return pa((0,Wt.caddr)(e),Wt.Constants.imaginaryunit);if((0,Wt.istensor)(e)){for(let t=0;t<e.tensor.nelem;t++)if(e0(e.tensor.elem[t]))return!0;return!1}return(0,Wt.iscons)(e)?[...e].some(e0):!1}var Bl,i1,Wt,a1,ar=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.findPossibleExponentialForm=exports.findPossibleClockForm=exports.Find=void 0;Bl=(K(),o(te)),i1=(Le(),o(Pe)),Wt=(T(),o(N)),a1=(U(),o(G));exports.Find=pa;exports.findPossibleClockForm=Kc;exports.findPossibleExponentialForm=e0});var c1={};function l1(e,t){let{ndim:r}=e.tensor,s=t.length;s>r&&(0,hs.stop)("too many indices for tensor");let n=0;for(let u=0;u<s;u++){let c=(0,S_.nativeInt)(t[u]);(c<1||c>e.tensor.dim[u])&&(0,hs.stop)("index out of range"),n=n*e.tensor.dim[u]+c-1}if(r===s)return e.tensor.elem[n];n=e.tensor.dim.slice(s).reduce((u,c)=>u*c,n);let i=e.tensor.dim.slice(s).reduce((u,c)=>u*c,1),a=(0,I_.alloc_tensor)(i);a.tensor.ndim=r-s,a.tensor.dim=e.tensor.dim.slice(s);for(let u=0;u<i;u++)a.tensor.elem[u]=e.tensor.elem[n+u];return(0,dn.check_tensor_dimensions)(e),(0,dn.check_tensor_dimensions)(a),a}function u1(e,...t){t.length<2&&(0,hs.stop)("error in indexed assign");let[r,...s]=t;(0,t0.istensor)(r)||(0,hs.stop)("error in indexed assign: assigning to something that is not a tensor");let{ndim:n}=r.tensor,i=s.length;i>n&&(0,hs.stop)("error in indexed assign");let a=0;for(let c=0;c<i;c++){let d=(0,S_.nativeInt)(s[c]);(d<1||d>r.tensor.dim[c])&&(0,hs.stop)(`error in indexed assign
`),a=a*r.tensor.dim[c]+d-1}for(let c=i;c<n;c++)a=a*r.tensor.dim[c]+0;let u=(0,I_.alloc_tensor)(r.tensor.nelem);if(u.tensor.ndim=r.tensor.ndim,u.tensor.dim=Array.from(r.tensor.dim),u.tensor.elem=Array.from(r.tensor.elem),(0,dn.check_tensor_dimensions)(r),(0,dn.check_tensor_dimensions)(u),r=u,n===i)return(0,t0.istensor)(e)&&(0,hs.stop)("error in indexed assign"),r.tensor.elem[a]=e,(0,dn.check_tensor_dimensions)(r),r;(0,t0.istensor)(e)||(0,hs.stop)("error in indexed assign"),n-i!==e.tensor.ndim&&(0,hs.stop)("error in indexed assign");for(let c=0;c<e.tensor.ndim;c++)r.tensor.dim[i+c]!==e.tensor.dim[c]&&(0,hs.stop)("error in indexed assign");for(let c=0;c<e.tensor.nelem;c++)r.tensor.elem[a+c]=e.tensor.elem[c];return(0,dn.check_tensor_dimensions)(r),(0,dn.check_tensor_dimensions)(e),r}var I_,t0,hs,S_,dn,R_=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.set_component=exports.index_function=void 0;I_=(Ct(),o(Dt)),t0=(T(),o(N)),hs=(Ae(),o(Me)),S_=(Y(),o(V)),dn=(jt(),o(Ot));exports.index_function=l1;exports.set_component=u1});var oe={};function d1(...e){let t=(0,f1.symbol)(w_.NIL);for(let r=e.length-1;r>=0;r--)t=new w_.Cons(e[r],t);return t}var w_,f1,se=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.makeList=void 0;w_=(T(),o(N)),f1=(U(),o(G));exports.makeList=d1});var L_={};function p1(e){let t=(0,Xs.caadr)(e),r=(0,Xs.cdadr)(e),s=(0,Xs.caddr)(e);return(0,Xs.issymbol)(t)||(0,_1.stop)("function name?"),(0,Xs.car)(s)===(0,Gl.symbol)(Xs.EVAL)&&(s=(0,m1.Eval)((0,Xs.cadr)(s))),s=(0,x1.makeList)((0,Gl.symbol)(Xs.FUNCTION),s,r),(0,Gl.set_binding)(t,s),(0,Gl.symbol)(Xs.NIL)}function b1(e){return e}var Xs,_1,Gl,m1,x1,r0=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_function_reference=exports.define_user_function=void 0;Xs=(T(),o(N)),_1=(Ae(),o(Me)),Gl=(U(),o(G)),m1=(F(),o(z)),x1=(se(),o(oe));exports.define_user_function=p1;exports.Eval_function_reference=b1});var D_={};function y1(e){e=(0,Fl.cdr)(e);let t=(0,C_.Eval)((0,Fl.car)(e));return(0,Fl.iscons)(e)&&(t=e.tail().reduce((r,s)=>P_(r,(0,C_.Eval)(s)),t)),t}function P_(e,t){return(0,Fl.doexpand)(v1,e,t)}function v1(e,t){return(0,s0.inverse)((0,s0.divide)((0,s0.divide)((0,g1.gcd)(e,t),e),t))}var Fl,C_,g1,s0,o0=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.lcm=exports.Eval_lcm=void 0;Fl=(T(),o(N)),C_=(F(),o(z)),g1=(_n(),o(li)),s0=(Q(),o(W));exports.Eval_lcm=y1;exports.lcm=P_});var Yl={};function j1(e){e=(0,Hs.cdr)(e);let t=(0,k_.Eval)((0,Hs.car)(e));return(0,Hs.iscons)(e)&&(t=e.tail().reduce((r,s)=>zl(r,(0,k_.Eval)(s)),t)),t}function zl(e,t){return A1(e,t)}function A1(e,t){return(0,Hs.isadd)(e)?O1(e,t):(0,Hs.istensor)(e)?M1(e,t):(0,E1.Find)(e,t)?Hs.Constants.zero:e}function O1(e,t){return(0,Hs.iscons)(e)?e.tail().reduce((r,s)=>(0,h1.add)(r,zl(s,t)),Hs.Constants.zero):Hs.Constants.zero}function M1(e,t){let r=e.tensor.nelem,s=(0,q1.alloc_tensor)(r);return s.tensor.ndim=e.tensor.ndim,s.tensor.dim=Array.from(e.tensor.dim),s.tensor.elem=e.tensor.elem.map(n=>zl(n,t)),s}var q1,Hs,E1,h1,k_,ba=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.filter=exports.Eval_filter=void 0;q1=(Ct(),o(Dt)),Hs=(T(),o(N)),E1=(ar(),o(xr)),h1=(_e(),o(pe)),k_=(F(),o(z));exports.Eval_filter=j1;exports.filter=zl});var ns={};function Vl(e,t,r){if(t===(0,$_.symbol)(mn.NIL)||r===(0,$_.symbol)(mn.NIL))return e;if((0,mn.istensor)(e)){let s=(0,T1.alloc_tensor)(e.tensor.nelem);return s.tensor.ndim=e.tensor.ndim,s.tensor.dim=Array.from(e.tensor.dim),s.tensor.elem=e.tensor.elem.map(n=>{let i=Vl(n,t,r);return(0,I1.check_tensor_dimensions)(s),i}),s}return(0,N1.equal)(e,t)?r:(0,mn.iscons)(e)?new mn.Cons(Vl((0,mn.car)(e),t,r),Vl((0,mn.cdr)(e),t,r)):e}var T1,mn,N1,I1,$_,Xr=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.subst=void 0;T1=(Ct(),o(Dt)),mn=(T(),o(N)),N1=(Le(),o(Pe)),I1=(jt(),o(Ot)),$_=(U(),o(G));exports.subst=Vl});var ui={};function P1(e){let t=(0,Zl.Eval)((0,Io.cadddr)(e)),r=(0,Zl.Eval)((0,Io.caddr)(e)),s=(0,Zl.Eval)((0,Io.cadr)(e));return t===(0,U_.symbol)(Io.NIL)&&(t=r,r=(0,U_.symbol)(Io.SYMBOL_X)),(0,w1.filter)((0,B_.divide)(s,(0,L1.power)(r,t)),r)}function D1(e,t){let r=[];for(;;){let s=(0,Zl.Eval)((0,C1.subst)(e,t,Io.Constants.zero));if(r.push(s),e=(0,R1.subtract)(e,s),(0,S1.equal)(e,Io.Constants.zero))return r;e=(0,Io.doexpand)(B_.divide,e,t)}}var Io,U_,S1,R1,Zl,w1,B_,L1,C1,xn=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.coeff=exports.Eval_coeff=void 0;Io=(T(),o(N)),U_=(U(),o(G)),S1=(Le(),o(Pe)),R1=(_e(),o(pe)),Zl=(F(),o(z)),w1=(ba(),o(Yl)),B_=(Q(),o(W)),L1=(At(),o(Mt)),C1=(Xr(),o(ns));exports.Eval_coeff=P1;exports.coeff=D1});var a0={};function G1(e){return F_((0,$1.Eval)((0,ga.cadr)(e)))}function F_(e){let t=(0,U1.makeList)((0,k1.symbol)(ga.POWER),ga.Constants.negOne,(0,i0.divide)((0,n0.arg)(e),ga.Constants.Pi())),r=(0,i0.multiply)((0,G_.abs)(e),t);return B1&&(console.log(`clockform: abs of ${e} : ${(0,G_.abs)(e)}`),console.log(`clockform: arg of ${e} : ${(0,n0.arg)(e)}`),console.log(`clockform: divide : ${(0,i0.divide)((0,n0.arg)(e),ga.Constants.Pi())}`),console.log(`clockform: power : ${t}`),console.log(`clockform: multiply : ${r}`)),r}var ga,k1,G_,n0,$1,U1,i0,B1,Xl=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.clockform=exports.Eval_clock=void 0;ga=(T(),o(N)),k1=(U(),o(G)),G_=(is(),o(js)),n0=(ci(),o(ya)),$1=(F(),o(z)),U1=(se(),o(oe)),i0=(Q(),o(W)),B1=!1;exports.Eval_clock=G1;exports.clockform=F_});var u0={};function Z1(e){return Y_((0,V1.Eval)((0,l0.cadr)(e)))}function Y_(e){return(0,l0.evalPolar)(()=>(0,z_.multiply)((0,z1.abs)(e),(0,F1.exponential)((0,z_.multiply)(l0.Constants.imaginaryunit,(0,Y1.arg)(e)))))}var l0,F1,z1,Y1,V1,z_,Hl=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.polar=exports.Eval_polar=void 0;l0=(T(),o(N)),F1=(Le(),o(Pe)),z1=(is(),o(js)),Y1=(ci(),o(ya)),V1=(F(),o(z)),z_=(Q(),o(W));exports.Eval_polar=Z1;exports.polar=Y_});var fi={};function K1(e){return e=(0,V_.Eval)((0,Ql.cadr)(e)),(0,X1.Find)(e,Ql.Constants.imaginaryunit)?c0(e):(0,H1.clockform)(c0((0,W1.polar)(e)))}function c0(e){return(0,V_.Eval)((0,J1.subst)(e,Ql.Constants.imaginaryunit,(0,Q1.negate)(Ql.Constants.imaginaryunit)))}var Ql,X1,H1,V_,Q1,W1,J1,pn=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.conjugate=exports.Eval_conj=void 0;Ql=(T(),o(N)),X1=(ar(),o(xr)),H1=(Xl(),o(a0)),V_=(F(),o(z)),Q1=(Q(),o(W)),W1=(Hl(),o(u0)),J1=(Xr(),o(ns));exports.Eval_conj=K1;exports.conjugate=c0});var us={};function eq(e){return(0,va.Find)(e,(0,ls.symbol)(as.SYMBOL_X))?(0,ls.symbol)(as.SYMBOL_X):(0,va.Find)(e,(0,ls.symbol)(as.SYMBOL_Y))?(0,ls.symbol)(as.SYMBOL_Y):(0,va.Find)(e,(0,ls.symbol)(as.SYMBOL_Z))?(0,ls.symbol)(as.SYMBOL_Z):(0,va.Find)(e,(0,ls.symbol)(as.SYMBOL_T))?(0,ls.symbol)(as.SYMBOL_T):(0,va.Find)(e,(0,ls.symbol)(as.SYMBOL_S))?(0,ls.symbol)(as.SYMBOL_S):(0,ls.symbol)(as.SYMBOL_X)}var as,va,ls,Hr=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.guess=void 0;as=(T(),o(N)),va=(ar(),o(xr)),ls=(U(),o(G));exports.guess=eq});var Z_={};function tq(e,t){return e.add(t)}function rq(e,t){return e.subtract(t)}var f0=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.msub=exports.madd=void 0;exports.madd=tq;exports.msub=rq});var qa={};function nq(e,t){return oq.default.gcd(e,t)}var sq,oq,di=j(()=>{"use strict";sq=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});exports.mgcd=void 0;oq=sq(No());exports.mgcd=nq});var As={};function iq(e,t){return e.multiply(t)}function aq(e,t){return e.divide(t)}function lq(e,t){return e.mod(t)}function uq(e,t){let r=e.divmod(t);return[r.quotient,r.remainder]}var cs=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.mdivrem=exports.mmod=exports.mdiv=exports.mmul=void 0;exports.mmul=iq;exports.mdiv=aq;exports.mmod=lq;exports.mdivrem=uq});var X_={};function cq(e){return e.isProbablePrime()}var d0=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.mprime=void 0;exports.mprime=cq});var vq={};function pq(e){if((0,_0.equaln)(e,0)||(0,_0.equaln)(e,1)||(0,_0.equaln)(e,-1))return e;Yt=e.q.a;let t=bq();return t.length==1?t[0]:(0,J_.makeList)((0,W_.symbol)(Ro.MULTIPLY),...t)}function bq(){let e=[];Yt.isNegative()&&(Yt=(0,So.setSignTo)(Yt,1),e.push(Ro.Constants.negOne));for(let t=0;t<1e4;t++)if(e.push(...gq(t)),Yt.compare(1)===0)return e;return e.push(...yq()),e}function gq(e){let t=[],r,s=(0,So.mint)(Ro.primetab[e]),n=0;for(;;){if(Yt.compare(1)===0)return n&&t.push(Ea(s,n)),t;let i;if([r,i]=Array.from((0,_i.mdivrem)(Yt,s)),i.isZero())n++,Yt=r;else break}return n&&t.push(Ea(s,n)),(0,Q_.mcmp)(r,s)===-1&&(t.push(Ea(Yt,1)),Yt=(0,So.mint)(1)),t}function yq(){let e=[],t=(0,So.mint)(1),r=(0,So.mint)(5),s=(0,So.mint)(2),n=1,i=1;for(;;){if((0,xq.mprime)(Yt))return e.push(Ea(Yt,1)),e;for(;;){Ro.defs.esc_flag&&(0,_q.stop)("esc");let a=(0,H_.msub)(s,r);a=(0,So.setSignTo)(a,1);let u=(0,mq.mgcd)(a,Yt);if((0,Ro.MEQUAL)(u,1)){--n===0&&(s=r,i*=2,n=i),a=(0,_i.mmul)(r,r),r=(0,H_.madd)(a,t),a=(0,_i.mmod)(r,Yt),r=a;continue}if(e.push(Ea(u,1)),(0,Q_.mcmp)(u,Yt)===0)return e;a=(0,_i.mdiv)(Yt,u),Yt=a,a=(0,_i.mmod)(r,Yt),r=a,a=(0,_i.mmod)(s,Yt),s=a;break}}}function Ea(e,t){let r=new Ro.Num(e);return t>1&&(r=(0,J_.makeList)((0,W_.symbol)(Ro.POWER),r,new Ro.Num((0,So.mint)(t)))),r}var fq,dq,Ro,Q_,_q,W_,So,_0,J_,H_,mq,_i,xq,Yt,K_=j(()=>{"use strict";fq=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});exports.factor_number=void 0;dq=fq(No()),Ro=(T(),o(N)),Q_=(Ul(),o(Jc)),_q=(Ae(),o(Me)),W_=(U(),o(G)),So=(Y(),o(V)),_0=(K(),o(te)),J_=(se(),o(oe)),H_=(f0(),o(Z_)),mq=(di(),o(qa)),_i=(cs(),o(As)),xq=(d0(),o(X_)),Yt=(0,dq.default)(0);exports.factor_number=pq});var Wl={};function Mq(e){let t=(0,x0.Eval)((0,Os.cadr)(e)),r=(0,x0.Eval)((0,Os.caddr)(e)),s=r===(0,Eq.symbol)(Os.NIL)?(0,hq.guess)(t):r,n=rm(t,s);return e=(0,Os.cdddr)(e),(0,Os.iscons)(e)&&(n=[...e].reduce((i,a)=>Tq(i,(0,x0.Eval)(a)),n)),n}function Tq(e,t){if((0,Os.ismultiply)(e)){let s=[];return e.tail().forEach(n=>em(s,n,t)),(0,Aq.multiply_all_noexpand)(s)}let r=[];return em(r,e,t),r[0]}function em(e,t,r){let s=(0,tm.factorpoly)(t,r);if((0,Os.ismultiply)(s)){e.push(...s.tail());return}e.push(s)}function rm(e,t){return(0,jq.isinteger)(e)?(0,Oq.factor_number)(e):(0,tm.factorpoly)(e,t)}function Nq(e){isNaN(e)&&(0,qq.stop)("number too big to factor");let t=[];e<0&&(e=-e);for(let r=0;r<Os.MAXPRIMETAB;r++){let s=Os.primetab[r];if(s>e/s)break;let n=0;for(;e%s===0;)e/=s,n++;n&&(t.push((0,m0.integer)(s)),t.push((0,m0.integer)(n)))}return e>1&&(t.push((0,m0.integer)(e)),t.push(Os.Constants.one)),t}var Os,qq,Eq,m0,x0,tm,hq,jq,Aq,Oq,ha=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.factor_small_number=exports.factor=exports.Eval_factor=void 0;Os=(T(),o(N)),qq=(Ae(),o(Me)),Eq=(U(),o(G)),m0=(Y(),o(V)),x0=(F(),o(z)),tm=(mi(),o(ja)),hq=(Hr(),o(us)),jq=(K(),o(te)),Aq=(Q(),o(W)),Oq=(K_(),o(vq));exports.Eval_factor=Mq;exports.factor=rm;exports.factor_small_number=Nq});var im={};function Cq(e){let t=om(e),r=t.length;t.sort(sm.cmp_expr);let s=(0,Sq.alloc_tensor)(r);return s.tensor.ndim=1,s.tensor.dim[0]=r,s.tensor.elem=t,s}function om(e){let t=[];if((0,ze.isNumericAtom)(e))t.push(...(0,Jl.factor_small_number)((0,xi.nativeInt)(e)));else if((0,ze.isadd)(e))t.push(...Dq(e));else if((0,ze.ismultiply)(e)){if(e=(0,ze.cdr)(e),(0,ze.isNumericAtom)((0,ze.car)(e))&&(t.push(...(0,Jl.factor_small_number)((0,xi.nativeInt)((0,ze.car)(e)))),e=(0,ze.cdr)(e)),(0,ze.iscons)(e)){let s=[...e].map(n=>(0,ze.ispower)(n)?[(0,ze.cadr)(n),(0,ze.caddr)(n)]:[n,ze.Constants.one]);t.push(...Pq(s))}}else(0,ze.ispower)(e)?t.push((0,ze.cadr)(e),(0,ze.caddr)(e)):t.push(e,ze.Constants.one);let r=t.length;return t.push(ze.Constants.one),nm(t,0,r),t.slice(r)}function nm(e,t,r){let s=e.pop();if(t===r){e.push(s);return}let n=e[t+0],i=e[t+1],a=(0,xi.nativeInt)(i);if(!isNaN(a))for(let u=0;u<=Math.abs(a);u++)e.push((0,p0.multiply)(s,(0,Lq.power)(n,(0,xi.integer)((0,sm.sign)(a)*u)))),nm(e,t+2,r)}function Dq(e){let t=(0,ze.iscons)(e)?e.tail().reduce(Iq.gcd):(0,ze.car)(e),r=[],s=t;if((0,wq.isplusone)(s))return r.push(e,ze.Constants.one),r;if((0,ze.isNumericAtom)(s))r.push(...(0,Jl.factor_small_number)((0,xi.nativeInt)(s)));else if((0,ze.ismultiply)(s)){let i=(0,ze.cdr)(s);(0,ze.isNumericAtom)((0,ze.car)(i))?r.push(...(0,Jl.factor_small_number)((0,xi.nativeInt)((0,ze.car)(i)))):r.push((0,ze.car)(i),ze.Constants.one),(0,ze.iscons)(i)&&i.tail().forEach(a=>r.push(a,ze.Constants.one))}else r.push(s,ze.Constants.one);s=(0,p0.inverse)(s);let n=(0,ze.iscons)(e)?e.tail().reduce((i,a)=>(0,Rq.add)(i,(0,p0.multiply)(s,a)),ze.Constants.zero):(0,ze.cdr)(e);return r.push(n,ze.Constants.one),r}var Iq,Sq,ze,sm,Rq,xi,Jl,wq,p0,Lq,Pq,b0=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ydivisors=exports.divisors=void 0;Iq=(_n(),o(li)),Sq=(Ct(),o(Dt)),ze=(T(),o(N)),sm=(Le(),o(Pe)),Rq=(_e(),o(pe)),xi=(Y(),o(V)),Jl=(ha(),o(Wl)),wq=(K(),o(te)),p0=(Q(),o(W)),Lq=(At(),o(Mt));exports.divisors=Cq;Pq=e=>[].concat(...e);exports.ydivisors=om});var v0={};function Uq(e){let t=(0,g0.Eval)((0,pi.cadr)(e)),r=(0,g0.Eval)((0,pi.caddr)(e)),s=(0,g0.Eval)((0,pi.cadddr)(e));return s===(0,am.symbol)(pi.NIL)&&(s=(0,am.symbol)(pi.SYMBOL_X)),cm(t,r,s)}function cm(e,t,r){let s=(0,um.coeff)(e,r),n=s.length-1,i=(0,um.coeff)(t,r),a=i.length-1,u=n-a,c=pi.Constants.zero;for(;u>=0;){let d=(0,y0.divide)(s[n],i[a]);for(let m=0;m<=a;m++)s[u+m]=(0,lm.subtract)(s[u+m],(0,y0.multiply)(i[m],d));c=(0,lm.add)(c,(0,y0.multiply)(d,(0,$q.power)(r,(0,kq.integer)(u)))),n--,u--}return c}var pi,am,lm,kq,um,g0,y0,$q,Kl=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.divpoly=exports.Eval_quotient=void 0;pi=(T(),o(N)),am=(U(),o(G)),lm=(_e(),o(pe)),kq=(Y(),o(V)),um=(xn(),o(ui)),g0=(F(),o(z)),y0=(Q(),o(W)),$q=(At(),o(Mt));exports.Eval_quotient=Uq;exports.divpoly=cm});var wo={};function Gq(e){return Aa((0,Bq.Eval)((0,kt.cadr)(e)))}function Aa(e){return(0,kt.isadd)(e)?Fq(e):mm(e)}function Fq(e){let t=(0,kt.cdr)(e);for(;(0,kt.iscons)(t);){let r=(0,kt.car)(t);if((0,_m.isnpi)(r)){let s=(0,q0.subtract)(e,r);return(0,q0.add)((0,fs.multiply)(Aa(s),(0,fm.cosine)(r)),(0,fs.multiply)((0,fm.cosine)(s),Aa(r)))}t=(0,kt.cdr)(t)}return mm(e)}function mm(e){if((0,kt.car)(e)===(0,eu.symbol)(kt.ARCSIN))return(0,kt.cadr)(e);if((0,kt.isdouble)(e)){let r=Math.sin(e.d);return Math.abs(r)<1e-10&&(r=0),(0,Vt.double)(r)}if((0,_m.isnegative)(e))return(0,fs.negate)(Aa((0,fs.negate)(e)));if((0,kt.car)(e)===(0,eu.symbol)(kt.ARCTAN))return(0,fs.multiply)((0,kt.cadr)(e),(0,bi.power)((0,q0.add)(kt.Constants.one,(0,bi.power)((0,kt.cadr)(e),(0,Vt.integer)(2))),(0,Vt.rational)(-1,2)));let t=(0,Vt.nativeInt)((0,fs.divide)((0,fs.multiply)(e,(0,Vt.integer)(180)),kt.Constants.Pi()));if(t<0||isNaN(t))return(0,dm.makeList)((0,eu.symbol)(kt.SIN),e);switch(t%360){case 0:case 180:return kt.Constants.zero;case 30:case 150:return(0,Vt.rational)(1,2);case 210:case 330:return(0,Vt.rational)(-1,2);case 45:case 135:return(0,fs.multiply)((0,Vt.rational)(1,2),(0,bi.power)((0,Vt.integer)(2),(0,Vt.rational)(1,2)));case 225:case 315:return(0,fs.multiply)((0,Vt.rational)(-1,2),(0,bi.power)((0,Vt.integer)(2),(0,Vt.rational)(1,2)));case 60:case 120:return(0,fs.multiply)((0,Vt.rational)(1,2),(0,bi.power)((0,Vt.integer)(3),(0,Vt.rational)(1,2)));case 240:case 300:return(0,fs.multiply)((0,Vt.rational)(-1,2),(0,bi.power)((0,Vt.integer)(3),(0,Vt.rational)(1,2)));case 90:return kt.Constants.one;case 270:return kt.Constants.negOne;default:return(0,dm.makeList)((0,eu.symbol)(kt.SIN),e)}}var kt,eu,q0,Vt,fm,Bq,_m,dm,fs,bi,Qs=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.sine=exports.Eval_sin=void 0;kt=(T(),o(N)),eu=(U(),o(G)),q0=(_e(),o(pe)),Vt=(Y(),o(V)),fm=(Lo(),o(bn)),Bq=(F(),o(z)),_m=(K(),o(te)),dm=(se(),o(oe)),fs=(Q(),o(W)),bi=(At(),o(Mt));exports.Eval_sin=Gq;exports.sine=Aa});var bn={};function Yq(e){return ru((0,zq.Eval)((0,lr.cadr)(e)))}function ru(e){return(0,lr.isadd)(e)?Vq(e):gm(e)}function Vq(e){if((0,lr.iscons)(e)){for(let t of e.tail())if((0,bm.isnpi)(t)){let r=(0,E0.subtract)(e,t);return(0,E0.subtract)((0,Ws.multiply)(ru(r),ru(t)),(0,Ws.multiply)((0,pm.sine)(r),(0,pm.sine)(t)))}}return gm(e)}function gm(e){if((0,lr.car)(e)===(0,tu.symbol)(lr.ARCCOS))return(0,lr.cadr)(e);if((0,lr.isdouble)(e)){let r=Math.cos(e.d);return Math.abs(r)<1e-10&&(r=0),(0,Zt.double)(r)}if((0,bm.isnegative)(e)&&(e=(0,Ws.negate)(e)),(0,lr.car)(e)===(0,tu.symbol)(lr.ARCTAN)){let r=(0,E0.add)(lr.Constants.one,(0,gi.power)((0,lr.cadr)(e),(0,Zt.integer)(2)));return(0,gi.power)(r,(0,Zt.rational)(-1,2))}let t=(0,Zt.nativeInt)((0,Ws.divide)((0,Ws.multiply)(e,(0,Zt.integer)(180)),lr.Constants.Pi()));if(t<0||isNaN(t))return(0,xm.makeList)((0,tu.symbol)(lr.COS),e);switch(t%360){case 90:case 270:return lr.Constants.zero;case 60:case 300:return(0,Zt.rational)(1,2);case 120:case 240:return(0,Zt.rational)(-1,2);case 45:case 315:return(0,Ws.multiply)((0,Zt.rational)(1,2),(0,gi.power)((0,Zt.integer)(2),(0,Zt.rational)(1,2)));case 135:case 225:return(0,Ws.multiply)((0,Zt.rational)(-1,2),(0,gi.power)((0,Zt.integer)(2),(0,Zt.rational)(1,2)));case 30:case 330:return(0,Ws.multiply)((0,Zt.rational)(1,2),(0,gi.power)((0,Zt.integer)(3),(0,Zt.rational)(1,2)));case 150:case 210:return(0,Ws.multiply)((0,Zt.rational)(-1,2),(0,gi.power)((0,Zt.integer)(3),(0,Zt.rational)(1,2)));case 0:return lr.Constants.one;case 180:return lr.Constants.negOne;default:return(0,xm.makeList)((0,tu.symbol)(lr.COS),e)}}var lr,tu,E0,Zt,zq,bm,xm,Ws,gi,pm,Lo=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.cosine=exports.Eval_cos=void 0;lr=(T(),o(N)),tu=(U(),o(G)),E0=(_e(),o(pe)),Zt=(Y(),o(V)),zq=(F(),o(z)),bm=(K(),o(te)),xm=(se(),o(oe)),Ws=(Q(),o(W)),gi=(At(),o(Mt)),pm=(Qs(),o(wo));exports.Eval_cos=Yq;exports.cosine=ru});var Co={};function Hq(e){return A0((0,Zq.Eval)((0,pr.cadr)(e)))}function A0(e){let t=e;if(Oa&&(console.log(`RECT of ${t}`),console.log(`any clock forms in : ${t} ? ${(0,yi.findPossibleClockForm)(t,e)}`)),(0,pr.issymbol)(e))return Oa&&console.log(` rect: simple symbol: ${t}`),(0,su.isZeroAtomOrTensor)((0,Js.get_binding)((0,Js.symbol)(pr.ASSUME_REAL_VARIABLES)))?(0,Xq.makeList)((0,Js.symbol)(pr.YYRECT),e):e;if(!(0,su.isZeroAtomOrTensor)((0,Js.get_binding)((0,Js.symbol)(pr.ASSUME_REAL_VARIABLES)))&&!(0,yi.findPossibleExponentialForm)(e)&&!(0,yi.findPossibleClockForm)(e,e)&&!((0,yi.Find)(e,(0,Js.symbol)(pr.SIN))&&(0,yi.Find)(e,(0,Js.symbol)(pr.COS))&&(0,yi.Find)(e,pr.Constants.imaginaryunit)))return Oa&&console.log(` rect: simple symbol: ${t}`),e;if((0,pr.ismultiply)(e)&&(0,su.isimaginaryunit)((0,pr.cadr)(e))&&!(0,su.isZeroAtomOrTensor)((0,Js.get_binding)((0,Js.symbol)(pr.ASSUME_REAL_VARIABLES))))return e;if((0,pr.isadd)(e))return Oa&&console.log(` rect - ${t} is a sum `),e.tail().reduce((s,n)=>(0,h0.add)(s,A0(n)),pr.Constants.zero);let r=(0,ou.multiply)((0,ym.abs)(e),(0,h0.add)((0,j0.cosine)((0,gn.arg)(e)),(0,ou.multiply)(pr.Constants.imaginaryunit,(0,nu.sine)((0,gn.arg)(e)))));return Oa&&(console.log(` rect - ${t} is NOT a sum `),console.log(` rect - ${t} abs: ${(0,ym.abs)(e)}`),console.log(` rect - ${t} arg of ${e} : ${e}`),console.log(` rect - ${t} cosine: ${(0,j0.cosine)((0,gn.arg)(e))}`),console.log(` rect - ${t} sine: ${(0,nu.sine)((0,gn.arg)(e))}`),console.log(` rect - ${t} i * sine: ${(0,ou.multiply)(pr.Constants.imaginaryunit,(0,nu.sine)((0,gn.arg)(e)))}`),console.log(` rect - ${t} cos + i * sine: ${(0,h0.add)((0,j0.cosine)((0,gn.arg)(e)),(0,ou.multiply)(pr.Constants.imaginaryunit,(0,nu.sine)((0,gn.arg)(e))))}`),console.log(`rect of ${t} : ${r}`)),r}var pr,yi,Js,ym,h0,gn,j0,Zq,su,Xq,ou,nu,Oa,Ks=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.rect=exports.Eval_rect=void 0;pr=(T(),o(N)),yi=(ar(),o(xr)),Js=(U(),o(G)),ym=(is(),o(js)),h0=(_e(),o(pe)),gn=(ci(),o(ya)),j0=(Lo(),o(bn)),Zq=(F(),o(z)),su=(K(),o(te)),Xq=(se(),o(oe)),ou=(Q(),o(W)),nu=(Qs(),o(wo)),Oa=!1;exports.Eval_rect=Hq;exports.rect=A0});var ja={};function oE(e,t){return!(0,Wq.Find)(e,t)||!(0,Ts.ispolyexpandedform)(e,t)||!(0,De.issymbol)(t)?e:nE(e,t)}function nE(e,t){let r,s,n,i;(0,Ts.isfloating)(e)&&(0,Jq.stop)("floating point numbers in polynomial");let a=(0,vm.coeff)(e,t),u=a.length-1,c=iE(a),d="real",m=null;for(;u>0;){var R,M;if((0,Ts.isZeroAtomOrTensor)(a[0])?(r=De.Constants.one,s=De.Constants.zero):d==="real"?[M,r,s]=aE(a,u,t,r,s):d==="complex"&&([R,r]=lE(m,a,u)),d==="real")if(M===!1){d="complex";continue}else{for(n=(0,Ms.add)((0,St.multiply)(r,t),s),De.DEBUG&&console.log(`success
FACTOR=${n}`),c=(0,St.multiply_noexpand)(c,n),uE(r,s,a,u);u&&(0,Ts.isZeroAtomOrTensor)(a[u]);)u--;let H=De.Constants.zero;for(let X=0;X<=u;X++)H=(0,Ms.add)(H,(0,St.multiply)(a[X],(0,vi.power)(t,(0,Po.integer)(X))));m=H}else if(d==="complex"){if(R===!1)break;{let H=(0,Ms.subtract)(r,t),X=(0,Ms.subtract)((0,eE.conjugate)(r),t);n=(0,St.multiply)(H,X),De.DEBUG&&console.log(`success
FACTOR=${n}`);let Ie=c;if(c=(0,St.multiply_noexpand)(c,n),m==null){let Se=De.Constants.zero;for(let dt=0;dt<=u;dt++)Se=(0,Ms.add)(Se,(0,St.multiply)(a[dt],(0,vi.power)(t,(0,Po.integer)(dt))));m=Se}let at=t,Ke=n,Fe=m;m=(0,sE.divpoly)(Fe,Ke,at);let ft=(0,St.multiply)(m,n);if(!(0,Kq.equal)(ft,Fe))return De.DEBUG&&(console.log("we found a polynomial based on complex root and its conj but it doesn't divide the poly, quitting"),console.log(`so just returning previousFactorisation times dividend: ${Ie} * ${Fe}`)),(0,St.multiply_noexpand)(Ie,(0,De.noexpand)(qm.yycondense,Fe));for(let Se=0;Se<=u;Se++)a.pop();a.push(...(0,vm.coeff)(m,t)),u-=2}}}let k=De.Constants.zero;for(let H=0;H<=u;H++)k=(0,Ms.add)(k,(0,St.multiply)(a[H],(0,vi.power)(t,(0,Po.integer)(H))));return e=k,De.DEBUG&&console.log(`POLY=${e}`),e=(0,De.noexpand)(qm.yycondense,e),u>0&&(0,Ts.isnegativeterm)(a[u])&&(e=(0,St.negate)(e),c=(0,St.negate_noexpand)(c)),c=(0,St.multiply_noexpand)(c,e),De.DEBUG&&console.log(`RESULT=${c}`),c}function iE(e){let t=De.Constants.one;for(let r of e)t=(0,Qq.lcm)((0,tE.denominator)(r),t);for(let r=0;r<e.length;r++)e[r]=(0,St.multiply)(t,e[r]);return t=(0,St.reciprocate)(t),De.DEBUG&&console.log("rationalize_coefficients result"),t}function aE(e,t,r,s,n){let i,a,u;if(De.DEBUG){let m=De.Constants.zero;for(let R=0;R<=t;R++)m=(0,Ms.add)(m,(0,St.multiply)(e[R],(0,vi.power)(r,(0,Po.integer)(R))));i=m,console.log(`POLY=${i}`)}let c=(0,Em.ydivisors)(e[t]),d=(0,Em.ydivisors)(e[0]);if(De.DEBUG){console.log("divisors of base term");for(let m=0;m<d.length;m++)console.log(`, ${d[m]}`);console.log("divisors of leading term");for(let m=0;m<c.length;m++)console.log(`, ${c[m]}`)}for(let m=0;m<c.length;m++)for(let R=0;R<d.length;R++){if(s=c[m],n=d[R],a=(0,St.negate)((0,St.divide)(n,s)),u=Ma(a,e,t),De.DEBUG&&console.log(`try A=${s}
, B=${n}
, root ${r}
=-B/A=${a}
, POLY(${a}
)=${u}`),(0,Ts.isZeroAtomOrTensor)(u))return De.DEBUG&&console.log("get_factor_from_real_root returning true"),[!0,s,n];if(n=(0,St.negate)(n),a=(0,St.negate)(a),u=Ma(a,e,t),De.DEBUG&&console.log(`try A=${s}
, B=${n}
, root ${r}
=-B/A=${a}
, POLY(${a}
)=${u}`),(0,Ts.isZeroAtomOrTensor)(u))return De.DEBUG&&console.log("get_factor_from_real_root returning true"),[!0,s,n]}return De.DEBUG&&console.log("get_factor_from_real_root returning false"),[!1,s,n]}function lE(e,t,r){let s,n,i,a;if(r<=2)return De.DEBUG&&console.log("no more factoring via complex roots to be found in polynomial of degree <= 2"),[!1,n];if(s=e,De.DEBUG&&console.log(`complex root finding for POLY=${s}`),n=(0,O0.rect)((0,vi.power)(De.Constants.negOne,(0,Po.rational)(2,3))),De.DEBUG&&console.log(`complex root finding: trying with ${n}`),i=n,a=Ma(i,t,r),De.DEBUG&&console.log(`complex root finding result: ${a}`),(0,Ts.isZeroAtomOrTensor)(a))return De.DEBUG&&console.log("get_factor_from_complex_root returning true"),[!0,n];if(n=(0,O0.rect)((0,vi.power)(De.Constants.one,(0,Po.rational)(2,3))),De.DEBUG&&console.log(`complex root finding: trying with ${n}`),i=n,a=Ma(i,t,r),De.DEBUG&&console.log(`complex root finding result: ${a}`),(0,Ts.isZeroAtomOrTensor)(a))return De.DEBUG&&console.log("get_factor_from_complex_root returning true"),[!0,n];for(let u=-10;u<=10;u++)for(let c=1;c<=5;c++){n=(0,O0.rect)((0,Ms.add)((0,Po.integer)(u),(0,St.multiply)((0,Po.integer)(c),De.Constants.imaginaryunit)));let m=Ma(n,t,r);if((0,Ts.isZeroAtomOrTensor)(m))return De.DEBUG&&console.log(`found complex root: ${m}`),[!0,n]}return De.DEBUG&&console.log("get_factor_from_complex_root returning false"),[!1,n]}function uE(e,t,r,s){let n=De.Constants.zero;for(let i=s;i>0;i--){let a=(0,St.divide)(r[i],e);r[i]=n,n=a,r[i-1]=(0,Ms.subtract)(r[i-1],(0,St.multiply)(n,t))}r[0]=n,De.DEBUG&&console.log("yydivpoly Q:")}function Ma(e,t,r){let s=De.Constants.zero;for(let n=r;n>=0;n--)De.DEBUG&&(console.log("Evalpoly top of stack:"),console.log((0,rE.print_list)(s))),s=(0,Ms.add)((0,St.multiply)(s,e),t[n]);return s}var Qq,De,Wq,Jq,Kq,Ms,Po,vm,qm,eE,tE,Em,Ts,St,vi,rE,sE,O0,mi=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.factorpoly=void 0;Qq=(o0(),o(D_)),De=(T(),o(N)),Wq=(ar(),o(xr)),Jq=(Ae(),o(Me)),Kq=(Le(),o(Pe)),Ms=(_e(),o(pe)),Po=(Y(),o(V)),vm=(xn(),o(ui)),qm=(Ta(),o(iu)),eE=(pn(),o(fi)),tE=(Ns(),o(eo)),Em=(b0(),o(im)),Ts=(K(),o(te)),St=(Q(),o(W)),vi=(At(),o(Mt)),rE=(to(),o(Do)),sE=(Kl(),o(v0)),O0=(Ks(),o(Co));exports.factorpoly=oE});var li={};function dE(e){e=(0,J.cdr)(e);let t=(0,jm.Eval)((0,J.car)(e));return(0,J.iscons)(e)&&(t=e.tail().reduce((r,s)=>ro(r,(0,jm.Eval)(s)),t)),t}function ro(e,t){return(0,J.doexpand)(_E,e,t)}function _E(e,t){let r;return(0,yn.equal)(e,t)?e:(0,J.isrational)(e)&&(0,J.isrational)(t)?(0,fE.gcd_numbers)(e,t):(r=Tm(e,t))?mE(e,t,r):(0,J.isadd)(e)&&(0,J.isadd)(t)?xE(e,t):((0,J.isadd)(e)&&(e=Mm(e)),(0,J.isadd)(t)&&(t=Mm(t)),(0,J.ismultiply)(e)?pE(e,t):(0,J.ismultiply)(t)?bE(e,t):(0,J.ismultiply)(e)&&(0,J.ismultiply)(t)?Nm(e,t):Im(e,t))}function Tm(e,t){let r;if((r=(0,T0.isunivarpolyfactoredorexpandedform)(e))&&(0,T0.isunivarpolyfactoredorexpandedform)(t,r))return r}function mE(e,t,r){return e=(0,Am.factorpoly)(e,r),t=(0,Am.factorpoly)(t,r),((0,J.ismultiply)(e)||(0,J.ismultiply)(t))&&((0,J.ismultiply)(e)||(e=(0,Om.makeList)((0,hm.symbol)(J.MULTIPLY),e,J.Constants.one)),(0,J.ismultiply)(t)||(t=(0,Om.makeList)((0,hm.symbol)(J.MULTIPLY),t,J.Constants.one))),(0,J.ismultiply)(e)&&(0,J.ismultiply)(t)?Nm(e,t):Im(e,t)}function Nm(e,t){let r=(0,J.cdr)(e),s=(0,J.cdr)(t);if((0,J.iscons)(r))return[...r].reduce((n,i)=>{if((0,J.iscons)(s))return(0,ko.multiply)(n,[...s].reduce((a,u)=>(0,ko.multiply)(a,ro(i,u)),J.Constants.one))},J.Constants.one)}function Im(e,t){let r,s,n;if((0,J.ispower)(e)?(r=(0,J.caddr)(e),e=(0,J.cadr)(e)):r=J.Constants.one,(0,J.ispower)(t)?(s=(0,J.caddr)(t),t=(0,J.cadr)(t)):s=J.Constants.one,!(0,yn.equal)(e,t))return J.Constants.one;if((0,J.isNumericAtom)(r)&&(0,J.isNumericAtom)(s)){let u=(0,yn.lessp)(r,s)?r:s;return(0,M0.power)(e,u)}let i=(0,ko.divide)(r,s);if((0,J.isNumericAtom)(i)){i=(0,J.ismultiply)(r)&&(0,J.isNumericAtom)((0,J.cadr)(r))?(0,J.cadr)(r):J.Constants.one,n=(0,J.ismultiply)(s)&&(0,J.isNumericAtom)((0,J.cadr)(s))?(0,J.cadr)(s):J.Constants.one;let u=(0,yn.lessp)(i,n)?r:s;return(0,M0.power)(e,u)}if(i=(0,cE.subtract)(r,s),!(0,J.isNumericAtom)(i))return J.Constants.one;let a=(0,T0.isnegativenumber)(i)?r:s;return(0,M0.power)(e,a)}function xE(e,t){let r,s,n,i;return(0,yn.length)(e)!==(0,yn.length)(t)?J.Constants.one:(r=(0,J.iscons)(e)?e.tail().reduce(ro):(0,J.car)((0,J.cdr)(e)),s=(0,J.iscons)(t)?t.tail().reduce(ro):(0,J.car)((0,J.cdr)(t)),n=(0,ko.divide)(e,r),i=(0,ko.divide)(t,s),(0,yn.equal)(n,i)?(0,ko.multiply)(n,ro(r,s)):J.Constants.one)}function Mm(e){return(0,J.iscons)(e)?e.tail().reduce(ro):(0,J.car)((0,J.cdr)(e))}function pE(e,t){return(0,J.iscons)(e)?e.tail().reduce((r,s)=>(0,ko.multiply)(r,ro(s,t)),J.Constants.one):J.Constants.one}function bE(e,t){return(0,J.iscons)(t)?t.tail().reduce((r,s)=>(0,ko.multiply)(r,ro(e,s)),J.Constants.one):J.Constants.one}var J,hm,yn,cE,fE,jm,Am,T0,Om,ko,M0,_n=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.areunivarpolysfactoredorexpandedform=exports.gcd=exports.Eval_gcd=void 0;J=(T(),o(N)),hm=(U(),o(G)),yn=(Le(),o(Pe)),cE=(_e(),o(pe)),fE=(Y(),o(V)),jm=(F(),o(z)),Am=(mi(),o(ja)),T0=(K(),o(te)),Om=(se(),o(oe)),ko=(Q(),o(W)),M0=(At(),o(Mt));exports.Eval_gcd=dE;exports.gcd=ro;exports.areunivarpolysfactoredorexpandedform=Tm});var iu={};function EE(e){return Sm((0,vE.Eval)((0,au.cadr)(e)))}function Sm(e){return(0,au.noexpand)(Rm,e)}function Rm(e){if(!(0,au.isadd)(e))return e;let t=e.tail().reduce(qE.gcd),r=(0,N0.inverse)(t),s=e.tail().reduce((i,a)=>(0,yE.add)(i,(0,N0.multiply_noexpand)(r,a)),au.Constants.zero),n=(0,gE.yyexpand)(s);return(0,N0.divide)(n,r)}var au,gE,yE,vE,qE,N0,Ta=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.yycondense=exports.Condense=exports.Eval_condense=void 0;au=(T(),o(N)),gE=(Le(),o(Pe)),yE=(_e(),o(pe)),vE=(F(),o(z)),qE=(_n(),o(li)),N0=(Q(),o(W));exports.Eval_condense=EE;exports.Condense=Sm;exports.yycondense=Rm});var lu={};function ME(e){return I0((0,Dm.Eval)((0,ur.cadr)(e)))}function I0(e){let t=ur.defs.expanding,r=TE(e);return ur.defs.expanding=t,r}function TE(e){if((0,ur.istensor)(e))return IE(e);if(ur.defs.expanding=!1,!(0,ur.isadd)(e))return e;let t=NE(e),r=ur.Constants.zero;return(0,ur.iscons)(e)&&(r=e.tail().reduce((s,n)=>(0,hE.add)(s,(0,qi.multiply)(t,n)),r)),(0,qi.divide)((0,jE.Condense)(r),t)}function NE(e){return(0,ur.isadd)(e)?e.tail().reduce((t,r)=>Lm(r,t),ur.Constants.one):Lm(e,ur.Constants.one)}function Lm(e,t){return(0,ur.ismultiply)(e)?e.tail().reduce((r,s)=>Cm(s,r),t):Cm(e,t)}function Cm(e,t){if(!(0,ur.ispower)(e))return t;let r=e;return e=(0,ur.caddr)(e),(0,wm.isnegativenumber)(e)||(0,ur.ismultiply)(e)&&(0,wm.isnegativenumber)((0,ur.cadr)(e))?Pm(t,(0,qi.inverse)(r)):t}function IE(e){return e=(0,Dm.Eval)(e),(0,ur.istensor)(e)&&(e.tensor.elem=e.tensor.elem.map(I0),(0,OE.check_tensor_dimensions)(e)),e}function Pm(e,t){return(0,qi.divide)((0,qi.multiply)(e,t),(0,AE.gcd)(e,t))}var ur,hE,jE,Dm,AE,wm,qi,OE,Na=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.rationalize=exports.Eval_rationalize=void 0;ur=(T(),o(N)),hE=(_e(),o(pe)),jE=(Ta(),o(iu)),Dm=(F(),o(z)),AE=(_n(),o(li)),wm=(K(),o(te)),qi=(Q(),o(W)),OE=(jt(),o(Ot));exports.Eval_rationalize=ME;exports.rationalize=I0});var eo={};function LE(e){return S0((0,RE.Eval)((0,so.cadr)(e)))}function S0(e){return(0,so.isadd)(e)&&(e=(0,wE.rationalize)(e)),(0,so.ismultiply)(e)&&!(0,km.isplusone)((0,so.car)((0,so.cdr)(e)))?(0,$m.multiply_all)(e.tail().map(S0)):(0,so.isrational)(e)?(0,SE.mp_denominator)(e):(0,so.ispower)(e)&&(0,km.isnegativeterm)((0,so.caddr)(e))?(0,$m.reciprocate)(e):so.Constants.one}var so,SE,RE,km,$m,wE,Ns=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.denominator=exports.Eval_denominator=void 0;so=(T(),o(N)),SE=(Y(),o(V)),RE=(F(),o(z)),km=(K(),o(te)),$m=(Q(),o(W)),wE=(Na(),o(lu));exports.Eval_denominator=LE;exports.denominator=S0});var $o={};function $E(e){return R0((0,PE.Eval)((0,oo.cadr)(e)))}function R0(e){return(0,oo.isadd)(e)&&(e=(0,kE.rationalize)(e)),(0,oo.ismultiply)(e)&&!(0,Um.isplusone)((0,oo.car)((0,oo.cdr)(e)))?(0,DE.multiply_all)(e.tail().map(R0)):(0,oo.isrational)(e)?(0,CE.mp_numerator)(e):(0,oo.ispower)(e)&&(0,Um.isnegativeterm)((0,oo.caddr)(e))?oo.Constants.one:e}var oo,CE,PE,Um,DE,kE,no=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.numerator=exports.Eval_numerator=void 0;oo=(T(),o(N)),CE=(Y(),o(V)),PE=(F(),o(z)),Um=(K(),o(te)),DE=(Q(),o(W)),kE=(Na(),o(lu));exports.Eval_numerator=$E;exports.numerator=R0});var Gm={};function YE(e){return w0((0,GE.Eval)((0,Te.cadr)(e)))}function w0(e){if((0,Te.car)(e)===(0,vn.symbol)(Te.TAN))return(0,Te.cadr)(e);if((0,Te.isdouble)(e))return(0,uu.double)(Math.atan(e.d));if((0,Is.isZeroAtomOrTensor)(e))return Te.Constants.zero;if((0,Is.isnegative)(e))return(0,Ia.negate)(w0((0,Ia.negate)(e)));if((0,Bm.Find)(e,(0,vn.symbol)(Te.SIN))&&(0,Bm.Find)(e,(0,vn.symbol)(Te.COS))){let t=(0,zE.numerator)(e),r=(0,BE.denominator)(e);if((0,Te.car)(t)===(0,vn.symbol)(Te.SIN)&&(0,Te.car)(r)===(0,vn.symbol)(Te.COS)&&(0,UE.equal)((0,Te.cadr)(t),(0,Te.cadr)(r)))return(0,Te.cadr)(t)}return(0,Te.ispower)(e)&&(0,Is.equaln)((0,Te.cadr)(e),3)&&(0,Is.equalq)((0,Te.caddr)(e),-1,2)||(0,Te.ismultiply)(e)&&(0,Is.equalq)((0,Te.car)((0,Te.cdr)(e)),1,3)&&(0,Te.car)((0,Te.car)((0,Te.cdr)((0,Te.cdr)(e))))===(0,vn.symbol)(Te.POWER)&&(0,Is.equaln)((0,Te.car)((0,Te.cdr)((0,Te.car)((0,Te.cdr)((0,Te.cdr)(e))))),3)&&(0,Is.equalq)((0,Te.car)((0,Te.cdr)((0,Te.cdr)((0,Te.car)((0,Te.cdr)((0,Te.cdr)(e)))))),1,2)?(0,Ia.multiply)((0,uu.rational)(1,6),Te.Constants.Pi()):(0,Is.equaln)(e,1)?(0,Ia.multiply)((0,uu.rational)(1,4),Te.Constants.Pi()):(0,Te.ispower)(e)&&(0,Is.equaln)((0,Te.cadr)(e),3)&&(0,Is.equalq)((0,Te.caddr)(e),1,2)?(0,Ia.multiply)((0,uu.rational)(1,3),Te.Constants.Pi()):(0,FE.makeList)((0,vn.symbol)(Te.ARCTAN),e)}var Te,Bm,vn,UE,uu,BE,GE,Is,FE,Ia,zE,L0=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.arctan=exports.Eval_arctan=void 0;Te=(T(),o(N)),Bm=(ar(),o(xr)),vn=(U(),o(G)),UE=(Le(),o(Pe)),uu=(Y(),o(V)),BE=(Ns(),o(eo)),GE=(F(),o(z)),Is=(K(),o(te)),FE=(se(),o(oe)),Ia=(Q(),o(W)),zE=(no(),o($o));exports.Eval_arctan=YE;exports.arctan=w0});var cu={};function JE(e){return Ym((0,HE.Eval)((0,zm.cadr)(e)))}function Ym(e){let t=(0,QE.rect)(e),r=(0,XE.conjugate)(t),s=(0,Fm.divide)((0,VE.subtract)(t,r),(0,ZE.integer)(2)),n=(0,Fm.divide)(s,zm.Constants.imaginaryunit);return WE&&(console.log(`IMAGE of ${t}`),console.log(` image: conjugate result: ${r}`),console.log(` image: 1st divide result: ${s}`),console.log(` image: 2nd divide result: ${n}`)),n}var zm,VE,ZE,XE,HE,Fm,QE,WE,Sa=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.imag=exports.Eval_imag=void 0;zm=(T(),o(N)),VE=(_e(),o(pe)),ZE=(Y(),o(V)),XE=(pn(),o(fi)),HE=(F(),o(z)),Fm=(Q(),o(W)),QE=(Ks(),o(Co)),WE=!1;exports.Eval_imag=JE;exports.imag=Ym});var Ra={};function ih(e){return Vm((0,sh.Eval)((0,KE.cadr)(e)))}function Vm(e){let t=(0,nh.rect)(e);return(0,oh.divide)((0,eh.add)(t,(0,rh.conjugate)(t)),(0,th.integer)(2))}var KE,eh,th,rh,sh,oh,nh,Ei=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.real=exports.Eval_real=void 0;KE=(T(),o(N)),eh=(_e(),o(pe)),th=(Y(),o(V)),rh=(pn(),o(fi)),sh=(F(),o(z)),oh=(Q(),o(W)),nh=(Ks(),o(Co));exports.Eval_real=ih;exports.real=Vm});var ya={};function mh(e){return du((0,uh.Eval)((0,He.cadr)(e)))}function du(e){return(0,fu.subtract)(Hm((0,ch.numerator)(e)),Hm((0,lh.denominator)(e)))}function Hm(e){if((0,io.ispositivenumber)(e)||e===(0,qn.symbol)(He.PI))return(0,He.isdouble)(e)||He.defs.evaluatingAsFloats?He.Constants.zeroAsDouble:He.Constants.zero;if((0,io.isnegativenumber)(e)){let t=(0,He.isdouble)(e)||He.defs.evaluatingAsFloats?He.Constants.piAsDouble:(0,qn.symbol)(He.PI);return(0,wa.negate)(t)}if((0,He.issymbol)(e))return(0,Xm.makeList)((0,qn.symbol)(He.ARG),e);if((0,He.ispower)(e)&&(0,io.equaln)((0,He.cadr)(e),-1))return(0,wa.multiply)(He.Constants.Pi(),(0,He.caddr)(e));if((0,He.ispower)(e)&&(0,He.cadr)(e)===(0,qn.symbol)(He.E))return(0,Zm.imag)((0,He.caddr)(e));if((0,He.ispower)(e)&&(0,io.isoneovertwo)((0,He.caddr)(e))){let t=du((0,He.cadr)(e));return _h&&(console.log(`arg of a sqrt: ${e}`),He.breakpoint,console.log(` = 1/2 * ${t}`)),(0,wa.multiply)(t,(0,He.caddr)(e))}if((0,He.ismultiply)(e))return e.tail().map(du).reduce(fu.add,He.Constants.zero);if((0,He.isadd)(e)){e=(0,dh.rect)(e);let t=(0,fh.real)(e),r=(0,Zm.imag)(e);if((0,io.isZeroAtomOrTensor)(t))return(0,io.isnegative)(r)?(0,wa.negate)(He.Constants.Pi()):He.Constants.Pi();{let s=(0,ah.arctan)((0,wa.divide)(r,t));return(0,io.isnegative)(t)?(0,io.isnegative)(r)?(0,fu.subtract)(s,He.Constants.Pi()):(0,fu.add)(s,He.Constants.Pi()):s}}return(0,io.isZeroAtomOrTensor)((0,qn.get_binding)((0,qn.symbol)(He.ASSUME_REAL_VARIABLES)))?(0,Xm.makeList)((0,qn.symbol)(He.ARG),e):He.Constants.zero}var He,qn,fu,ah,lh,uh,Zm,io,Xm,wa,ch,fh,dh,_h,ci=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.arg=exports.Eval_arg=void 0;He=(T(),o(N)),qn=(U(),o(G)),fu=(_e(),o(pe)),ah=(L0(),o(Gm)),lh=(Ns(),o(eo)),uh=(F(),o(z)),Zm=(Sa(),o(cu)),io=(K(),o(te)),Xm=(se(),o(oe)),wa=(Q(),o(W)),ch=(no(),o($o)),fh=(Ei(),o(Ra)),dh=(Ks(),o(Co)),_h=!1;exports.Eval_arg=mh;exports.arg=du});var vh={};function yh(e,t){if(e===0&&t<0&&(0,ph.stop)("divide by zero"),e>=0||t%1===0)return(0,C0.double)(Math.pow(e,t));let r=Math.pow(Math.abs(e),t),s=Math.PI*t,n=0,i=0;return t%.5===0?(n=0,i=Math.sin(s)):(n=Math.cos(s),i=Math.sin(s)),(0,bh.add)((0,C0.double)(n*r),(0,gh.multiply)((0,C0.double)(i*r),xh.Constants.imaginaryunit))}var xh,ph,bh,C0,gh,Qm=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.dpow=void 0;xh=(T(),o(N)),ph=(Ae(),o(Me)),bh=(_e(),o(pe)),C0=(Y(),o(V)),gh=(Q(),o(W));exports.dpow=yh});var hi={};function jh(e){let t=(0,Wm.nativeInt)(e);return t<0||isNaN(t)?(0,Eh.makeList)((0,hh.symbol)(qh.FACTORIAL),e):(0,Wm.bignum_factorial)(t)}var qh,Q$,W$,Wm,Eh,J$,K$,hh,En=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.factorial=void 0;qh=(T(),o(N)),Q$=(Le(),o(Pe)),W$=(_e(),o(pe)),Wm=(Y(),o(V)),Eh=(se(),o(oe)),J$=(Q(),o(W)),K$=(At(),o(Mt)),hh=(U(),o(G));exports.factorial=jh});var P0={};function Ah(e,t){return e.pow(t)}var _u=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.mpow=void 0;exports.mpow=Ah});var Rh={};function Sh(e,t){e=e.abs(),t===0&&(0,Th.stop)("root index is zero");let r=0;for(;e.shiftRight(r).toJSNumber()>0;)r++;if(r===0)return(0,Nh.mint)(0);r=Math.floor((r-1)/t);let s=Math.floor(r/32+1),n=(0,mu.default)(s);for(let i=0;i<s;i++)n=n.and((0,mu.default)(1).shiftLeft(i).not());for(;r>=0;){n=n.or((0,mu.default)(1).shiftLeft(r));let i=(0,Ih.mpow)(n,t);switch((0,Mh.mcmp)(i,e)){case 0:return n;case 1:n=n.and((0,mu.default)(1).shiftLeft(r).not());break}r--}return 0}var Oh,mu,Mh,Th,Nh,Ih,Jm=j(()=>{"use strict";Oh=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});exports.mroot=void 0;mu=Oh(No()),Mh=(Ul(),o(Jc)),Th=(Ae(),o(Me)),Nh=(Y(),o(V)),Ih=(_u(),o(P0));exports.mroot=Sh});var Dh={};function Ph(e,t){let r=(0,Lh.factor_small_number)((0,xu.nativeInt)(e)),s=r.length;for(let n=0;n<s;n+=2)r.push(...sx(r[n],(0,tx.multiply)(r[n+1],t)));return(0,tx.multiply_all)(r.slice(s))}function sx(e,t){let r=(0,xu.bignum_truncate)(t),s=(0,wh.subtract)(t,r),n;(0,Ch.isZeroAtomOrTensor)(s)||(n=(0,ex.makeList)((0,rx.symbol)(Km.POWER),e,s));let i=(0,xu.nativeInt)(r);if(isNaN(i)){let u=(0,ex.makeList)((0,rx.symbol)(Km.POWER),e,r);return n?[n,u]:[u]}if(i===0)return[n];let a=(0,xu.bignum_power_number)(e,i);return n?[n,a]:[a]}var Km,wh,xu,Lh,Ch,ex,tx,rx,ox=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.quickpower=exports.quickfactor=void 0;Km=(T(),o(N)),wh=(_e(),o(pe)),xu=(Y(),o(V)),Lh=(ha(),o(Wl)),Ch=(K(),o(te)),ex=(se(),o(oe)),tx=(Q(),o(W)),rx=(U(),o(G));exports.quickfactor=Ph;exports.quickpower=sx});var Vh={};function Ca(e,t){return Fh(e,t)}function Fh(e,t){if((0,Pr.isplusone)(e)||(0,Pr.isZeroAtomOrTensor)(t))return Er.Constants.one;if((0,Pr.isminusone)(e)&&(0,Pr.isoneovertwo)(t))return Er.Constants.imaginaryunit;if((0,Pr.isZeroAtomOrTensor)(e))return(0,Pr.isnegativenumber)(t)&&(0,Uh.stop)("divide by zero"),Er.Constants.zero;if((0,Pr.isplusone)(t))return e;let r=0,s,n;if((0,Pr.isinteger)(t)){if(r=(0,ao.nativeInt)(t),isNaN(r))return(0,pu.makeList)((0,bu.symbol)(Er.POWER),e,t);if(s=(0,D0.mpow)(e.q.a,Math.abs(r)),n=(0,D0.mpow)(e.q.b,Math.abs(r)),r<0){let u=s;s=n,n=u,s=(0,ao.makeSignSameAs)(s,n),n=(0,ao.makePositive)(n)}return new Er.Num(s,n)}if((0,Pr.isminusone)(e))return zh(t);if((0,Pr.isnegativenumber)(e))return(0,La.multiply)(Ca((0,La.negate)(e),t),Ca(Er.Constants.negOne,t));if(!(0,Pr.isinteger)(e))return(0,La.multiply)(Ca((0,ao.mp_numerator)(e),t),Ca((0,ao.mp_denominator)(e),(0,La.negate)(t)));if(Yh(e))return(0,Gh.quickfactor)(e,t);if(!(0,ao.isSmall)(t.q.a)||!(0,ao.isSmall)(t.q.b))return(0,pu.makeList)((0,bu.symbol)(Er.POWER),e,t);let{a:i,b:a}=t.q;return s=(0,Bh.mroot)(e.q.a,a.toJSNumber()),s===0?(0,pu.makeList)((0,bu.symbol)(Er.POWER),e,t):(n=(0,D0.mpow)(s,i),t.q.a.isNegative()?new Er.Num($h.default.one,n):new Er.Num(n))}function zh(e){if((0,Pr.isinteger)(e))return e.q.a.isOdd()?Er.Constants.negOne:Er.Constants.one;let t=(0,ao.bignum_truncate)(e);(0,Pr.isnegativenumber)(e)&&(t=(0,nx.add)(t,Er.Constants.negOne));let r=(0,nx.subtract)(e,t),s=(0,pu.makeList)((0,bu.symbol)(Er.POWER),Er.Constants.negOne,r);return t.q.a.isOdd()&&(s=(0,La.negate)(s)),s}function Yh(e){return(0,ao.isSmall)(e.q.a)}var kh,$h,Er,Uh,nx,ao,Pr,pu,D0,Bh,La,Gh,bu,ix=j(()=>{"use strict";kh=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});exports.qpow=void 0;$h=kh(No()),Er=(T(),o(N)),Uh=(Ae(),o(Me)),nx=(_e(),o(pe)),ao=(Y(),o(V)),Pr=(K(),o(te)),pu=(se(),o(oe)),D0=(_u(),o(P0)),Bh=(Jm(),o(Rh)),La=(Q(),o(W)),Gh=(ox(),o(Dh)),bu=(U(),o(G));exports.qpow=Ca});var Mt={};function ej(e){ot&&B.breakpoint;let t=(0,lx.Eval)((0,B.cadr)(e)),r=(0,lx.Eval)((0,B.caddr)(e));return Tr(t,r)}function Tr(e,t){return tj(e,t)}function tj(e,t){ot&&B.breakpoint;let r=t,s=e;if(ot&&console.log(`POWER: ${e} ^ ${t}`),(0,Pa.equal)(e,B.Constants.one)||(0,Tt.isZeroAtomOrTensor)(t)){let d=B.Constants.One();return ot&&console.log(`   power of ${s} ^ ${r}: ${d}`),d}if((0,Pa.equal)(t,B.Constants.one))return ot&&console.log(`   power of ${s} ^ ${r}: ${e}`),e;if((0,Tt.isminusone)(e)&&(0,Tt.isminusone)(t)){let d=(0,Jt.negate)(B.Constants.One());return ot&&console.log(`   power of ${s} ^ ${r}: ${d}`),d}if((0,Tt.isminusone)(e)&&(0,Tt.isoneovertwo)(t)){let d=B.Constants.imaginaryunit;return ot&&console.log(`   power of ${s} ^ ${r}: ${d}`),d}if((0,Tt.isminusone)(e)&&(0,Tt.isminusoneovertwo)(t)){let d=(0,Jt.negate)(B.Constants.imaginaryunit);return ot&&console.log(`   power of ${s} ^ ${r}: ${d}`),d}let n;if((0,Tt.isminusone)(e)&&!(0,B.isdouble)(e)&&(0,B.isrational)(t)&&!(0,Tt.isinteger)(t)&&(0,Tt.ispositivenumber)(t)&&!B.defs.evaluatingAsFloats){ot&&(console.log("   power: -1 ^ rational"),console.log(` trick: exponent.q.a , exponent.q.b ${t.q.a} , ${t.q.b}`)),t.q.a<t.q.b?n=(0,ji.makeList)((0,Xt.symbol)(B.POWER),e,t):(n=(0,ji.makeList)((0,Xt.symbol)(B.MULTIPLY),e,(0,ji.makeList)((0,Xt.symbol)(B.POWER),e,(0,Mr.rational)(t.q.a.mod(t.q.b),t.q.b))),ot&&console.log(` trick applied : ${n}`));let d=(0,ux.rect)(n);return ot&&console.log(`   power of ${s} ^ ${r}: ${d}`),d}if((0,B.isrational)(e)&&(0,B.isrational)(t)){ot&&console.log("   power: isrational(base) && isrational(exponent)");let d=(0,Wh.qpow)(e,t);return ot&&console.log(`   power of ${s} ^ ${r}: ${d}`),d}if((0,B.isNumericAtom)(e)&&(0,B.isNumericAtom)(t)){let d=(0,Qh.dpow)((0,Mr.nativeDouble)(e),(0,Mr.nativeDouble)(t));return ot&&(console.log("   power: both base and exponent are either rational or double "),console.log("POWER - isNumericAtom(base) && isNumericAtom(exponent)"),console.log(`   power of ${s} ^ ${r}: ${d}`)),d}if((0,B.istensor)(e)){let d=(0,Kh.power_tensor)(e,t);return ot&&(console.log("   power: istensor(base) "),console.log(`   power of ${s} ^ ${r}: ${d}`)),d}if((0,B.car)(e)===(0,Xt.symbol)(B.ABS)&&(0,Tt.iseveninteger)(t)&&!(0,Tt.isZeroAtomOrTensor)((0,Xt.get_binding)((0,Xt.symbol)(B.ASSUME_REAL_VARIABLES)))){let d=Tr((0,B.cadr)(e),t);return ot&&(console.log("   power: even power of absolute of real value "),console.log(`   power of ${s} ^ ${r}: ${d}`)),d}if(e===(0,Xt.symbol)(B.E)&&(0,B.car)(t)===(0,Xt.symbol)(B.LOG)){let d=(0,B.cadr)(t);return ot&&console.log(`   power of ${s} ^ ${r}: ${d}`),d}if(e===(0,Xt.symbol)(B.E)&&(0,B.isdouble)(t)){let d=(0,Mr.double)(Math.exp(t.d));return ot&&(console.log("   power: base == symbol(E) && isdouble(exponent) "),console.log(`   power of ${s} ^ ${r}: ${d}`)),d}if(e===(0,Xt.symbol)(B.E)&&(0,gu.Find)(t,B.Constants.imaginaryunit)&&(0,gu.Find)(t,(0,Xt.symbol)(B.PI))&&!B.defs.evaluatingPolar){let d=(0,ji.makeList)((0,Xt.symbol)(B.POWER),e,t);ot&&console.log(`   power: turning complex exponential to rect: ${d}`);let m=(0,ux.rect)(d);if(!(0,gu.Find)(m,(0,Xt.symbol)(B.PI)))return ot&&console.log(`   power: turned complex exponential to rect: ${m}`),m}if((0,B.ismultiply)(e)&&(0,Tt.isinteger)(t)){e=(0,B.cdr)(e);let d=Tr((0,B.car)(e),t);return(0,B.iscons)(e)&&(d=e.tail().reduce((m,R)=>(0,Jt.multiply)(m,Tr(R,t)),d)),ot&&(console.log("   power: (a * b) ^ c  ->  (a ^ c) * (b ^ c) "),console.log(`   power of ${s} ^ ${r}: ${d}`)),d}let i=!1;if((0,B.isNumericAtom)((0,B.cadr)(e))&&(i=(0,Pa.sign)((0,Mr.compare_numbers)((0,B.cadr)(e),B.Constants.zero))>0),(0,B.ispower)(e)&&((0,Tt.isinteger)(t)||i)){let d=Tr((0,B.cadr)(e),(0,Jt.multiply)((0,B.caddr)(e),t));return ot&&console.log(`   power of ${s} ^ ${r}: ${d}`),d}let a=!1;if((0,Tt.iseveninteger)((0,B.caddr)(e))){let d=(0,Jt.multiply)((0,B.caddr)(e),t);(0,Tt.isone)(d)&&(a=!0)}if((0,B.ispower)(e)&&a){let d=(0,ax.abs)((0,B.cadr)(e));return ot&&(console.log("   power: car(base) == symbol(POWER) && b_isEven_and_c_isItsInverse "),console.log(`   power of ${s} ^ ${r}: ${d}`)),d}if(B.defs.expanding&&(0,B.isadd)(e)&&(0,B.isNumericAtom)(t)){let d=(0,Mr.nativeInt)(t);if(d>1&&!isNaN(d)){ot&&console.log("   power: expanding && isadd(base) && isNumericAtom(exponent) ");let m=rj(d,e);return ot&&console.log(`   power of ${s} ^ ${r}: ${m}`),m}}if(B.defs.trigmode===1&&(0,B.car)(e)===(0,Xt.symbol)(B.SIN)&&(0,Tt.iseveninteger)(t)){let d=Tr((0,yu.subtract)(B.Constants.one,Tr((0,Hh.cosine)((0,B.cadr)(e)),(0,Mr.integer)(2))),(0,Jt.multiply)(t,(0,Mr.rational)(1,2)));return ot&&(console.log("   power: trigmode == 1 && car(base) == symbol(SIN) && iseveninteger(exponent) "),console.log(`   power of ${s} ^ ${r}: ${d}`)),d}if(B.defs.trigmode===2&&(0,B.car)(e)===(0,Xt.symbol)(B.COS)&&(0,Tt.iseveninteger)(t)){let d=Tr((0,yu.subtract)(B.Constants.one,Tr((0,Jh.sine)((0,B.cadr)(e)),(0,Mr.integer)(2))),(0,Jt.multiply)(t,(0,Mr.rational)(1,2)));return ot&&(console.log("   power: trigmode == 2 && car(base) == symbol(COS) && iseveninteger(exponent) "),console.log(`   power of ${s} ^ ${r}: ${d}`)),d}if((0,Tt.iscomplexnumber)(e)){if(ot&&console.log(" power - handling the case (a + ib) ^ n"),(0,Tt.isinteger)(t)){let d=(0,Xh.conjugate)(e),m=(0,Jt.divide)(d,(0,Jt.multiply)(d,e));return(0,Tt.isone)(t)||(m=Tr(m,(0,Jt.negate)(t))),ot&&console.log(`   power of ${s} ^ ${r}: ${m}`),m}if((0,B.isNumericAtom)(t)){let d=B.defs.evaluatingAsFloats||(0,Tt.iscomplexnumberdouble)(e)&&(0,B.isdouble)(t)?(0,Mr.double)(Math.PI):(0,Xt.symbol)(B.PI),m=(0,Jt.multiply)(Tr((0,ax.abs)(e),t),Tr(B.Constants.negOne,(0,Jt.divide)((0,Jt.multiply)((0,Zh.arg)(e),t),d)));return B.avoidCalculatingPowersIntoArctans&&(0,gu.Find)(m,(0,Xt.symbol)(B.ARCTAN))&&(m=(0,ji.makeList)((0,Xt.symbol)(B.POWER),e,t)),ot&&console.log(`   power of ${s} ^ ${r}: ${m}`),m}}let u=sj(t);if(u!==void 0)return ot&&console.log("   power: using simplify_polar"),u;let c=(0,ji.makeList)((0,Xt.symbol)(B.POWER),e,t);return ot&&(console.log("   power: nothing can be done "),console.log(`   power of ${s} ^ ${r}: ${c}`)),c}function rj(e,t){let r=[],s=(0,Pa.length)(t)-1,n=[];t=(0,B.cdr)(t);for(let i=0;i<s;i++){for(let a=0;a<=e;a++)n[i*(e+1)+a]=Tr((0,B.car)(t),(0,Mr.integer)(a));t=(0,B.cdr)(t)}t=(0,cx.factorial)((0,Mr.integer)(e));for(let i=0;i<s;i++)r[i]=0;return fx(s,e,r,0,e,n,t,B.Constants.zero)}function fx(e,t,r,s,n,i,a,u){if(s<e-1){for(let d=0;d<=n;d++)r[s]=d,u=fx(e,t,r,s+1,n-d,i,a,u);return u}r[s]=n;let c=a;for(let d=0;d<e;d++)c=(0,Jt.divide)(c,(0,cx.factorial)((0,Mr.integer)(r[d])));for(let d=0;d<e;d++)c=(0,Jt.multiply)(c,i[d*(t+1)+r[d]]);return(0,yu.add)(u,c)}function sj(e){let t=(0,Tt.isquarterturn)(e);switch(t){case 0:break;case 1:return B.Constants.one;case 2:return B.Constants.negOne;case 3:return B.Constants.imaginaryunit;case 4:return(0,Jt.negate)(B.Constants.imaginaryunit)}if((0,B.isadd)(e)){let r=(0,B.cdr)(e);for(;(0,B.iscons)(r)&&(t=(0,Tt.isquarterturn)((0,B.car)(r)),!t);)r=(0,B.cdr)(r);let s;switch(t){case 0:return;case 1:s=B.Constants.one;break;case 2:s=B.Constants.negOne;break;case 3:s=B.Constants.imaginaryunit;break;case 4:s=(0,Jt.negate)(B.Constants.imaginaryunit);break}return(0,Jt.multiply)(s,(0,Pa.exponential)((0,yu.subtract)(e,(0,B.car)(r))))}}var B,gu,Xt,Pa,ax,yu,Zh,Mr,Xh,Hh,Qh,lx,cx,Tt,ji,Jt,Wh,ux,Jh,Kh,ot,At=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.power=exports.Eval_power=void 0;B=(T(),o(N)),gu=(ar(),o(xr)),Xt=(U(),o(G)),Pa=(Le(),o(Pe)),ax=(is(),o(js)),yu=(_e(),o(pe)),Zh=(ci(),o(ya)),Mr=(Y(),o(V)),Xh=(pn(),o(fi)),Hh=(Lo(),o(bn)),Qh=(Qm(),o(vh)),lx=(F(),o(z)),cx=(En(),o(hi)),Tt=(K(),o(te)),ji=(se(),o(oe)),Jt=(Q(),o(W)),Wh=(ix(),o(Vh)),ux=(Ks(),o(Co)),Jh=(Qs(),o(wo)),Kh=(jt(),o(Ot)),ot=!1;exports.Eval_power=ej;exports.power=Tr});var W={};function ij(e){let t=(0,dx.Eval)((0,D.cadr)(e));return e=(0,D.cddr)(e),(0,D.iscons)(e)&&(t=[...e].reduce((r,s)=>Bo(r,(0,dx.Eval)(s)),t)),t}function Bo(e,t){return D.defs.esc_flag&&(0,mx.stop)("escape key stop"),(0,D.isNumericAtom)(e)&&(0,D.isNumericAtom)(t)?(0,lo.multiply_numbers)(e,t):aj(e,t)}function aj(e,t){if((0,cr.isZeroAtom)(e)||(0,cr.isZeroAtom)(t))return D.Constants.Zero();if(D.defs.expanding&&(0,D.isadd)(e))return e.tail().reduce((c,d)=>(0,ka.add)(c,Bo(d,t)),D.Constants.Zero());if(D.defs.expanding&&(0,D.isadd)(t))return t.tail().reduce((c,d)=>(0,ka.add)(c,Bo(e,d)),D.Constants.Zero());if(!(0,D.istensor)(e)&&(0,D.istensor)(t))return(0,_x.scalar_times_tensor)(e,t);if((0,D.istensor)(e)&&!(0,D.istensor)(t))return(0,_x.tensor_times_scalar)(e,t);e=(0,D.ismultiply)(e)?(0,D.cdr)(e):(0,Ai.makeList)(e),t=(0,D.ismultiply)(t)?(0,D.cdr)(t):(0,Ai.makeList)(t);let r=[];if((0,D.isNumericAtom)((0,D.car)(e))&&(0,D.isNumericAtom)((0,D.car)(t))){let c=(0,D.car)(e),d=(0,D.car)(t);r.push((0,lo.multiply_numbers)(c,d)),e=(0,D.cdr)(e),t=(0,D.cdr)(t)}else(0,D.isNumericAtom)((0,D.car)(e))?(r.push((0,D.car)(e)),e=(0,D.cdr)(e)):(0,D.isNumericAtom)((0,D.car)(t))?(r.push((0,D.car)(t)),t=(0,D.cdr)(t)):r.push(D.Constants.One());let[s,n]=vu(e),[i,a]=qu(t);for(;(0,D.iscons)(e)&&(0,D.iscons)(t);){if((0,D.caar)(e)===(0,Uo.symbol)(D.OPERATOR)&&(0,D.caar)(t)===(0,Uo.symbol)(D.OPERATOR)){r.push(new D.Cons((0,Uo.symbol)(D.OPERATOR),(0,oj.append)((0,D.cdar)(e),(0,D.cdar)(t)))),e=(0,D.cdr)(e),t=(0,D.cdr)(t),[s,n]=vu(e),[i,a]=qu(t);continue}switch((0,nj.cmp_expr)(s,i)){case-1:r.push((0,D.car)(e)),e=(0,D.cdr)(e),[s,n]=vu(e);break;case 1:r.push((0,D.car)(t)),t=(0,D.cdr)(t),[i,a]=qu(t);break;case 0:lj(r,i,n,a),e=(0,D.cdr)(e),t=(0,D.cdr)(t),[s,n]=vu(e),[i,a]=qu(t);break;default:(0,mx.stop)("internal error 2")}}if((0,D.iscons)(e)&&r.push(...e),(0,D.iscons)(t)&&r.push(...t),_j(r),D.defs.expanding){for(let c=0;c<r.length;c++)if((0,D.isadd)(r[c]))return $0(r)}let u=r.length;return u===1?r.pop():(0,D.isrational)(r[0])&&(0,cr.equaln)(r[0],1)?u===2?r.pop():(r[0]=(0,Uo.symbol)(D.MULTIPLY),(0,Ai.makeList)(...r)):new D.Cons((0,Uo.symbol)(D.MULTIPLY),(0,Ai.makeList)(...r))}function vu(e){let t=(0,D.car)(e),r=D.Constants.One();return(0,D.ispower)(t)&&(r=(0,D.caddr)(t),t=(0,D.cadr)(t)),[t,r]}function qu(e){let t=(0,D.car)(e),r=D.Constants.One();return(0,D.ispower)(t)&&(r=(0,D.caddr)(t),t=(0,D.cadr)(t)),[t,r]}function lj(e,t,r,s){let n=(0,xx.power)(t,(0,ka.add)(r,s));if((0,D.isNumericAtom)(n))e[0]=(0,lo.multiply_numbers)(e[0],n);else if((0,D.ismultiply)(n))if((0,D.isNumericAtom)((0,D.cadr)(n))&&(0,D.cdddr)(n)===(0,Uo.symbol)(D.NIL)){let i=e[0],a=(0,D.cadr)(n);e[0]=(0,lo.multiply_numbers)(i,a),e.push((0,D.caddr)(n))}else e.push(n);else e.push(n)}function uj(e,t){return(0,D.noexpand)(Bo,e,t)}function $0(e){if(e.length===1)return e[0];if(e.length===0)return D.Constants.One();let t=e[0];for(let r=1;r<e.length;r++)t=Bo(t,e[r]);return t}function cj(e){return(0,D.noexpand)($0,e)}function Da(e,t){return(0,D.isNumericAtom)(e)&&(0,D.isNumericAtom)(t)?(0,lo.divide_numbers)(e,t):Bo(e,U0(t))}function U0(e){return(0,D.isNumericAtom)(e)?(0,lo.invert_number)(e):(0,xx.power)(e,D.Constants.negOne)}function fj(e){return U0(e)}function px(e){return(0,D.isNumericAtom)(e)?(0,lo.negate_number)(e):Bo(e,D.Constants.NegOne())}function dj(e){return(0,D.noexpand)(px,e)}function _j(e){let t=0;if((0,cr.isplusone)(e[0])||(0,cr.isminusone)(e[0])||(0,D.isdouble)(e[0]))return;for(t=1;t<e.length&&!k0(e[t]);t++);if(t===e.length)return;let r=(0,lo.mp_numerator)(e[0]);for(let n=1;n<e.length&&!((0,cr.isplusone)(r)||(0,cr.isminusone)(r));n++){if(!k0(e[n]))continue;let i=(0,D.cadr)(e[n]),a=(0,D.caddr)(e[n]);if(!(0,cr.isnegativenumber)(a))continue;let u=Da(r,i);!(0,cr.isinteger)(u)||(r=u,e[n]=(0,Ai.makeList)((0,Uo.symbol)(D.POWER),i,(0,ka.add)(D.Constants.One(),a)))}let s=(0,lo.mp_denominator)(e[0]);for(let n=1;n<e.length&&!(0,cr.isplusone)(s);n++){if(!k0(e[n]))continue;let i=(0,D.cadr)(e[n]),a=(0,D.caddr)(e[n]);if((0,cr.isnegativenumber)(a))continue;let u=Da(s,i);if(!(0,cr.isinteger)(u))continue;s=u;let c=(0,ka.subtract)(a,D.Constants.one);if(D.dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication&&(0,cr.isinteger)(i)&&!(0,cr.isinteger)(c)&&(0,cr.isnegativenumber)(c)){r=Da(r,i);break}e[n]=(0,Ai.makeList)((0,Uo.symbol)(D.POWER),i,c)}e[0]=Da(r,s)}function k0(e){return(0,D.ispower)(e)&&(0,D.isNumericAtom)((0,D.cadr)(e))&&(0,cr.isfraction)((0,D.caddr)(e))&&!(0,cr.isminusone)((0,D.cadr)(e))}var D,oj,mx,Uo,nj,ka,lo,dx,cr,Ai,xx,_x,Q=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.negate_noexpand=exports.negate=exports.reciprocate=exports.inverse=exports.divide=exports.multiply_all_noexpand=exports.multiply_all=exports.multiply_noexpand=exports.multiply=exports.Eval_multiply=void 0;D=(T(),o(N)),oj=(uo(),o(Go)),mx=(Ae(),o(Me)),Uo=(U(),o(G)),nj=(Le(),o(Pe)),ka=(_e(),o(pe)),lo=(Y(),o(V)),dx=(F(),o(z)),cr=(K(),o(te)),Ai=(se(),o(oe)),xx=(At(),o(Mt)),_x=(jt(),o(Ot));exports.Eval_multiply=ij;exports.multiply=Bo;exports.multiply_noexpand=uj;exports.multiply_all=$0;exports.multiply_all_noexpand=cj;exports.divide=Da;exports.inverse=U0;exports.reciprocate=fj;exports.negate=px;exports.negate_noexpand=dj});var B0={};function gj(e){if(!(0,pj.is_square_matrix)(e))return(0,xj.makeList)((0,bj.symbol)(Fo.DET),e);let t=e.tensor.elem;return t.every(s=>(0,Fo.isNumericAtom)(s))?yj(e):yx(t,e.tensor.dim[0])}function yx(e,t){let r=0,s=[];for(let a=0;a<t;a++)s[a]=a,s[a+t]=0,s[a+t+t]=1;let n=1,i=Fo.Constants.zero;for(;;){let a=(0,mj.integer)(n);for(let R=0;R<t;R++){let M=t*s[R]+R;a=(0,hn.multiply)(a,e[M])}i=(0,gx.add)(i,a);let u=t-1,c=0,d=!1;for(;;){if(r=s[t+u]+s[t+t+u],r<0){s[t+t+u]=-s[t+t+u],u--;continue}if(r===u+1){if(u===0){d=!0;break}c++,s[t+t+u]=-s[t+t+u],u--;continue}break}if(d)break;let m=s[u-s[t+u]+c];s[u-s[t+u]+c]=s[u-r+c],s[u-r+c]=m,s[t+u]=r,n=n===1?-1:1}return i}function yj(e){let t=e.tensor.dim[0],r=[...e.tensor.elem];return vj(r,t)}function Ss(e,t,r,s){return e[t*r+s]}function Eu(e,t,r,s,n){e[t*r+s]=n}function vj(e,t){let r=Fo.Constants.one;for(let s=0;s<t-1;s++){if((0,bx.equal)(Ss(e,t,s,s),Fo.Constants.zero)){let n=0;for(n=s+1;n<t&&(0,bx.equal)(Ss(e,t,n,s),Fo.Constants.zero);n++);if(n===t){r=Fo.Constants.zero;break}for(let i=s;i<t;i++){let a=Ss(e,t,s,i);Eu(e,t,s,i,Ss(e,t,n,i)),Eu(e,t,n,i,a)}r=(0,hn.negate)(r)}r=(0,hn.multiply)(r,Ss(e,t,s,s));for(let n=s+1;n<t;n++){let i=(0,hn.negate)((0,hn.divide)(Ss(e,t,n,s),Ss(e,t,s,s)));Eu(e,t,n,s,Fo.Constants.zero);for(let a=s+1;a<t;a++){let u=(0,gx.add)((0,hn.multiply)(Ss(e,t,s,a),i),Ss(e,t,n,a));Eu(e,t,n,a,u)}}}return(0,hn.multiply)(r,Ss(e,t,t-1,t-1))}var Fo,bx,gx,mj,xj,hn,pj,bj,hu=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.determinant=exports.det=void 0;Fo=(T(),o(N)),bx=(Le(),o(Pe)),gx=(_e(),o(pe)),mj=(Y(),o(V)),xj=(se(),o(oe)),hn=(Q(),o(W)),pj=(jt(),o(Ot)),bj=(U(),o(G));exports.det=gj;exports.determinant=yx});var qx={};function Aj(e,t){return Oj(e,t)}function Oj(e,t){let r=(0,z0.nativeInt)(t);return r<0||isNaN(r)?(0,hj.makeList)((0,G0.symbol)(Oi.HERMITE),e,t):(0,Oi.issymbol)(e)?vx(r,e):(0,Ej.Eval)((0,jj.subst)(vx(r,(0,G0.symbol)(Oi.SECRETX)),(0,G0.symbol)(Oi.SECRETX),e))}function vx(e,t){let r=Oi.Constants.zero,s=Oi.Constants.one;for(let n=0;n<e;n++){let i=r;r=s,s=(0,F0.multiply)((0,qj.subtract)((0,F0.multiply)(t,r),(0,F0.multiply)((0,z0.integer)(n),i)),(0,z0.integer)(2))}return s}var Oi,G0,qj,z0,Ej,hj,F0,jj,Y0=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.hermite=void 0;Oi=(T(),o(N)),G0=(U(),o(G)),qj=(_e(),o(pe)),z0=(Y(),o(V)),Ej=(F(),o(z)),hj=(se(),o(oe)),F0=(Q(),o(W)),jj=(Xr(),o(ns));exports.hermite=Aj});var wj={};function Rj(e){let t=(0,Ex.nativeInt)(e);if(t<2)return(0,Nj.makeList)((0,Sj.symbol)(Mj.HILBERT),e);let r=(0,Tj.zero_matrix)(t,t);for(let s=0;s<t;s++)for(let n=0;n<t;n++)r.tensor.elem[s*t+n]=(0,Ij.inverse)((0,Ex.integer)(s+n+1));return r}var Mj,Tj,Ex,Nj,Ij,Sj,hx=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.hilbert=void 0;Mj=(T(),o(N)),Tj=(Le(),o(Pe)),Ex=(Y(),o(V)),Nj=(se(),o(oe)),Ij=(Q(),o(W)),Sj=(U(),o(G));exports.hilbert=Rj});var Ax={};function Dj(e){let t=(0,X0.Eval)((0,V0.cadr)(e));(0,Pj.is_square_matrix)(t)||(0,Z0.stop)("cofactor: 1st arg: square matrix expected");let r=t.tensor.dim[0],s=(0,X0.evaluate_integer)((0,V0.caddr)(e));(s<1||s>r)&&(0,Z0.stop)("cofactor: 2nd arg: row index expected");let n=(0,X0.evaluate_integer)((0,V0.cadddr)(e));return(n<1||n>r)&&(0,Z0.stop)("cofactor: 3rd arg: column index expected"),jx(t,r,s-1,n-1)}function jx(e,t,r,s){let n=[];for(let a=0;a<t;a++)for(let u=0;u<t;u++)a!==r&&u!==s&&n.push(e.tensor.elem[t*a+u]);let i=(0,Lj.determinant)(n,t-1);return(r+s)%2&&(i=(0,Cj.negate)(i)),i}var V0,Z0,Lj,X0,Cj,Pj,H0=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.cofactor=exports.Eval_cofactor=void 0;V0=(T(),o(N)),Z0=(Ae(),o(Me)),Lj=(hu(),o(B0)),X0=(F(),o(z)),Cj=(Q(),o(W)),Pj=(jt(),o(Ot));exports.Eval_cofactor=Dj;exports.cofactor=jx});var Mx={};function zj(e){return Ox((0,Gj.Eval)((0,$j.cadr)(e)))}function Ox(e){(0,Fj.is_square_matrix)(e)||(0,Uj.stop)("adj: square matrix expected");let t=e.tensor.dim[0],r=(0,kj.alloc_tensor)(t*t);r.tensor.ndim=2,r.tensor.dim[0]=t,r.tensor.dim[1]=t;for(let s=0;s<t;s++)for(let n=0;n<t;n++)r.tensor.elem[t*n+s]=(0,Bj.cofactor)(e,t,s,n);return r}var kj,$j,Uj,Bj,Gj,Fj,Q0=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.adj=exports.Eval_adj=void 0;kj=(Ct(),o(Dt)),$j=(T(),o(N)),Uj=(Ae(),o(Me)),Bj=(H0(),o(Ax)),Gj=(F(),o(z)),Fj=(jt(),o(Ot));exports.Eval_adj=zj;exports.adj=Ox});var jn={};function Sx(e){let t=[];t.push((0,me.car)((0,me.cdr)(e))),(0,me.car)((0,me.cdr)((0,me.cdr)(e)))===(0,Qr.symbol)(me.NIL)&&(0,J0.stop)("pattern needs at least a template and a transformed version");let s=(0,me.cdr)((0,me.cdr)(e));for(;s!==(0,Qr.symbol)(me.NIL);)t.push((0,me.car)(s)),s=(0,me.cdr)(s);if(t.length>2){let a=(0,K0.makeList)((0,Qr.symbol)(me.INNER),t[t.length-2],t[t.length-1]);for(let u=2;u<t.length;u++)a=(0,K0.makeList)((0,Qr.symbol)(me.INNER),t[t.length-u-1],a);return Sx(a)}let n=[];Au(e,n);let i=[];for(let a=0;a<n.length;a++)n[a]!==(0,Qr.symbol)(me.SYMBOL_IDENTITY_MATRIX)&&i.push(n[a]);if(n=i,i=[],n.length>1){let a=0;for(let u=0;u<n.length&&u+a+1<=n.length-1;u++){if((0,me.isNumericAtomOrTensor)(n[u+a])||(0,me.isNumericAtomOrTensor)(n[u+a+1]))i.push(n[u+a]);else{let c=(0,Ix.inv)((0,W0.Eval)(n[u+a])),d=(0,W0.Eval)(n[u+a+1]),m=(0,$a.subtract)(c,d);(0,Ua.isZeroAtomOrTensor)(m)?a+=1:i.push(n[u+a])}if(u+a===n.length-2&&i.push(n[n.length-1]),u+a>=n.length-1)break}n=i}return n.length==0?(0,Qr.symbol)(me.SYMBOL_IDENTITY_MATRIX):(n=n.map(W0.Eval),n.reduce(Ba))}function Ba(e,t){if((0,Ua.isnegativeterm)(t)&&(0,Ua.isnegativeterm)(e)&&(t=(0,ju.negate)(t),e=(0,ju.negate)(e)),(0,me.isinnerordot)(e)&&(t=Ba((0,me.car)((0,me.cdr)((0,me.cdr)(e))),t),e=(0,me.car)((0,me.cdr)(e))),e===(0,Qr.symbol)(me.SYMBOL_IDENTITY_MATRIX))return t;if(t===(0,Qr.symbol)(me.SYMBOL_IDENTITY_MATRIX))return e;if((0,me.istensor)(e)&&(0,me.istensor)(t))return Vj(e,t);if(!((0,me.isNumericAtomOrTensor)(e)||(0,me.isNumericAtomOrTensor)(t))){let r=(0,$a.subtract)(e,(0,Ix.inv)(t));if((0,Ua.isZeroAtomOrTensor)(r))return(0,Qr.symbol)(me.SYMBOL_IDENTITY_MATRIX)}return me.defs.expanding&&(0,me.isadd)(e)?e.tail().reduce((r,s)=>(0,$a.add)(r,Ba(s,t)),me.Constants.zero):me.defs.expanding&&(0,me.isadd)(t)?t.tail().reduce((r,s)=>(0,$a.add)(r,Ba(e,s)),me.Constants.zero):(0,me.istensor)(e)&&(0,me.isNumericAtom)(t)?(0,Tx.tensor_times_scalar)(e,t):(0,me.isNumericAtom)(e)&&(0,me.istensor)(t)?(0,Tx.scalar_times_tensor)(e,t):(0,me.isNumericAtom)(e)||(0,me.isNumericAtom)(t)?(0,ju.multiply)(e,t):(0,K0.makeList)((0,Qr.symbol)(me.INNER),e,t)}function Vj(e,t){let r=e.tensor.dim[e.tensor.ndim-1];r!==t.tensor.dim[0]&&(me.breakpoint,(0,J0.stop)("inner: tensor dimension check"));let s=e.tensor.ndim+t.tensor.ndim-2;s>me.MAXDIM&&(0,J0.stop)("inner: rank of result exceeds maximum");let n=e.tensor.elem,i=t.tensor.elem,a=e.tensor.dim.slice(0,e.tensor.dim.length-1).reduce((m,R)=>m*R,1),u=t.tensor.dim.slice(1).reduce((m,R)=>m*R,1),c=(0,Yj.alloc_tensor)(a*u),d=c.tensor.elem;for(let m=0;m<a;m++)for(let R=0;R<r;R++)if(!(0,Ua.isZeroAtomOrTensor)(n[m*r+R]))for(let M=0;M<u;M++)d[m*u+M]=(0,$a.add)((0,ju.multiply)(n[m*r+R],i[R*u+M]),d[m*u+M]);return s===0?c.tensor.elem[0]:(c.tensor.ndim=s,c.tensor.dim=[...e.tensor.dim.slice(0,e.tensor.ndim-1),...t.tensor.dim.slice(1,t.tensor.ndim)],c)}function Au(e,t){if(!(0,me.iscons)(e)){Nx(e,t);return}if((0,me.cdr)(e)===(0,Qr.symbol)(me.NIL)){Au((0,me.car)(e),t);return}if((0,me.isinnerordot)(e)){Au((0,me.car)((0,me.cdr)(e)),t),Au((0,me.cdr)((0,me.cdr)(e)),t);return}Nx(e,t)}function Nx(e,t){e!==(0,Qr.symbol)(me.NIL)&&t.push(e)}var Yj,me,J0,Qr,$a,W0,Ix,Ua,K0,ju,Tx,zo=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.inner=exports.Eval_inner=void 0;Yj=(Ct(),o(Dt)),me=(T(),o(N)),J0=(Ae(),o(Me)),Qr=(U(),o(G)),$a=(_e(),o(pe)),W0=(F(),o(z)),Ix=(Ga(),o(Ou)),Ua=(K(),o(te)),K0=(se(),o(oe)),ju=(Q(),o(W)),Tx=(jt(),o(Ot));exports.Eval_inner=Sx;exports.inner=Ba});var Ou={};function kx(e){if((0,Nr.isinv)(e))return(0,Nr.car)((0,Nr.cdr)(e));if((0,Nr.isidentitymatrix)(e))return e;if(Nr.defs.expanding&&(0,Nr.isinnerordot)(e)){let s=((0,Nr.iscons)(e)?e.tail():[]).map(kx);for(let n=s.length-1;n>0;n--)s[n-1]=(0,Qj.inner)(s[n],s[n-1]);return s[0]}if(!(0,Px.is_square_matrix)(e))return(0,Cx.makeList)((0,Dx.symbol)(Nr.INV),e);if((0,Nr.isNumericAtomOrTensor)(e))return $x(e);let t=(0,Hj.det)(e);return(0,Wj.isZeroAtomOrTensor)(t)&&(0,Lx.stop)("inverse of singular matrix"),(0,Fa.divide)((0,Xj.adj)(e),t)}function Jj(e){return(0,Px.is_square_matrix)(e)?$x(e):(0,Cx.makeList)((0,Dx.symbol)(Nr.INVG),e)}function $x(e){let t=e.tensor.dim[0],r=new Array(t*t);r.fill(Nr.Constants.zero);for(let i=0;i<t;i++)r[i*t+i]=Nr.Constants.one;let s=Kj(r,e.tensor.elem,t),n=(0,Zj.alloc_tensor)(t*t);return n.tensor.ndim=2,n.tensor.dim[0]=t,n.tensor.dim[1]=t,n.tensor.elem=s,n}function Kj(e,t,r){for(let s=0;s<r;s++){if((0,Rx.equal)(t[r*s+s],Nr.Constants.zero)){let i=0;for(i=s+1;i<r&&(0,Rx.equal)(t[r*i+s],Nr.Constants.zero);i++);i===r&&(0,Lx.stop)("inverse of singular matrix");for(let a=0;a<r;a++){let u=t[r*s+a];t[r*s+a]=t[r*i+a],t[r*i+a]=u,u=e[r*s+a],e[r*s+a]=e[r*i+a],e[r*i+a]=u}}let n=t[r*s+s];for(let i=0;i<r;i++)i>s&&(t[r*s+i]=(0,Fa.divide)(t[r*s+i],n)),e[r*s+i]=(0,Fa.divide)(e[r*s+i],n);for(let i=0;i<r;i++){if(i===s)continue;let a=t[r*i+s];for(let u=0;u<r;u++)u>s&&(t[r*i+u]=(0,wx.subtract)(t[r*i+u],(0,Fa.multiply)(t[r*s+u],a))),e[r*i+u]=(0,wx.subtract)(e[r*i+u],(0,Fa.multiply)(e[r*s+u],a))}}return e}var Zj,Nr,Lx,Rx,wx,Xj,Hj,Qj,Wj,Cx,Fa,Px,Dx,Ga=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.invg=exports.inv=void 0;Zj=(Ct(),o(Dt)),Nr=(T(),o(N)),Lx=(Ae(),o(Me)),Rx=(Le(),o(Pe)),wx=(_e(),o(pe)),Xj=(Q0(),o(Mx)),Hj=(hu(),o(B0)),Qj=(zo(),o(jn)),Wj=(K(),o(te)),Cx=(se(),o(oe)),Fa=(Q(),o(W)),Px=(jt(),o(Ot)),Dx=(U(),o(G));exports.inv=kx;exports.invg=Jj});var Bx={};function s2(e){return Tu((0,Ux.Eval)((0,Kt.cadr)(e)),(0,Ux.Eval)((0,Kt.caddr)(e)))}function Tu(e,t){return o2(e,t)}function o2(e,t){let r=(0,ds.nativeInt)(t);if((0,Kt.isdouble)(e)&&!isNaN(r)){let s=(0,e2.jn)(r,e.d);return(0,ds.double)(s)}if((0,Ya.isZeroAtomOrTensor)(e)&&(0,Ya.isZeroAtomOrTensor)(t))return Kt.Constants.one;if((0,Ya.isZeroAtomOrTensor)(e)&&!isNaN(r))return Kt.Constants.zero;if(t.k===Kt.NUM&&(0,Kt.MEQUAL)(t.q.b,2)){if((0,Kt.MEQUAL)(t.q.a,1)){let n=Kt.defs.evaluatingAsFloats?(0,ds.double)(2/Math.PI):(0,fr.divide)((0,ds.integer)(2),(0,za.symbol)(Kt.PI));return(0,fr.multiply)((0,Va.power)((0,fr.divide)(n,e),(0,ds.rational)(1,2)),(0,r2.sine)(e))}if((0,Kt.MEQUAL)(t.q.a,-1)){let n=Kt.defs.evaluatingAsFloats?(0,ds.double)(2/Math.PI):(0,fr.divide)((0,ds.integer)(2),(0,za.symbol)(Kt.PI));return(0,fr.multiply)((0,Va.power)((0,fr.divide)(n,e),(0,ds.rational)(1,2)),(0,t2.cosine)(e))}let s=(0,ds.integer)((0,Kt.MSIGN)(t.q.a));return(0,Mu.subtract)((0,fr.multiply)((0,fr.multiply)((0,fr.divide)((0,ds.integer)(2),e),(0,Mu.subtract)(t,s)),Tu(e,(0,Mu.subtract)(t,s))),Tu(e,(0,Mu.subtract)(t,(0,fr.multiply)((0,ds.integer)(2),s))))}return(0,Ya.isnegativeterm)(e)?(0,fr.multiply)((0,fr.multiply)((0,Va.power)((0,fr.negate)(e),t),(0,Va.power)(e,(0,fr.negate)(t))),(0,ef.makeList)((0,za.symbol)(Kt.BESSELJ),(0,fr.negate)(e),t)):(0,Ya.isnegativeterm)(t)?(0,fr.multiply)((0,Va.power)(Kt.Constants.negOne,t),(0,ef.makeList)((0,za.symbol)(Kt.BESSELJ),e,(0,fr.negate)(t))):(0,ef.makeList)((0,za.symbol)(Kt.BESSELJ),e,t)}var Kt,e2,za,Mu,ds,t2,Ux,Ya,ef,fr,Va,r2,tf=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.besselj=exports.Eval_besselj=void 0;Kt=(T(),o(N)),e2=(uo(),o(Go)),za=(U(),o(G)),Mu=(_e(),o(pe)),ds=(Y(),o(V)),t2=(Lo(),o(bn)),Ux=(F(),o(z)),Ya=(K(),o(te)),ef=(se(),o(oe)),fr=(Q(),o(W)),Va=(At(),o(Mt)),r2=(Qs(),o(wo));exports.Eval_besselj=s2;exports.besselj=Tu});var Xx={};function l2(e){return Zx((0,zx.Eval)((0,Mi.cadr)(e)),(0,zx.Eval)((0,Mi.caddr)(e)))}function Zx(e,t){return u2(e,t)}function u2(e,t){let r=(0,Fx.nativeInt)(t);if((0,Mi.isdouble)(e)&&!isNaN(r)){let s=(0,n2.yn)(r,e.d);return(0,Fx.double)(s)}return(0,i2.isnegativeterm)(t)?(0,Vx.multiply)((0,a2.power)(Mi.Constants.negOne,t),(0,Yx.makeList)((0,Gx.symbol)(Mi.BESSELY),e,(0,Vx.negate)(t))):(0,Yx.makeList)((0,Gx.symbol)(Mi.BESSELY),e,t)}var Mi,n2,Gx,Fx,zx,i2,Yx,Vx,a2,rf=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.bessely=exports.Eval_bessely=void 0;Mi=(T(),o(N)),n2=(uo(),o(Go)),Gx=(U(),o(G)),Fx=(Y(),o(V)),zx=(F(),o(z)),i2=(K(),o(te)),Yx=(se(),o(oe)),Vx=(Q(),o(W)),a2=(At(),o(Mt));exports.Eval_bessely=l2;exports.bessely=Zx});var Wx={};function m2(e){return Qx((0,f2.Eval)((0,An.cadr)(e)))}function Qx(e){if((0,An.car)(e)===(0,Hx.symbol)(An.ARCCOSH))return(0,An.cadr)(e);if((0,An.isdouble)(e)){let t=Math.cosh(e.d);return Math.abs(t)<1e-10&&(t=0),(0,c2.double)(t)}return(0,d2.isZeroAtomOrTensor)(e)?An.Constants.one:(0,_2.makeList)((0,Hx.symbol)(An.COSH),e)}var An,Hx,c2,f2,d2,_2,sf=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ycosh=exports.Eval_cosh=void 0;An=(T(),o(N)),Hx=(U(),o(G)),c2=(Y(),o(V)),f2=(F(),o(z)),d2=(K(),o(te)),_2=(se(),o(oe));exports.Eval_cosh=m2;exports.ycosh=Qx});var ep={};function b2(e){return Kx((0,x2.Eval)((0,hr.cadr)(e)))}function Kx(e){return g2(e)}function g2(e){return(0,hr.isdouble)(e)?e.d===0?hr.Constants.one:hr.Constants.zero:(0,hr.isrational)(e)?(0,hr.MZERO)((0,p2.mmul)(e.q.a,e.q.b))?hr.Constants.one:hr.Constants.zero:(0,hr.ispower)(e)?(0,af.makeList)((0,of.symbol)(hr.DIRAC),(0,hr.cadr)(e)):(0,nf.isnegativeterm)(e)?(0,af.makeList)((0,of.symbol)(hr.DIRAC),(0,Jx.negate)(e)):(((0,nf.isnegativeterm)(e)||(0,hr.isadd)(e)&&(0,nf.isnegativeterm)((0,hr.cadr)(e)))&&(e=(0,Jx.negate)(e)),(0,af.makeList)((0,of.symbol)(hr.DIRAC),e))}var hr,of,x2,nf,af,p2,Jx,lf=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.dirac=exports.Eval_dirac=void 0;hr=(T(),o(N)),of=(U(),o(G)),x2=(F(),o(z)),nf=(K(),o(te)),af=(se(),o(oe)),p2=(cs(),o(As)),Jx=(Q(),o(W));exports.Eval_dirac=b2;exports.dirac=Kx});var q2={};function v2(e,t){let r=uf.Constants.one,s=r;if(e=(0,uf.cdr)(e),!(0,uf.iscons)(e))return[r,s];for(let n of e)(0,y2.Find)(n,t)?s=(0,tp.multiply)(s,n):r=(0,tp.multiply)(r,n);return[r,s]}var uf,y2,tp,rp=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.partition=void 0;uf=(T(),o(N)),y2=(ar(),o(xr)),tp=(Q(),o(W));exports.partition=v2});var On={};function O2(e){ee.DEBUG&&console.log(`#### scanning ${e}`),Su=null,et=[],Xa=[],Zo=!0,Ii=[],nt=[""],mf=!1,qe=e,vf=0;let t=ee.defs.expanding;if(ee.defs.expanding=!0,Wr=0,re=0,Be(),ne==="")return ee.defs.expanding=t,[0,(0,gt.symbol)(ee.NIL)];let r=fo();return ee.defs.expanding=t,mf||(ee.defs.symbolsInExpressionsWithoutAssignments=ee.defs.symbolsInExpressionsWithoutAssignments.concat(Xa)),[Ni-Wr,r]}function M2(e){qe=e,vf=1;let t=ee.defs.expanding;if(ee.defs.expanding=!0,Wr=0,re=0,Be(),ne==="")return ee.defs.expanding=t,(0,gt.symbol)(ee.NIL);let r=fo();return ee.defs.expanding=t,r}function fo(){let e=op(),t=!1;if(ne===_f&&(t=!0),ne===_f||ne==="="){let r=Su;ee.DEBUG&&console.log("assignment!"),mf=!0,Zo=!1,Be();let s=op();if(t&&(s=(0,Ht.makeList)((0,gt.symbol)(ee.QUOTE),s)),e=(0,Ht.makeList)((0,gt.symbol)(ee.SETQ),e,s),Zo=!0,ee.defs.codeGen){let n=et.indexOf(r);if(n!==-1&&(et.splice(n,1),ee.defs.symbolsHavingReassignments.push(r)),ee.DEBUG){console.log(`locally, ${r} depends on: `);for(let a of Array.from(et))console.log(`  ${a}`)}ee.defs.symbolsDependencies[r]==null&&(ee.defs.symbolsDependencies[r]=[]);let i=ee.defs.symbolsDependencies[r];for(let a of Array.from(et))i.indexOf(a)===-1&&i.push(a);et=[]}}return e}function op(){let e=co(),t;switch(ne){case ap:return Be(),t=co(),(0,Ht.makeList)((0,gt.symbol)(ee.TESTEQ),e,t);case lp:return Be(),t=co(),(0,Ht.makeList)((0,gt.symbol)(ee.NOT),(0,Ht.makeList)((0,gt.symbol)(ee.TESTEQ),e,t));case ip:return Be(),t=co(),(0,Ht.makeList)((0,gt.symbol)(ee.TESTLE),e,t);case np:return Be(),t=co(),(0,Ht.makeList)((0,gt.symbol)(ee.TESTGE),e,t);case"<":return Be(),t=co(),(0,Ht.makeList)((0,gt.symbol)(ee.TESTLT),e,t);case">":return Be(),t=co(),(0,Ht.makeList)((0,gt.symbol)(ee.TESTGT),e,t)}return e}function co(){let e=[(0,gt.symbol)(ee.ADD)];switch(ne){case"+":Be(),e.push(Za());break;case"-":Be(),e.push((0,Nu.negate)(Za()));break;default:e.push(Za())}for(;Ha===0&&(ne==="+"||ne==="-");)ne==="+"?(Be(),e.push(Za())):(Be(),e.push((0,Nu.negate)(Za())));return e.length===2?e[1]:(0,Ht.makeList)(...e)}function qf(){if(typeof ne=="string")return ne.charCodeAt(0)}function T2(){if(qf()===ee.dotprod_unicode)return!0;switch(ne){case"*":case"/":return!0;case"(":case Iu:case gf:case pf:case bf:case yf:return Ha?(re=Ni,!1):!0}return!1}function cf(e){e.length>0&&(0,ee.isrational)(e[e.length-1])&&(0,j2.equaln)(e[e.length-1],1)&&e.pop()}function N2(e){if(e.length>1&&(0,ee.isNumericAtom)(e[e.length-2])&&(0,ee.isNumericAtom)(e[e.length-1])){let t=e.pop(),r=e.pop();e.push((0,Nu.multiply)(r,t))}}function Za(){let e=[Ti()];for(ee.parse_time_simplifications&&cf(e);T2();)ne==="*"?(Be(),e.push(Ti())):ne==="/"?(cf(e),Be(),e.push((0,Nu.inverse)(Ti()))):qf()===ee.dotprod_unicode?(Be(),e.push((0,Ht.makeList)((0,gt.symbol)(ee.INNER),e.pop(),Ti()))):e.push(Ti()),ee.parse_time_simplifications&&(N2(e),cf(e));return e.length===0?ee.Constants.one:e.length==1?e[0]:(0,Ht.makeList)((0,gt.symbol)(ee.MULTIPLY),...e)}function I2(e){return ne==="^"?(Be(),(0,Ht.makeList)((0,gt.symbol)(ee.POWER),e,Ti())):e}function S2(e){Be();let t=[(0,gt.symbol)(ee.INDEX),e,co()];for(;ne===",";)Be(),t.push(co());return ne!=="]"&&Rs("] expected"),Be(),(0,Ht.makeList)(...t)}function Ti(){let e=!1,t;for(ne==="("?t=D2():ne===Iu?t=w2():ne===gf?t=C2():ne==="["?t=k2():ne===pf?(e=!0,t=(0,sp.bignum_scan_integer)(bt),ne=Be()):ne===bf?(e=!0,t=(0,sp.bignum_scan_float)(bt),ne=Be()):ne===yf?t=L2():Rs("syntax error");ne==="["||ne==="("&&Ha===0&&!e;)ne==="["?t=S2(t):ne==="("&&(t=P2(t));for(;ne==="!";)Be(),t=(0,Ht.makeList)((0,gt.symbol)(ee.FACTORIAL),t);for(;qf()===ee.transpose_unicode;)Be(),t=(0,Ht.makeList)((0,gt.symbol)(ee.TRANSPOSE),t);return I2(t)}function xf(e){if(ee.predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(e)===-1&&et.indexOf(e)===-1&&et.indexOf("'"+e)===-1&&!Vo){ee.DEBUG&&console.log(`... adding symbol: ${e} to the set of the symbols right of assignment`);let t="";for(let r=1;r<nt.length;r++)nt[r]!==""&&(t+=nt[r]+"_"+r+"_");e=t+e,et.push(e)}}function R2(e){if(ee.predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(e)===-1&&Xa.indexOf(e)===-1&&Xa.indexOf("'"+e)===-1&&!Vo){ee.DEBUG&&console.log(`... adding symbol: ${e} to the set of the symbols left of assignment`);let t="";for(let r=1;r<nt.length;r++)nt[r]!==""&&(t+=nt[r]+"_"+r+"_");e=t+e,Xa.push(e)}}function w2(){ne!==Iu&&Rs("symbol expected");let e;if(vf&&typeof bt=="string"&&bt.length===1)switch(bt[0]){case"a":e=(0,gt.symbol)(ee.METAA);break;case"b":e=(0,gt.symbol)(ee.METAB);break;case"x":e=(0,gt.symbol)(ee.METAX);break;default:e=(0,gt.usr_symbol)(bt)}else e=(0,gt.usr_symbol)(bt);return Ii.length===0?(ee.DEBUG&&console.log(`out of scanning parameters, processing ${bt}`),Su=bt,Zo&&R2(bt)):(ee.DEBUG&&console.log(`still scanning parameters, skipping ${bt}`),Zo&&xf("'"+bt)),ee.DEBUG&&console.log(`found symbol: ${bt} left of assignment: ${Zo}`),Zo||xf(bt),Be(),e}function L2(){let e=new ee.Str(bt);return Be(),e}function C2(){ee.DEBUG&&console.log("-- scan_function_call_with_function_name start");let e=1,r=[(0,gt.usr_symbol)(bt)],s=bt;if((s==="roots"||s==="defint"||s==="sum"||s==="product"||s==="for")&&nt.push(bt),Su=bt,Zo||xf(bt),Be(),Be(),Ii.push(!0),ne!==")"){for(r.push(fo()),e++;ne===",";)Be(),e===2&&nt[nt.length-1].indexOf("roots")!==-1&&(et=et.filter(n=>!new RegExp("roots_"+(nt.length-1)+"_"+bt).test(n)),Vo=!0),e===2&&nt[nt.length-1].indexOf("sum")!==-1&&(et=et.filter(n=>!new RegExp("sum_"+(nt.length-1)+"_"+bt).test(n)),Vo=!0),e===2&&nt[nt.length-1].indexOf("product")!==-1&&(et=et.filter(n=>!new RegExp("product_"+(nt.length-1)+"_"+bt).test(n)),Vo=!0),e===2&&nt[nt.length-1].indexOf("for")!==-1&&(et=et.filter(n=>!new RegExp("for_"+(nt.length-1)+"_"+bt).test(n)),Vo=!0),nt[nt.length-1].indexOf("defint")!==-1&&(e===2||e>2&&(e-2)%3===0)&&(et=et.filter(n=>!new RegExp("defint_"+(nt.length-1)+"_"+bt).test(n)),Vo=!0),r.push(fo()),Vo=!1,e++;e===2&&nt[nt.length-1].indexOf("roots")!==-1&&(et=et.filter(n=>!new RegExp("roots_"+(nt.length-1)+"_x").test(n)))}Ii.pop();for(let n=0;n<=et.length;n++)et[n]!=null&&(s==="roots"&&(et[n]=et[n].replace(new RegExp("roots_"+(nt.length-1)+"_"),"")),s==="defint"&&(et[n]=et[n].replace(new RegExp("defint_"+(nt.length-1)+"_"),"")),s==="sum"&&(et[n]=et[n].replace(new RegExp("sum_"+(nt.length-1)+"_"),"")),s==="product"&&(et[n]=et[n].replace(new RegExp("product_"+(nt.length-1)+"_"),"")),s==="for"&&(et[n]=et[n].replace(new RegExp("for_"+(nt.length-1)+"_"),"")));return ne!==")"&&Rs(") expected"),Be(),(s==="roots"||s==="defint"||s==="sum"||s==="product"||s==="for")&&nt.pop(),s===(0,gt.symbol)(ee.PATTERN).printname&&(ee.defs.patternHasBeenFound=!0),ee.DEBUG&&console.log("-- scan_function_call_with_function_name end"),(0,Ht.makeList)(...r)}function P2(e){ee.DEBUG&&console.log("-- scan_function_call_without_function_name start");let r=[(0,Ht.makeList)((0,gt.symbol)(ee.EVAL),e)];if(Be(),Ii.push(!0),ne!==")")for(r.push(fo());ne===",";)Be(),r.push(fo());return Ii.pop(),ne!==")"&&Rs(") expected"),Be(),ee.DEBUG&&console.log(`-- scan_function_call_without_function_name end: ${r[r.length-1]}`),(0,Ht.makeList)(...r)}function D2(){ne!=="("&&Rs("( expected"),ne=Be();let t=fo();return ne!==")"&&Rs(") expected"),Be(),t}function k2(){ne!=="["&&Rs("[ expected"),Be();let e=[fo()];for(;ne===",";)ne=Be(),e.push(fo());let t=$2(e);return ne!=="]"&&Rs("] expected"),Be(),t}function Rs(e){for(ee.defs.errorMessage="";Wr!==re&&!((qe[Wr]===`
`||qe[Wr]==="\r")&&Wr+1===re);)ee.defs.errorMessage+=qe[Wr++];for(ee.defs.errorMessage+=" ? ";qe[Wr]&&qe[Wr]!==`
`&&qe[Wr]!=="\r";)ee.defs.errorMessage+=qe[Wr++];ee.defs.errorMessage+=`
`,(0,h2.stop)(e)}function $2(e){let t=(0,E2.alloc_tensor)(e.length);t.tensor.ndim=1,t.tensor.dim[0]=e.length;for(let r=0;r<e.length;r++)t.tensor.elem[r]=e[r];return(0,A2.check_tensor_dimensions)(t),t}function Be(){for(Ha=0;U2(),ne===df;)Ha=1;return ee.DEBUG&&console.log(`get_next_token token: ${ne}`),ne}function U2(){for(;(0,Yo.isspace)(qe[re]);){if(qe[re]===`
`||qe[re]==="\r"){ne=df,re++;return}re++}if(Ni=re,re===qe.length){ne="";return}if((0,Yo.isdigit)(qe[re])||qe[re]==="."){for(;(0,Yo.isdigit)(qe[re]);)re++;if(qe[re]==="."){for(re++;(0,Yo.isdigit)(qe[re]);)re++;if(qe[re]==="e"&&(qe[re+1]==="+"||qe[re+1]==="-"||(0,Yo.isdigit)(qe[re+1])))for(re+=2;(0,Yo.isdigit)(qe[re]);)re++;ne=bf}else ne=pf;ff(Ni,re);return}if((0,Yo.isalpha)(qe[re])){for(;(0,Yo.isalnumorunderscore)(qe[re]);)re++;qe[re]==="("?ne=gf:ne=Iu,ff(Ni,re);return}if(qe[re]==='"'){for(re++;qe[re]!=='"';)re===qe.length-1&&(re++,Rs("runaway string"),re--),re++;re++,ne=yf,ff(Ni+1,re-1);return}if(qe[re]==="#"||qe[re]==="-"&&qe[re+1]==="-"){for(;qe[re]&&qe[re]!==`
`&&qe[re]!=="\r";)re++;qe[re]&&re++,ne=df;return}if(qe[re]===":"&&qe[re+1]==="="){re+=2,ne=_f;return}if(qe[re]==="="&&qe[re+1]==="="){re+=2,ne=ap;return}if(qe[re]==="!"&&qe[re+1]==="="){re+=2,ne=lp;return}if(qe[re]==="<"&&qe[re+1]==="="){re+=2,ne=ip;return}if(qe[re]===">"&&qe[re+1]==="="){re+=2,ne=np;return}ne=qe[re++]}function ff(e,t){bt=qe.substring(e,t)}var E2,ee,Yo,h2,gt,sp,j2,Ht,Nu,A2,pf,bf,Iu,gf,df,yf,np,ip,ap,lp,_f,ne,Ha,vf,Wr,re,Ni,bt,Su,et,Xa,Zo,Ii,nt,Vo,mf,qe,Xo=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.scan_meta=exports.scan=void 0;E2=(Ct(),o(Dt)),ee=(T(),o(N)),Yo=(uo(),o(Go)),h2=(Ae(),o(Me)),gt=(U(),o(G)),sp=(Y(),o(V)),j2=(K(),o(te)),Ht=(se(),o(oe)),Nu=(Q(),o(W)),A2=(jt(),o(Ot)),pf=1001,bf=1002,Iu=1003,gf=1004,df=1006,yf=1007,np=1008,ip=1009,ap=1010,lp=1011,_f=1012,ne="",Ha=0,vf=0,Wr=0,re=0,Ni=0,bt="",Su=null,et=null,Xa=null,Zo=null,Ii=null,nt=null,Vo=!1,mf=null,qe="";exports.scan=O2;exports.scan_meta=M2});var _o={};function F2(e){return(0,ws.evalFloats)(()=>(0,Ru.Eval)(hf((0,Ru.Eval)((0,ws.cadr)(e)))))}function z2(e){return(0,ws.evalFloats)(()=>{e=(0,Ru.Eval)(e),e=hf(e),e=(0,Ru.Eval)(e)}),e}function hf(e){return(0,ws.evalFloats)(Ef,e)}function Ef(e){return(0,ws.iscons)(e)?(0,B2.makeList)(...e.map(Ef)):(0,ws.istensor)(e)?(e=(0,G2.copy_tensor)(e),e.tensor.elem=e.tensor.elem.map(Ef),e):(0,ws.isrational)(e)?(0,cp.bignum_float)(e):e===(0,up.symbol)(ws.PI)?ws.Constants.piAsDouble:e===(0,up.symbol)(ws.E)?(0,cp.double)(Math.E):e}var eU,ws,tU,up,cp,Ru,B2,G2,Ls=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.yyfloat=exports.zzfloat=exports.Eval_float=void 0;eU=(wu(),o(jf)),ws=(T(),o(N)),tU=(Ae(),o(Me)),up=(U(),o(G)),cp=(Y(),o(V)),Ru=(F(),o(z)),B2=(se(),o(oe)),G2=(jt(),o(Ot));exports.Eval_float=F2;exports.zzfloat=z2;exports.yyfloat=hf});var mp={};function W2(e){let t=(0,$e.cadr)(e),r;(0,$e.car)(t)===(0,dr.symbol)($e.SETQ)||(0,$e.car)(t)===(0,dr.symbol)($e.TESTEQ)?r=(0,Ne.subtract)((0,Si.Eval)((0,$e.cadr)(t)),(0,Si.Eval)((0,$e.caddr)(t))):(t=(0,Si.Eval)(t),(0,$e.car)(t)===(0,dr.symbol)($e.SETQ)||(0,$e.car)(t)===(0,dr.symbol)($e.TESTEQ)?r=(0,Ne.subtract)((0,Si.Eval)((0,$e.cadr)(t)),(0,Si.Eval)((0,$e.caddr)(t))):r=t),t=(0,Si.Eval)((0,$e.caddr)(e));let s=t===(0,dr.symbol)($e.NIL)?(0,H2.guess)(r):t;return(0,br.ispolyexpandedform)(r,s)||(0,_p.stop)("roots: 1st argument is not a polynomial in the variable "+s),Qa(r,s)}function J2(e){return e.some(t=>(0,br.iscomplexnumber)(t))}function K2(e){return e.length<=2||(0,br.isZeroAtomOrTensor)(e[0])?!1:e.slice(1,e.length-1).every(t=>(0,br.isZeroAtomOrTensor)(t))}function Cu(e,t){let r=(0,Z2.coeff)(e,t),s=r[r.length-1];return r.map(n=>(0,O.divide)(n,s))}function Qa(e,t){if($e.defs.recursionLevelNestedRadicalsRemoval>1)return(0,dr.symbol)($e.NIL);ct.debug(`checking if ${e} is a case of simple roots`);let r=Cu(e,t),s=[];if(K2(r)){ct.debug(`yes, ${r[r.length-1]} is a case of simple roots`);let a=r.length,u=r[0],c=r.pop(),d=eA(a,c,u);s.push(...d)}else{let a=tA(e,t);s.push(...a)}let n=s.length;if(n===0&&(0,_p.stop)("roots: the polynomial is not factorable, try nroots"),n===1)return s[0];(0,V2.sort)(s);let i=(0,Y2.alloc_tensor)(n);i.tensor.ndim=1,i.tensor.dim[0]=n;for(let a=0;a<n;a++)i.tensor.elem[a]=s[a];return console.log(`roots returning ${i}`),i}function eA(e,t,r){ct.debug("getSimpleRoots"),e=e-1;let s=(0,O.divide)((0,tt.power)(r,(0,Z.rational)(1,e)),(0,tt.power)(t,(0,Z.rational)(1,e))),n=[];if(e%2===0){for(let i=1;i<=e;i+=2){let a=(0,O.multiply)(s,(0,tt.power)($e.Constants.negOne,(0,Z.rational)(i,e)));n.push(a),n.push((0,O.negate)(a))}return n}for(let i=1;i<=e;i++){let a=(0,O.multiply)(s,(0,tt.power)($e.Constants.negOne,(0,Z.rational)(i,e)));i%2===0&&(a=(0,O.negate)(a)),n.push(a)}return n}function tA(e,t){let r=Cu(e,t);if(J2(r)||(e=(0,X2.factorpoly)(e,t)),(0,$e.ismultiply)(e)){let s=e.tail().map(n=>fp(n,t));return Q2(s)}return fp(e,t)}function fp(e,t){if((0,$e.ispower)(e)&&(0,br.ispolyexpandedform)((0,$e.cadr)(e),t)&&(0,br.isposint)((0,$e.caddr)(e))){let r=Cu((0,$e.cadr)(e),t);return dp(r)}if((0,br.ispolyexpandedform)(e,t)){let r=Cu(e,t);return dp(r)}return[]}function dp(e){let t=e.length;if(t===2){let r=e.pop(),s=e.pop();return rA(r,s)}if(t===3){let r=e.pop(),s=e.pop(),n=e.pop();return sA(r,s,n)}if(t===4){let r=e.pop(),s=e.pop(),n=e.pop(),i=e.pop();return oA(r,s,n,i)}if(t===5){let r=e.pop(),s=e.pop(),n=e.pop(),i=e.pop(),a=e.pop();return iA(r,s,n,i,a)}return[]}function rA(e,t){return[(0,O.negate)((0,O.divide)(t,e))]}function sA(e,t,r){let s=(0,tt.power)((0,Ne.subtract)((0,tt.power)(t,(0,Z.integer)(2)),(0,O.multiply)((0,O.multiply)((0,Z.integer)(4),e),r)),(0,Z.rational)(1,2)),n=(0,O.divide)((0,Ne.subtract)(s,t),(0,O.multiply)(e,(0,Z.integer)(2))),i=(0,O.multiply)((0,O.divide)((0,O.negate)((0,Ne.add)(s,t)),e),(0,Z.rational)(1,2));return[n,i]}function oA(e,t,r,s){let n=(0,O.multiply)((0,O.multiply)(r,r),r),i=(0,O.multiply)(t,t),a=(0,O.multiply)(i,t),u=(0,O.multiply)((0,O.multiply)(a,s),(0,Z.integer)(-4)),c=(0,O.multiply)(a,(0,Z.integer)(2)),d=(0,O.multiply)((0,Z.integer)(3),e),m=(0,O.multiply)((0,O.multiply)(e,e),s),R=(0,O.multiply)(m,(0,Z.integer)(27)),M=(0,O.multiply)((0,O.multiply)(m,s),(0,Z.integer)(-27)),k=(0,O.multiply)((0,O.multiply)(e,r),t),H=(0,O.multiply)((0,O.multiply)(e,r),(0,Z.integer)(3)),X=(0,O.multiply)((0,Z.integer)(-4),(0,O.multiply)(e,n)),Ie=(0,O.negate)((0,O.multiply)(k,(0,Z.integer)(9))),at=(0,O.multiply)((0,O.multiply)(k,s),(0,Z.integer)(18)),Ke=(0,Ne.subtract)(i,H),Fe=(0,O.multiply)(i,(0,O.multiply)(r,r)),ft=(0,O.divide)((0,O.negate)(t),d),Se=(0,O.multiply)((0,tt.power)(Ke,(0,Z.integer)(3)),(0,Z.integer)(4)),dt=(0,Lu.absValFloat)((0,er.simplify)(Ke)),ir=(0,Lu.absValFloat)((0,er.simplify)((0,Ne.add_all)([at,u,Fe,X,M]))),Ft=(0,Ne.add_all)([c,Ie,R]),qr=(0,er.simplify)((0,tt.power)((0,Ne.subtract)((0,tt.power)(Ft,(0,Z.integer)(2)),Se),(0,Z.rational)(1,2)));if(ct.debug(">>>>>>>>>>>>>>>> actually using cubic formula <<<<<<<<<<<<<<< "),ct.debug(`cubic: D0: ${Ke}`),ct.debug(`cubic: D0 as float: ${dt}`),ct.debug(`cubic: DETERMINANT: ${ir}`),ct.debug(`cubic: D1: ${Ft}`),(0,br.isZeroAtomOrTensor)(ir))return nA(e,t,r,s,{R_DELTA0_toBeCheckedIfZero:dt,R_m_b_over_3a:ft,R_DELTA0:Ke,R_b3:a,R_a_b_c:k});let Lt=!1,un=!1,Ys;for(;!Lt;){let ma=un?(0,O.negate)(qr):qr;Ys=(0,er.simplify)((0,tt.power)((0,O.multiply)((0,Ne.add)(ma,Ft),(0,Z.rational)(1,2)),(0,Z.rational)(1,3)));let ai=(0,Lu.absValFloat)((0,er.simplify)(Ys));ct.debug(`cubic: C: ${Ys}`),ct.debug(`cubic: C as absval and float: ${ai}`),(0,br.isZeroAtomOrTensor)(ai)?(ct.debug(" cubic: C IS ZERO flipping the sign"),un=!0):Lt=!0}let ua=(0,O.multiply)((0,O.multiply)(Ys,d),(0,Z.integer)(2)),Ll=(0,O.multiply)($e.Constants.imaginaryunit,(0,tt.power)((0,Z.integer)(3),(0,Z.rational)(1,2))),Cl=(0,Ne.add)($e.Constants.one,Ll),ca=(0,Ne.subtract)($e.Constants.one,Ll),ss=(0,O.divide)(Ys,d),Vs=ft,Pl=(0,O.negate)(ss),fa=(0,O.negate)((0,O.divide)(Ke,(0,O.multiply)(Ys,d))),os=(0,er.simplify)((0,Ne.add_all)([Vs,Pl,fa])),cn=ft,Zs=(0,O.divide)((0,O.multiply)(ss,Cl),(0,Z.integer)(2)),Dl=(0,O.divide)((0,O.multiply)(ca,Ke),ua),da=(0,er.simplify)((0,Ne.add_all)([cn,Zs,Dl])),_a=ft,Hc=(0,O.divide)((0,O.multiply)(ss,ca),(0,Z.integer)(2)),ii=(0,O.divide)((0,O.multiply)(Cl,Ke),ua),kl=(0,er.simplify)((0,Ne.add_all)([_a,Hc,ii]));return[os,da,kl]}function nA(e,t,r,s,n){let{R_DELTA0_toBeCheckedIfZero:i,R_m_b_over_3a:a,R_DELTA0:u,R_b3:c,R_a_b_c:d}=n;if((0,br.isZeroAtomOrTensor)(i))return ct.debug(" cubic: DETERMINANT IS ZERO and delta0 is zero"),[a];ct.debug(" cubic: DETERMINANT IS ZERO and delta0 is not zero");let m=(0,O.divide)((0,Ne.subtract)((0,O.multiply)(e,(0,O.multiply)(s,(0,Z.integer)(9))),(0,O.multiply)(t,r)),(0,O.multiply)(u,(0,Z.integer)(2))),R=(0,O.negate)(c),M=(0,O.negate)((0,O.multiply)(e,(0,O.multiply)(e,(0,O.multiply)(s,(0,Z.integer)(9))))),k=(0,O.multiply)(d,(0,Z.integer)(4)),H=(0,O.divide)((0,Ne.add_all)([k,M,R]),(0,O.multiply)(e,u));return[m,m,H]}function iA(e,t,r,s,n){return ct.debug(">>>>>>>>>>>>>>>> actually using quartic formula <<<<<<<<<<<<<<< "),(0,br.isZeroAtomOrTensor)(t)&&(0,br.isZeroAtomOrTensor)(s)&&!(0,br.isZeroAtomOrTensor)(r)&&!(0,br.isZeroAtomOrTensor)(n)?aA(e,t,r,s,n):(0,br.isZeroAtomOrTensor)(t)?lA(e,t,r,s,n):uA(e,t,r,s,n)}function aA(e,t,r,s,n){ct.debug("biquadratic case");let i=Qa((0,Ne.add)((0,O.multiply)(e,(0,tt.power)((0,dr.symbol)($e.SECRETX),(0,Z.integer)(2))),(0,Ne.add)((0,O.multiply)(r,(0,dr.symbol)($e.SECRETX)),n)),(0,dr.symbol)($e.SECRETX)),a=[];for(let u of i.tensor.elem)a.push((0,er.simplify)((0,tt.power)(u,(0,Z.rational)(1,2)))),a.push((0,er.simplify)((0,O.negate)((0,tt.power)(u,(0,Z.rational)(1,2)))));return a}function lA(e,t,r,s,n){let i=r,a=s,u=n,c=(0,O.multiply)((0,Z.rational)(5,2),i),d=(0,Ne.subtract)((0,O.multiply)((0,Z.integer)(2),(0,tt.power)(i,(0,Z.integer)(2))),u),m=(0,Ne.add)((0,O.multiply)((0,Z.rational)(-1,2),(0,O.multiply)(i,u)),(0,Ne.add)((0,O.divide)((0,tt.power)(i,(0,Z.integer)(3)),(0,Z.integer)(2)),(0,O.multiply)((0,Z.rational)(-1,8),(0,tt.power)(a,(0,Z.integer)(2))))),R=(0,Ne.add)((0,tt.power)((0,dr.symbol)($e.SECRETX),(0,Z.integer)(3)),(0,Ne.add)((0,O.multiply)(c,(0,tt.power)((0,dr.symbol)($e.SECRETX),(0,Z.integer)(2))),(0,Ne.add)((0,O.multiply)(d,(0,dr.symbol)($e.SECRETX)),m)));ct.debug(`resolventCubic: ${R}`);let M=Qa(R,(0,dr.symbol)($e.SECRETX));ct.debug(`resolventCubicSolutions: ${M}`);let k=null;for(let qr of M.tensor.elem){ct.debug(`examining solution: ${qr}`);let Lt=(0,Lu.absValFloat)((0,Ne.add)((0,O.multiply)(qr,(0,Z.integer)(2)),i));if(ct.debug(`abs value is: ${qr}`),!(0,br.isZeroAtomOrTensor)(Lt)){k=qr;break}}ct.debug(`chosen solution: ${k}`);let H=(0,er.simplify)((0,tt.power)((0,Ne.add)((0,O.multiply)(k,(0,Z.integer)(2)),i),(0,Z.rational)(1,2))),X=(0,er.simplify)((0,O.divide)((0,O.multiply)(a,(0,Z.integer)(2)),H)),Ie=(0,Ne.add)((0,O.multiply)(i,(0,Z.integer)(3)),(0,O.multiply)(k,(0,Z.integer)(2))),at=(0,er.simplify)((0,tt.power)((0,O.negate)((0,Ne.add)(Ie,X)),(0,Z.rational)(1,2))),Ke=(0,O.divide)((0,Ne.add)(H,at),(0,Z.integer)(2)),Fe=(0,er.simplify)((0,tt.power)((0,O.negate)((0,Ne.add)(Ie,X)),(0,Z.rational)(1,2))),ft=(0,O.divide)((0,Ne.subtract)(H,Fe),(0,Z.integer)(2)),Se=(0,er.simplify)((0,tt.power)((0,O.negate)((0,Ne.subtract)(Ie,X)),(0,Z.rational)(1,2))),dt=(0,O.divide)((0,Ne.add)((0,O.negate)(H),Se),(0,Z.integer)(2)),ir=(0,er.simplify)((0,tt.power)((0,O.negate)((0,Ne.subtract)(Ie,X)),(0,Z.rational)(1,2))),Ft=(0,O.divide)((0,Ne.subtract)((0,O.negate)(H),ir),(0,Z.integer)(2));return[Ke,ft,dt,Ft]}function uA(e,t,r,s,n){let i=(0,O.divide)((0,Ne.add)((0,O.multiply)((0,Z.integer)(8),(0,O.multiply)(r,e)),(0,O.multiply)((0,Z.integer)(-3),(0,tt.power)(t,(0,Z.integer)(2)))),(0,O.multiply)((0,Z.integer)(8),(0,tt.power)(e,(0,Z.integer)(2)))),a=(0,O.divide)((0,Ne.add)((0,tt.power)(t,(0,Z.integer)(3)),(0,Ne.add)((0,O.multiply)((0,Z.integer)(-4),(0,O.multiply)(e,(0,O.multiply)(t,r))),(0,O.multiply)((0,Z.integer)(8),(0,O.multiply)(s,(0,tt.power)(e,(0,Z.integer)(2)))))),(0,O.multiply)((0,Z.integer)(8),(0,tt.power)(e,(0,Z.integer)(3)))),u=(0,O.multiply)((0,O.multiply)(e,e),e),c=(0,O.multiply)(t,t),d=(0,O.multiply)((0,O.multiply)(e,e),s),m=(0,O.divide)((0,Ne.add)((0,O.multiply)((0,tt.power)(t,(0,Z.integer)(4)),(0,Z.integer)(-3)),(0,Ne.add)((0,O.multiply)((0,Z.integer)(256),(0,O.multiply)(u,n)),(0,Ne.add)((0,O.multiply)((0,Z.integer)(-64),(0,O.multiply)(d,t)),(0,O.multiply)((0,Z.integer)(16),(0,O.multiply)(c,(0,O.multiply)(e,r)))))),(0,O.multiply)((0,Z.integer)(256),(0,tt.power)(e,(0,Z.integer)(4)))),R=(0,tt.power)((0,dr.symbol)($e.SECRETX),(0,Z.integer)(4)),M=(0,O.multiply)(i,(0,tt.power)((0,dr.symbol)($e.SECRETX),(0,Z.integer)(2))),k=(0,O.multiply)(a,(0,dr.symbol)($e.SECRETX)),H=(0,er.simplify)((0,Ne.add_all)([R,M,k,m])),X=Qa(H,(0,dr.symbol)($e.SECRETX));return ct.debug(`p for depressed quartic: ${i}`),ct.debug(`q for depressed quartic: ${a}`),ct.debug(`r for depressed quartic: ${m}`),ct.debug(`4 * x^4: ${R}`),ct.debug(`R_p * x^2: ${M}`),ct.debug(`R_q * x: ${k}`),ct.debug(`R_r: ${m}`),ct.debug(`solving depressed quartic: ${H}`),ct.debug(`depressedSolutions: ${X}`),X.tensor.elem.map(Ie=>{let at=(0,er.simplify)((0,Ne.subtract)(Ie,(0,O.divide)(t,(0,O.multiply)((0,Z.integer)(4),e))));return ct.debug(`solution from depressed: ${at}`),at})}var Y2,$e,_p,dr,V2,Lu,Ne,Z,Z2,Si,X2,H2,br,O,tt,er,ct,Q2,Af=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.roots=exports.Eval_roots=void 0;Y2=(Ct(),o(Dt)),$e=(T(),o(N)),_p=(Ae(),o(Me)),dr=(U(),o(G)),V2=(Le(),o(Pe)),Lu=(is(),o(js)),Ne=(_e(),o(pe)),Z=(Y(),o(V)),Z2=(xn(),o(ui)),Si=(F(),o(z)),X2=(mi(),o(ja)),H2=(Hr(),o(us)),br=(K(),o(te)),O=(Q(),o(W)),tt=(At(),o(Mt)),er=(Ho(),o(Mn)),ct={debug:e=>{$e.DEBUG&&console.log(e)}},Q2=e=>[].concat(...e);exports.Eval_roots=W2;exports.roots=Qa});var dA={};function cA(e){if((0,ye.isadd)(e)){let t=e.tail().map(pp);return(0,Qo.add_all)(t)}return pp(e)}function pp(e){if(!(0,ye.ismultiply)(e))return e;let t=e.tail();for(;fA(t););return(0,Ri.multiply_all_noexpand)(t)}function fA(e){for(let t=0;t<e.length;t++){let r=e[t];for(let s=0;s<e.length;s++){if(t===s)continue;let n=e[s];if((0,ye.isfactorial)(r)&&(0,ye.ispower)(n)&&(0,_s.isminusone)((0,ye.caddr)(n))&&(0,xp.equal)((0,ye.cadr)(r),(0,ye.cadr)(n)))return e[t]=(0,Pu.factorial)((0,Qo.subtract)((0,ye.cadr)(r),ye.Constants.one)),e[s]=ye.Constants.one,!0;if((0,ye.ispower)(n)&&(0,_s.isminusone)((0,ye.caddr)(n))&&(0,ye.caadr)(n)===(0,Of.symbol)(ye.FACTORIAL)&&(0,xp.equal)(r,(0,ye.cadadr)(n)))return e[t]=(0,Ri.reciprocate)((0,Pu.factorial)((0,Qo.add)(r,ye.Constants.negOne))),e[s]=ye.Constants.one,!0;if((0,ye.isfactorial)(n)){let i=(0,Qo.subtract)(r,(0,ye.cadr)(n));if((0,_s.isplusone)(i))return e[t]=(0,Pu.factorial)(r),e[s]=ye.Constants.one,!0}if((0,ye.ispower)(r)&&(0,_s.isminusone)((0,ye.caddr)(r))&&(0,ye.ispower)(n)&&(0,_s.isminusone)((0,ye.caddr)(n))&&(0,ye.caadr)(n)===(0,Of.symbol)(ye.FACTORIAL)){let i=(0,Qo.subtract)((0,ye.cadr)(r),(0,ye.cadr)((0,ye.cadr)(n)));if((0,_s.isplusone)(i))return e[t]=(0,Ri.reciprocate)((0,Pu.factorial)((0,ye.cadr)(r))),e[s]=ye.Constants.one,!0}if((0,ye.isfactorial)(r)&&(0,ye.ispower)(n)&&(0,_s.isminusone)((0,ye.caddr)(n))&&(0,ye.caadr)(n)===(0,Of.symbol)(ye.FACTORIAL)){let i=(0,Qo.subtract)((0,ye.cadr)(r),(0,ye.cadr)((0,ye.cadr)(n)));if((0,_s.isplusone)(i))return e[t]=(0,ye.cadr)(r),e[s]=ye.Constants.one,!0;if((0,_s.isminusone)(i))return e[t]=(0,Ri.reciprocate)((0,ye.cadr)((0,ye.cadr)(n))),e[s]=ye.Constants.one,!0;if((0,_s.equaln)(i,2))return e[t]=(0,ye.cadr)(r),e[s]=(0,Qo.add)((0,ye.cadr)(r),ye.Constants.negOne),!0;if((0,_s.equaln)(i,-2))return e[t]=(0,Ri.reciprocate)((0,ye.cadr)((0,ye.cadr)(n))),e[s]=(0,Ri.reciprocate)((0,Qo.add)((0,ye.cadr)((0,ye.cadr)(n)),ye.Constants.negOne)),!0}}}return!1}var ye,Of,xp,Qo,rU,Pu,_s,Ri,bp=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.simfac=void 0;ye=(T(),o(N)),Of=(U(),o(G)),xp=(Le(),o(Pe)),Qo=(_e(),o(pe)),rU=(F(),o(z)),Pu=(En(),o(hi)),_s=(K(),o(te)),Ri=(Q(),o(W));exports.simfac=cA});var Ep={};function pA(e){console.log("Eval_decomp is being called!!!!!!!!!!!!!!!!!!!!");let t=(0,yp.Eval)((0,Qe.cadr)(e));e=(0,yp.Eval)((0,Qe.caddr)(e));let r=e===(0,gp.symbol)(Qe.NIL)?(0,mA.guess)(t):e,s=Ja(!1,t,r);return(0,xA.makeList)((0,gp.symbol)(Qe.NIL),...s)}function bA(e,t){return e.length>0&&(0,vp.equal)(t,e[e.length-1])?!1:(e.push(t),!0)}function Ja(e,t,r){if(Qe.DEBUG&&console.log(`DECOMPOSING ${t}`),e){if(!(0,Qe.iscons)(t))return Qe.DEBUG&&console.log(` ground thing: ${t}`),[t]}else if(!(0,Wa.Find)(t,r))return Qe.DEBUG&&console.log(" entire expression is constant"),[t];if((0,Qe.isadd)(t))return gA(e,t,r);if((0,Qe.ismultiply)(t))return yA(e,t,r);let s=(0,Qe.cdr)(t);Qe.DEBUG&&(console.log(" naive decomp"),console.log(`startig p3: ${s}`));let n=[];for(;(0,Qe.iscons)(s);)e&&n.push((0,Qe.car)(s)),Qe.DEBUG&&(console.log("recursive decomposition"),console.log(`car(p3): ${(0,Qe.car)(s)}`),console.log(`p2: ${r}`)),n.push(...Ja(e,(0,Qe.car)(s),r)),s=(0,Qe.cdr)(s);return n}function gA(e,t,r){Qe.DEBUG&&console.log(" decomposing the sum ");let s=(0,Qe.cdr)(t),n=[];for(;(0,Qe.iscons)(s);)((0,Wa.Find)((0,Qe.car)(s),r)||e)&&n.push(...Ja(e,(0,Qe.car)(s),r)),s=(0,Qe.cdr)(s);s=(0,Qe.cdr)(t);let i=[...s].filter(a=>!(0,Wa.Find)(a,r));return i.length&&(s=(0,_A.add_all)(i),bA(n,s),n.push((0,qp.negate)(s))),n}function yA(e,t,r){Qe.DEBUG&&console.log(" decomposing the product ");let s=(0,Qe.cdr)(t),n=[];for(;(0,Qe.iscons)(s);)((0,Wa.Find)((0,Qe.car)(s),r)||e)&&n.push(...Ja(e,(0,Qe.car)(s),r)),s=(0,Qe.cdr)(s);s=(0,Qe.cdr)(t);let i=[];for(;(0,Qe.iscons)(s);){let a=(0,Qe.car)(s);(0,Wa.Find)(a,r)||(i.length<1||!(0,vp.equal)(a,i[i.length-1]))&&i.push(a),s=(0,Qe.cdr)(s)}return i.length>0&&n.push((0,qp.multiply_all)(i)),n}var Qe,Wa,gp,vp,_A,yp,mA,xA,qp,Mf=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.decomp=exports.Eval_decomp=void 0;Qe=(T(),o(N)),Wa=(ar(),o(xr)),gp=(U(),o(G)),vp=(Le(),o(Pe)),_A=(_e(),o(pe)),yp=(F(),o(z)),mA=(Hr(),o(us)),xA=(se(),o(oe)),qp=(Q(),o(W));exports.Eval_decomp=pA;exports.decomp=Ja});var Op={};function Ap(e,t,r,s){le.DEBUG&&console.log(`         !!!!!!!!!   transform on: ${e}`);let n=AA();(0,we.set_binding)((0,we.symbol)(le.METAX),t);let i=(0,qA.polyform)(e,t),a=(0,EA.decomp)(s,i,t);if(le.DEBUG){console.log(`  ${a.length} decomposed elements ====== `);for(let m=0;m<a.length;m++)console.log(`  decomposition element ${m}: ${a[m]}`)}let u=!1,c;if(s){if(!(0,le.isNumericAtom)(e)){let m=r;le.DEBUG&&(console.log(`applying transform: ${m}`),console.log(`scanning table entry ${m}`));let R=(0,Tf.subst)(m,(0,we.symbol)(le.SYMBOL_A_UNDERSCORE),(0,we.symbol)(le.METAA));R=(0,Tf.subst)(R,(0,we.symbol)(le.SYMBOL_B_UNDERSCORE),(0,we.symbol)(le.METAB));let M=(0,Tf.subst)(R,(0,we.symbol)(le.SYMBOL_X_UNDERSCORE),(0,we.symbol)(le.METAX)),k=(0,le.car)(M);le.DEBUG&&console.log(`template expression: ${k}`),c=(0,le.cadr)(M);let H=(0,le.cddr)(M);if(jp([le.Constants.one,...a],s,e,k,H))u=!0;else{le.DEBUG&&(console.log(`p3 at this point: ${e}`),console.log(`car(p3): ${(0,le.car)(e)}`));let X=[],Ie=e;for((0,le.iscons)(Ie)&&(X.push((0,le.car)(e)),Ie=(0,le.cdr)(e));(0,le.iscons)(Ie);){let at=(0,le.car)(Ie);Ie=(0,le.cdr)(Ie),le.DEBUG&&(console.log(`testing: ${at}`),console.log(`about to try to simplify other term: ${at}`));let[Ke,Fe]=Ap(at,(0,we.symbol)(le.NIL),r,s);u=u||Fe,X.push(Ke),le.DEBUG&&console.log(`tried to simplify other term: ${at} ...successful?: ${Fe} ...transformed: ${X[X.length-1]}`)}X.length!==0&&(c=(0,hA.makeList)(...X))}}}else for(let m of Array.from(r))if(le.DEBUG&&(console.log(`scanning table entry ${m}`),(m+"").indexOf("f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))")!==-1&&le.breakpoint),m){let R=(0,jA.scan_meta)(m),M=(0,le.cadr)(R);c=(0,le.caddr)(R);let k=(0,le.cdddr)(R);if(jp([le.Constants.one,...a],s,e,M,k)){u=!0;break}}let d=u?(0,Du.Eval)(c):s?e:(0,we.symbol)(le.NIL);return OA(n),[d,u]}function AA(){return{METAA:(0,we.get_binding)((0,we.symbol)(le.METAA)),METAB:(0,we.get_binding)((0,we.symbol)(le.METAB)),METAX:(0,we.get_binding)((0,we.symbol)(le.METAX))}}function OA(e){(0,we.set_binding)((0,we.symbol)(le.METAX),e.METAX),(0,we.set_binding)((0,we.symbol)(le.METAB),e.METAB),(0,we.set_binding)((0,we.symbol)(le.METAA),e.METAA)}function jp(e,t,r,s,n){for(let i of e){(0,we.set_binding)((0,we.symbol)(le.METAA),i),le.DEBUG&&console.log(`  binding METAA to ${(0,we.get_binding)((0,we.symbol)(le.METAA))}`);for(let a of e){(0,we.set_binding)((0,we.symbol)(le.METAB),a),le.DEBUG&&console.log(`  binding METAB to ${(0,we.get_binding)((0,we.symbol)(le.METAB))}`);let u=n;for(;(0,le.iscons)(u);){let d=(0,Du.Eval)((0,le.car)(u));if((0,hp.isZeroAtomOrTensor)(d))break;u=(0,le.cdr)(u)}if((0,le.iscons)(u))continue;let c=t?(0,le.noexpand)(Du.Eval,s):(0,Du.Eval)(s);if(le.DEBUG&&(console.log(`about to evaluate template expression: ${s} binding METAA to ${(0,we.get_binding)((0,we.symbol)(le.METAA))} and binding METAB to ${(0,we.get_binding)((0,we.symbol)(le.METAB))} and binding METAX to ${(0,we.get_binding)((0,we.symbol)(le.METAX))}`),console.log(`  comparing ${c} to: ${r}`)),(0,hp.isZeroAtomOrTensor)((0,vA.subtract)(r,c)))return le.DEBUG&&(console.log(`binding METAA to ${(0,we.get_binding)((0,we.symbol)(le.METAA))}`),console.log(`binding METAB to ${(0,we.get_binding)((0,we.symbol)(le.METAB))}`),console.log(`binding METAX to ${(0,we.get_binding)((0,we.symbol)(le.METAX))}`),console.log(`comparing ${r} to: ${s}`)),!0}}return!1}var le,we,vA,qA,EA,Du,hp,hA,jA,Tf,Nf=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.transform=void 0;le=(T(),o(N)),we=(U(),o(G)),vA=(_e(),o(pe)),qA=(If(),o(Mp)),EA=(Mf(),o(Ep)),Du=(F(),o(z)),hp=(K(),o(te)),hA=(se(),o(oe)),jA=(Xo(),o(On)),Tf=(Xr(),o(ns));exports.transform=Ap});var Np={};function RA(e){let t=(0,Sf.Eval)((0,Ye.cadr)(e)),r=Ye.Constants.one,s=(0,Rf.integer)(2);return(0,Ye.cddr)(e)!==(0,Li.symbol)(Ye.NIL)&&(r=(0,Sf.Eval)((0,Ye.caddr)(e)),s=(0,Sf.Eval)((0,Ye.cadddr)(e))),Ka(t,r,s)}function Ka(e,t,r){let s=0,n=Array(Ye.MAXDIM).fill(0),i=Array(Ye.MAXDIM).fill(0);if((0,Ye.isNumericAtom)(e)||((0,Dr.isplusone)(t)&&(0,Dr.isplustwo)(r)||(0,Dr.isplusone)(r)&&(0,Dr.isplustwo)(t))&&(0,Ye.isidentitymatrix)(e))return e;if((0,Ye.istranspose)(e)){let M=(0,Ye.car)((0,Ye.cdr)((0,Ye.cdr)(e))),k=(0,Ye.car)((0,Ye.cdr)((0,Ye.cdr)((0,Ye.cdr)(e))));if((0,wi.equal)(M,r)&&(0,wi.equal)(k,t)||(0,wi.equal)(k,r)&&(0,wi.equal)(M,t)||(0,wi.equal)(M,(0,Li.symbol)(Ye.NIL))&&(0,wi.equal)(k,(0,Li.symbol)(Ye.NIL))&&((0,Dr.isplusone)(r)&&(0,Dr.isplustwo)(t)||(0,Dr.isplusone)(t)&&(0,Dr.isplustwo)(r)))return(0,Ye.car)((0,Ye.cdr)(e))}if(Ye.defs.expanding&&(0,Ye.isadd)(e))return e.tail().reduce((M,k)=>(0,NA.add)(M,Ka(k,t,r)),Ye.Constants.zero);if(Ye.defs.expanding&&(0,Ye.ismultiply)(e))return e.tail().reduce((M,k)=>(0,SA.multiply)(M,Ka(k,t,r)),Ye.Constants.one);if(Ye.defs.expanding&&(0,Ye.isinnerordot)(e)){let M=[];return(0,Ye.iscons)(e)&&M.push(...e.tail().map(k=>[k,t,r])),M.reverse(),M.reduce((k,H)=>(0,IA.inner)(k,Ka(H[0],H[1],H[2])),(0,Li.symbol)(Ye.SYMBOL_IDENTITY_MATRIX))}if(!(0,Ye.istensor)(e))return(0,Dr.isZeroAtomOrTensor)(e)?Ye.Constants.zero:(!(0,Dr.isplusone)(t)||!(0,Dr.isplustwo)(r))&&(!(0,Dr.isplusone)(r)||!(0,Dr.isplustwo)(t))?(0,Tp.makeList)((0,Li.symbol)(Ye.TRANSPOSE),e,t,r):(0,Tp.makeList)((0,Li.symbol)(Ye.TRANSPOSE),e);let{ndim:a,nelem:u}=e.tensor;if(a===1)return e;let c=(0,Rf.nativeInt)(t),d=(0,Rf.nativeInt)(r);(c<1||c>a||d<1||d>a)&&(0,TA.stop)("transpose: index out of range"),c--,d--,t=(0,MA.alloc_tensor)(u),t.tensor.ndim=a,t.tensor.dim=[...e.tensor.dim],t.tensor.dim[c]=e.tensor.dim[d],t.tensor.dim[d]=e.tensor.dim[c];let m=e.tensor.elem,R=t.tensor.elem;for(let M=0;M<a;M++)n[M]=0,i[M]=e.tensor.dim[M];for(let M=0;M<u;M++){s=n[c],n[c]=n[d],n[d]=s,s=i[c],i[c]=i[d],i[d]=s;let k=0;for(let H=0;H<a;H++)k=k*i[H]+n[H];s=n[c],n[c]=n[d],n[d]=s,s=i[c],i[c]=i[d],i[d]=s,R[k]=m[M];for(let H=a-1;H>=0&&!(++n[H]<i[H]);H--)n[H]=0}return t}var MA,Ye,TA,Li,wi,NA,Rf,Sf,IA,Dr,Tp,SA,wf=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.transpose=exports.Eval_transpose=void 0;MA=(Ct(),o(Dt)),Ye=(T(),o(N)),TA=(Ae(),o(Me)),Li=(U(),o(G)),wi=(Le(),o(Pe)),NA=(_e(),o(pe)),Rf=(Y(),o(V)),Sf=(F(),o(z)),IA=(zo(),o(jn)),Dr=(K(),o(te)),Tp=(se(),o(oe)),SA=(Q(),o(W));exports.Eval_transpose=RA;exports.transpose=Ka});var Mn={};function zA(e){let t=wp((0,I.cadr)(e));return Jr((0,Sn.Eval)(t))}function wp(e){if(I.defs.userSimplificationsInListForm.length===0||(0,In.Find)(e,(0,rt.symbol)(I.INTEGRAL)))return e;I.DEBUG&&console.log(`runUserDefinedSimplifications passed: ${e}`);let t=(0,I.noexpand)(Sn.Eval,e);if(I.DEBUG){console.log(`runUserDefinedSimplifications after eval no expanding: ${t}`),console.log("patterns to be checked: ");for(let n of Array.from(I.defs.userSimplificationsInListForm))console.log(`...${n}`)}let r=!0,s=0;for(;r&&s<I.MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES;){r=!1,s++;for(let n of Array.from(I.defs.userSimplificationsInListForm)){let i=!0,a=0;for(;i&&a<I.MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE;)a++,I.DEBUG&&console.log(`simplify - checking pattern: ${n} on: ${t}`),[t,i]=(0,UA.transform)(t,(0,rt.symbol)(I.NIL),n,!0),i&&(r=!0),I.DEBUG&&console.log(`p1 at this stage of simplification: ${t}`);a===I.MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE&&(0,Cf.stop)(`maximum application of single transformation rule exceeded: ${n}`)}}return s===I.MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES&&(0,Cf.stop)("maximum application of all transformation rules exceeded "),I.DEBUG&&(console.log(`METAX = ${(0,rt.get_binding)((0,rt.symbol)(I.METAX))}`),console.log(`METAA = ${(0,rt.get_binding)((0,rt.symbol)(I.METAA))}`),console.log(`METAB = ${(0,rt.get_binding)((0,rt.symbol)(I.METAB))}`)),t}function YA(e){let t=wp(e);I.defs.codeGen=!0;let r=Jr(t);return I.defs.codeGen=!1,r}function Jr(e){if(I.defs.codeGen&&(0,I.car)(e)===(0,rt.symbol)(I.FUNCTION)){let t=(0,I.cadr)(e),r=Jr((0,Sn.Eval)(t)),s=(0,I.caddr)(e);e=(0,Rp.makeList)((0,rt.symbol)(I.FUNCTION),r,s)}if((0,I.istensor)(e))return VA(e);if((0,In.Find)(e,(0,rt.symbol)(I.FACTORIAL))){let t=(0,Ip.simfac)(e),r=(0,Ip.simfac)((0,Wo.rationalize)(e));e=(0,yt.count)(t)<(0,yt.count)(r)?t:r}if(e=QA(e),e=ZA(e),e=XA(e),e=HA(e),e=WA(e),e=Lp(e),e=KA(e),e=tO(e),I.do_simplify_nested_radicals){let t;if([t,e]=rO(e),t)return I.DEBUG&&console.log("de-nesting successful into: "+e.toString()),Jr(e)}return e=eO(e),e=Cp(e),e}function VA(e){let t=(0,wA.alloc_tensor)(e.tensor.nelem);return t.tensor.ndim=e.tensor.ndim,t.tensor.dim=Array.from(e.tensor.dim),t.tensor.elem=e.tensor.elem.map(Jr),(0,$A.check_tensor_dimensions)(t),(0,Gt.isZeroAtomOrTensor)(t)&&(t=I.Constants.zero),t}function ZA(e){if(!(0,I.isadd)(e))return e;let t=(0,Wo.rationalize)(e);return(0,yt.count)(t)<(0,yt.count)(e)&&(e=t),e}function XA(e){if(!(0,I.isadd)(e))return e;let t=(0,Df.Condense)(e);return(0,yt.count)(t)<=(0,yt.count)(e)&&(e=t),e}function HA(e){let t=(0,Wo.rationalize)((0,Ve.negate)((0,Wo.rationalize)((0,Ve.negate)((0,Wo.rationalize)(e)))));return(0,yt.count)(t)<(0,yt.count)(e)&&(e=t),e}function QA(e){let t=(0,I.car)(e);if((t===(0,rt.symbol)(I.MULTIPLY)||(0,I.isinnerordot)(e))&&(0,I.car)((0,I.car)((0,I.cdr)(e)))===(0,rt.symbol)(I.TRANSPOSE)&&(0,I.car)((0,I.car)((0,I.cdr)((0,I.cdr)(e))))===(0,rt.symbol)(I.TRANSPOSE)){I.DEBUG&&console.log(`maybe collecting a transpose ${e}`);let r=(0,I.cadr)((0,I.car)((0,I.cdr)(e))),s=(0,I.cadr)((0,I.car)((0,I.cdr)((0,I.cdr)(e)))),n;t===(0,rt.symbol)(I.MULTIPLY)?n=(0,Ve.multiply)(r,s):(0,I.isinnerordot)(e)?n=(0,CA.inner)(s,r):n=(0,Cf.stop)("f10: nothing to pop.");let i=(0,I.noexpand)(()=>(0,BA.transpose)(n,I.Constants.one,(0,$t.integer)(2)));(0,yt.count)(i)<(0,yt.count)(e)&&(e=i),I.DEBUG&&console.log(`collecting a transpose ${i}`)}return e}function WA(e){if((0,Gt.isZeroAtomOrTensor)(e))return e;let t=(0,Wo.rationalize)((0,Ve.inverse)((0,Wo.rationalize)((0,Ve.inverse)((0,Wo.rationalize)(e)))));return(0,yt.count)(t)<(0,yt.count)(e)&&(e=t),e}function JA(e){return Lp(e)}function Lp(e){if(!(0,In.Find)(e,(0,rt.symbol)(I.SIN))&&!(0,In.Find)(e,(0,rt.symbol)(I.COS)))return e;let t=e;I.defs.trigmode=1;let r=(0,Sn.Eval)(t);I.defs.trigmode=2;let s=(0,Sn.Eval)(t);return I.defs.trigmode=0,((0,yt.count)(s)<(0,yt.count)(r)||ku(s)<ku(r))&&(r=s),((0,yt.count)(r)<(0,yt.count)(e)||ku(r)<ku(e))&&(e=r),e}function KA(e){if(!(0,I.isadd)(e))return e;let t=(0,I.cdr)(e);return(0,I.iscons)(t)&&(t=[...t].reduce((r,s)=>Cp((0,mo.add)(r,Jr(s))),I.Constants.zero)),(0,yt.count)(t)<(0,yt.count)(e)&&(e=t),e}function Cp(e){var t,r,s,n,i;if(t=(0,GA.denominator)(e),(0,Gt.isone)(t)||(r=(0,FA.numerator)(e),(0,Gt.isone)(r))||!(n=(0,Sp.areunivarpolysfactoredorexpandedform)(r,t))||(i=(0,Lf.factor)((0,Sp.gcd)(r,t),n),(0,Gt.isone)(i)))return e;let a=(0,Lf.factor)(r,n),u=(0,Ve.inverse)(i),c=(0,Ve.multiply_noexpand)(a,u),d=Jr(c),m=(0,Lf.factor)(t,n),R=(0,Ve.multiply_noexpand)(m,u),M=Jr(R),k=(0,Ve.divide)(d,M);return s=(0,Df.Condense)(k),(0,yt.count)(s)<(0,yt.count)(e)?s:e}function eO(e){let t;return!(0,In.Find)(e,(0,rt.symbol)(I.SIN))&&!(0,In.Find)(e,(0,rt.symbol)(I.COS))||(t=(0,LA.clockform)((0,Sn.Eval)(e)),I.DEBUG&&console.log(`before simplification clockform: ${e} after: ${t}`),(0,yt.count)(t)<(0,yt.count)(e)&&(e=t)),e}function tO(e){let t=Pf(e),r=(0,Sn.Eval)(t);return(0,yt.count)(r)<(0,yt.count)(e)&&(e=r),e}function Pf(e){if((0,Gt.isimaginaryunit)(e))return e;if((0,Ci.equal)((0,I.car)(e),(0,rt.symbol)(I.POWER))&&(0,Gt.isminusone)((0,I.cadr)(e))){let t=(0,Ve.negate)(I.Constants.one),r=Pf((0,I.caddr)(e));return(0,DA.rect)((0,PA.polar)((0,ms.power)(t,r)))}else return(0,I.iscons)(e)?e.map(Pf):e}function ku(e){return(0,I.isadd)(e)?(0,Ci.length)(e)-1:1}function rO(e){if(I.defs.recursionLevelNestedRadicalsRemoval>0)return I.DEBUG&&console.log("denesting bailing out because of too much recursion"),[!1,e];let[t,r]=$u(e),s=(0,I.noexpand)(Df.yycondense,t);return e=(0,yt.countOccurrencesOfSymbol)((0,rt.symbol)(I.POWER),t)<(0,yt.countOccurrencesOfSymbol)((0,rt.symbol)(I.POWER),s)?t:s,[r,e]}function $u(e){return I.defs.recursionLevelNestedRadicalsRemoval>0?(I.DEBUG&&console.log("denesting bailing out because of too much recursion"),[e,!1]):(0,Ci.equal)((0,I.car)(e),(0,rt.symbol)(I.POWER))?sO(e):(0,I.iscons)(e)?nO(e):[e,!1]}function sO(e){let t=(0,I.cadr)(e),r=(0,I.caddr)(e);if((0,Gt.isminusone)(r)||!(0,Ci.equal)((0,I.car)(t),(0,rt.symbol)(I.ADD))||!(0,Gt.isfraction)(r)||!(0,Gt.equalq)(r,1,3)&&!(0,Gt.equalq)(r,1,2))return[e,!1];let s=(0,I.cadr)(t);$u(s);let n=(0,I.caddr)(t);$u(n);let i=0,a=t;for(;(0,I.cdr)(a)!==(0,rt.symbol)(I.NIL);)i++,a=(0,I.cdr)(a);if(i>2)return[e,!1];let{commonBases:u,termsThatAreNotPowers:c}=oO(n);if(u.length===0)return[e,!1];let d=s,m=u.reduce(Ve.multiply,I.Constants.one),R=c.reduce(Ve.multiply,I.Constants.one),M;if((0,Gt.equalq)(r,1,3)){let Fe=(0,Ve.divide)((0,Ve.multiply)((0,Ve.negate)(d),m),R),ft=(0,$t.nativeDouble)((0,Tn.yyfloat)((0,Nn.real)(Fe)));if(Math.abs(ft)>Math.pow(2,32))return[e,!1];let Se=(0,Ve.multiply)((0,$t.integer)(3),m),dt=(0,$t.nativeDouble)((0,Tn.yyfloat)((0,Nn.real)(Se)));if(Math.abs(dt)>Math.pow(2,32))return[e,!1];let ir=(0,Ve.multiply)(Se,(0,rt.symbol)(I.SECRETX)),Ft=(0,Ve.divide)((0,Ve.multiply)((0,$t.integer)(-3),d),R),qr=(0,$t.nativeDouble)((0,Tn.yyfloat)((0,Nn.real)(Ft)));if(Math.abs(qr)>Math.pow(2,32))return[e,!1];M=(0,mo.add_all)([Fe,ir,(0,Ve.multiply)(Ft,(0,ms.power)((0,rt.symbol)(I.SECRETX),(0,$t.integer)(2))),(0,Ve.multiply)(I.Constants.one,(0,ms.power)((0,rt.symbol)(I.SECRETX),(0,$t.integer)(3)))])}else if((0,Gt.equalq)(r,1,2)){let Fe=(0,$t.nativeDouble)((0,Tn.yyfloat)((0,Nn.real)(m)));if(Math.abs(Fe)>Math.pow(2,32))return[e,!1];let ft=(0,Ve.divide)((0,Ve.multiply)((0,$t.integer)(-2),d),R),Se=(0,$t.nativeDouble)((0,Tn.yyfloat)((0,Nn.real)(ft)));if(Math.abs(Se)>Math.pow(2,32))return[e,!1];M=(0,mo.add)(m,(0,mo.add)((0,Ve.multiply)(ft,(0,rt.symbol)(I.SECRETX)),(0,Ve.multiply)(I.Constants.one,(0,ms.power)((0,rt.symbol)(I.SECRETX),(0,$t.integer)(2)))))}I.defs.recursionLevelNestedRadicalsRemoval++;let k=(0,kA.roots)(M,(0,rt.symbol)(I.SECRETX));if(I.defs.recursionLevelNestedRadicalsRemoval--,(0,Ci.equal)(k,(0,rt.symbol)(I.NIL)))return I.DEBUG&&console.log("roots bailed out because of too much recursion"),[e,!1];let H=k.elem.filter(Fe=>!(0,In.Find)(Fe,(0,rt.symbol)(I.POWER)));if(H.length===0)return[e,!1];let X=[],Ie=[];for(let Fe of Array.from(H)){let ft=(0,$t.nativeDouble)((0,Tn.yyfloat)((0,Nn.real)(Fe)));X.push(Fe),Ie.push(ft)}let at=Ie.indexOf(Math.max.apply(Math,Ie)),Ke=X[at];if(!(0,Gt.equalq)(r,1,3)&&!(0,Gt.equalq)(r,1,2))return[e,!1];if((0,Gt.equalq)(r,1,3)){let Fe=(0,ms.power)((0,Ve.divide)(d,(0,mo.add)((0,ms.power)(Ke,(0,$t.integer)(3)),(0,Ve.multiply)((0,Ve.multiply)((0,$t.integer)(3),m),Ke))),(0,$t.rational)(1,3)),ft=(0,Ve.multiply)(Fe,Ke);return[Jr((0,mo.add)((0,Ve.multiply)(Fe,(0,ms.power)(m,(0,$t.rational)(1,2))),ft)),!0]}if((0,Gt.equalq)(r,1,2)){let Fe=(0,ms.power)((0,Ve.divide)(d,(0,mo.add)((0,ms.power)(Ke,(0,$t.integer)(2)),m)),(0,$t.rational)(1,2)),ft=(0,Ve.multiply)(Fe,Ke),Se=Jr((0,mo.add)((0,Ve.multiply)(Fe,(0,ms.power)(m,(0,$t.rational)(1,2))),ft)),dt=(0,Tn.yyfloat)((0,Nn.real)(Se));return(0,Gt.isnegativenumber)(dt)?[Jr((0,mo.add)((0,Ve.multiply)((0,Ve.negate)(Fe),(0,ms.power)(m,(0,$t.rational)(1,2))),(0,Ve.negate)(ft))),!0]:[Se,!0]}return[null,!0]}function oO(e){let t=null,r=[],s=[];if((0,I.ismultiply)(e)){let n=(0,I.cdr)(e);if((0,I.iscons)(n))for(;(0,I.iscons)(n);){let i=(0,I.car)(n);if((0,I.ispower)(i)){let a=(0,I.cadr)(i),u=(0,I.caddr)(i);(0,Gt.equalq)(u,1,2)&&(t==null?(t=u,r.push(a)):(0,Ci.equal)(u,t)&&r.push(a))}else s.push(i);n=(0,I.cdr)(n)}}else if((0,I.ispower)(e)){let n=(0,I.cadr)(e),i=(0,I.caddr)(e);t==null&&(0,Gt.equalq)(i,1,2)&&(t=i,r.push(n))}return{commonBases:r,termsThatAreNotPowers:s}}function nO(e){let t=!1,r=[];if((0,I.iscons)(e)){let s=Array.from(e).map(n=>{if(!t){let i;return[i,t]=$u(n),i}return n});r.push(...s)}return[(0,Rp.makeList)(...r),t]}var wA,yt,I,In,Cf,rt,mo,$t,LA,Df,Sn,Tn,CA,Gt,Rp,Ci,Ve,PA,ms,Wo,Nn,DA,kA,Ip,$A,UA,BA,GA,Sp,Lf,FA,Ho=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.simplify_trig=exports.simplify=exports.simplifyForCodeGeneration=exports.Eval_simplify=void 0;wA=(Ct(),o(Dt)),yt=(wu(),o(jf)),I=(T(),o(N)),In=(ar(),o(xr)),Cf=(Ae(),o(Me)),rt=(U(),o(G)),mo=(_e(),o(pe)),$t=(Y(),o(V)),LA=(Xl(),o(a0)),Df=(Ta(),o(iu)),Sn=(F(),o(z)),Tn=(Ls(),o(_o)),CA=(zo(),o(jn)),Gt=(K(),o(te)),Rp=(se(),o(oe)),Ci=(Le(),o(Pe)),Ve=(Q(),o(W)),PA=(Hl(),o(u0)),ms=(At(),o(Mt)),Wo=(Na(),o(lu)),Nn=(Ei(),o(Ra)),DA=(Ks(),o(Co)),kA=(Af(),o(mp)),Ip=(bp(),o(dA)),$A=(jt(),o(Ot)),UA=(Nf(),o(Op)),BA=(wf(),o(Np)),GA=(Ns(),o(eo)),Sp=(_n(),o(li)),Lf=(ha(),o(Wl)),FA=(no(),o($o));exports.Eval_simplify=zA;exports.simplifyForCodeGeneration=YA;exports.simplify=Jr;exports.simplify_trig=JA});var Bu={};function xO(e){let t=0;e=(0,be.cdr)(e);let r=(0,Rn.Eval)((0,be.car)(e));e=(0,be.cdr)(e);let s=(0,Rn.Eval)((0,be.car)(e)),n,i;for(s===(0,Cs.symbol)(be.NIL)?(i=(0,Pp.guess)(r),n=(0,Cs.symbol)(be.NIL)):(0,be.isNumericAtom)(s)?(i=(0,Pp.guess)(r),n=s):(i=s,e=(0,be.cdr)(e),n=(0,Rn.Eval)((0,be.car)(e)));;){(0,be.isNumericAtom)(n)?(t=(0,$p.nativeInt)(n),isNaN(t)&&(0,kp.stop)("nth integral: check n")):t=1;let a=r;if(t>=0)for(let u=0;u<t;u++)a=Uu(a,i);else{t=-t;for(let u=0;u<t;u++)a=(0,lO.derivative)(a,i)}if(r=a,n===(0,Cs.symbol)(be.NIL))break;if((0,be.isNumericAtom)(n)){if(e=(0,be.cdr)(e),n=(0,Rn.Eval)((0,be.car)(e)),n===(0,Cs.symbol)(be.NIL))break;(0,be.isNumericAtom)(n)||(i=n,e=(0,be.cdr)(e),n=(0,Rn.Eval)((0,be.car)(e)))}else i=n,e=(0,be.cdr)(e),n=(0,Rn.Eval)((0,be.car)(e))}return r}function Uu(e,t){let r;return(0,be.isadd)(e)?r=pO(e,t):(0,be.ismultiply)(e)?r=bO(e,t):r=Up(e,t),(0,Pi.Find)(r,(0,Cs.symbol)(be.INTEGRAL))&&(0,kp.stop)("integral: sorry, could not find a solution"),(0,Rn.Eval)((0,dO.simplify)(r))}function pO(e,t){e=(0,be.cdr)(e);let r=Uu((0,be.car)(e),t);return(0,be.iscons)(e)&&(r=e.tail().reduce((s,n)=>(0,aO.add)(s,Uu(n,t)),r)),r}function bO(e,t){let[r,s]=(0,cO.partition)(e,t);return(0,uO.multiply)(r,Up(s,t))}function Up(e,t){let r=wn(e,t).toFixed(6),s=EO[r];if(!s)return(0,Dp.makeList)((0,Cs.symbol)(be.INTEGRAL),e,t);let[n,i]=(0,_O.transform)(e,t,s,!1);return n===(0,Cs.symbol)(be.NIL)?(0,Dp.makeList)((0,Cs.symbol)(be.INTEGRAL),e,t):n}function wn(e,t){if((0,be.issymbol)(e))return(0,iO.equal)(e,t)?Ps.x:Ps.constant;if((0,be.iscons)(e)){let s=(0,be.car)(e);switch((0,be.issymbol)(s)&&s.printname){case be.ADD:return yO((0,be.cdr)(e),t);case be.MULTIPLY:return vO((0,be.cdr)(e),t);case be.POWER:return kf((0,be.cadr)(e),(0,be.caddr)(e),t);case be.EXP:return kf((0,Cs.symbol)(be.E),(0,be.cadr)(e),t);case be.SQRT:var r=(0,$p.double)(.5);return kf((0,be.cadr)(e),r,t);default:return gO(e,t)}}return Ps.constant}function gO(e,t){if(!(0,Pi.Find)((0,be.cadr)(e),t))return Ps.constant;let r=(0,be.car)(e),s=wn((0,be.cadr)(e),t),n=Ps[r.printname];if(!n)throw new Error("Unsupported function "+r.printname);return Math.pow(n,s)}function yO(e,t){let r={};for(;(0,be.iscons)(e);){let n=(0,be.car)(e);e=(0,be.cdr)(e);let i=0;(0,Pi.Find)(n,t)?i=wn(n,t):i=Ps.constant,r[i.toFixed(6)]=!0}let s=0;for(let n of Object.keys(r||{})){let i=r[n];s=s+Number(n)}return s}function vO(e,t){let r=1;return(0,be.iscons)(e)&&[...e].forEach(s=>{(0,Pi.Find)(s,t)&&(r=r*wn(s,t))}),r}function kf(e,t,r){let s=Ps.constant,n=Ps.constexp;if((0,Pi.Find)(e,r)&&(s=wn(e,r)),(0,Pi.Find)(t,r))n=wn(t,r);else{if(s===Ps.constant)return Ps.constant;(0,el.isminusone)(t)?n=-1:(0,el.isoneovertwo)(t)?n=.5:(0,el.isminusoneovertwo)(t)?n=-.5:(0,el.equalq)(t,2,1)?n=2:(0,el.equalq)(t,-2,1)&&(n=-2)}return Math.pow(s,n)}function qO(){let e={};for(let t of Array.from(mO)){let r=(0,fO.scan_meta)(t),s=(0,be.cadr)(r),i=wn(s,(0,Cs.symbol)(be.METAX)).toFixed(6);e[i]||(e[i]=[]),e[i].push(t)}return console.log(`hashed_itab = ${JSON.stringify(e,null,2)}`),e}var be,Pi,kp,Cs,iO,aO,$p,lO,Rn,Pp,el,Dp,uO,cO,fO,dO,_O,mO,Ps,EO,tl=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.make_hashed_itab=exports.integral=exports.Eval_integral=void 0;be=(T(),o(N)),Pi=(ar(),o(xr)),kp=(Ae(),o(Me)),Cs=(U(),o(G)),iO=(Le(),o(Pe)),aO=(_e(),o(pe)),$p=(Y(),o(V)),lO=(Ln(),o(Di)),Rn=(F(),o(z)),Pp=(Hr(),o(us)),el=(K(),o(te)),Dp=(se(),o(oe)),uO=(Q(),o(W)),cO=(rp(),o(q2)),fO=(Xo(),o(On)),dO=(Ho(),o(Mn)),_O=(Nf(),o(Op)),mO=["f(a,a*x)","f(1/x,log(x))","f(x^a,x^(a+1)/(a+1))","f(x^(-2),-x^(-1))","f(x^(-1/2),2*x^(1/2))","f(x^(1/2),2/3*x^(3/2))","f(x,x^2/2)","f(x^2,x^3/3)","f(exp(a*x),1/a*exp(a*x))","f(exp(a*x+b),1/a*exp(a*x+b))","f(x*exp(a*x^2),exp(a*x^2)/(2*a))","f(x*exp(a*x^2+b),exp(a*x^2+b)/(2*a))","f(log(a*x),x*log(a*x)-x)","f(a^x,a^x/log(a),or(not(number(a)),a>0))","f(1/(a+x^2),1/sqrt(a)*arctan(x/sqrt(a)),or(not(number(a)),a>0))","f(1/(a-x^2),1/sqrt(a)*arctanh(x/sqrt(a)))","f(1/sqrt(a-x^2),arcsin(x/(sqrt(a))))","f(1/sqrt(a+x^2),log(x+sqrt(a+x^2)))","f(1/(a+b*x),1/b*log(a+b*x))","f(1/(a+b*x)^2,-1/(b*(a+b*x)))","f(1/(a+b*x)^3,-1/(2*b)*1/(a+b*x)^2)","f(x/(a+b*x),x/b-a*log(a+b*x)/b/b)","f(x/(a+b*x)^2,1/b^2*(log(a+b*x)+a/(a+b*x)))","f(x^2/(a+b*x),1/b^2*(1/2*(a+b*x)^2-2*a*(a+b*x)+a^2*log(a+b*x)))","f(x^2/(a+b*x)^2,1/b^3*(a+b*x-2*a*log(a+b*x)-a^2/(a+b*x)))","f(x^2/(a+b*x)^3,1/b^3*(log(a+b*x)+2*a/(a+b*x)-1/2*a^2/(a+b*x)^2))","f(1/x*1/(a+b*x),-1/a*log((a+b*x)/x))","f(1/x*1/(a+b*x)^2,1/a*1/(a+b*x)-1/a^2*log((a+b*x)/x))","f(1/x*1/(a+b*x)^3,1/a^3*(1/2*((2*a+b*x)/(a+b*x))^2+log(x/(a+b*x))))","f(1/x^2*1/(a+b*x),-1/(a*x)+b/a^2*log((a+b*x)/x))","f(1/x^3*1/(a+b*x),(2*b*x-a)/(2*a^2*x^2)+b^2/a^3*log(x/(a+b*x)))","f(1/x^2*1/(a+b*x)^2,-(a+2*b*x)/(a^2*x*(a+b*x))+2*b/a^3*log((a+b*x)/x))","f(1/(a+b*x^2),1/sqrt(a*b)*arctan(x*sqrt(a*b)/a),or(not(number(a*b)),a*b>0))","f(1/(a+b*x^2),1/(2*sqrt(-a*b))*log((a+x*sqrt(-a*b))/(a-x*sqrt(-a*b))),or(not(number(a*b)),a*b<0))","f(x/(a+b*x^2),1/2*1/b*log(a+b*x^2))","f(x^2/(a+b*x^2),x/b-a/b*integral(1/(a+b*x^2),x))","f(1/(a+b*x^2)^2,x/(2*a*(a+b*x^2))+1/2*1/a*integral(1/(a+b*x^2),x))","f(1/x*1/(a+b*x^2),1/2*1/a*log(x^2/(a+b*x^2)))","f(1/x^2*1/(a+b*x^2),-1/(a*x)-b/a*integral(1/(a+b*x^2),x))","f(1/(a+b*x^3),1/3*1/a*(a/b)^(1/3)*(1/2*log(((a/b)^(1/3)+x)^3/(a+b*x^3))+sqrt(3)*arctan((2*x-(a/b)^(1/3))*(a/b)^(-1/3)/sqrt(3))))","f(x^2/(a+b*x^3),1/3*1/b*log(a+b*x^3))","f(x/(a+b*x^4),1/2*sqrt(b/a)/b*arctan(x^2*sqrt(b/a)),or(not(number(a*b)),a*b>0))","f(x/(a+b*x^4),1/4*sqrt(-b/a)/b*log((x^2-sqrt(-a/b))/(x^2+sqrt(-a/b))),or(not(number(a*b)),a*b<0))","f(x^3/(a+b*x^4),1/4*1/b*log(a+b*x^4))","f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))","f(x*sqrt(a+b*x),-2*(2*a-3*b*x)*sqrt((a+b*x)^3)/15/b^2)","f(x^2*sqrt(a+b*x),2*(8*a^2-12*a*b*x+15*b^2*x^2)*sqrt((a+b*x)^3)/105/b^3)","f(sqrt(a+b*x)/x,2*sqrt(a+b*x)+a*integral(1/x*1/sqrt(a+b*x),x))","f(sqrt(a+b*x)/x^2,-sqrt(a+b*x)/x+b/2*integral(1/x*1/sqrt(a+b*x),x))","f(1/sqrt(a+b*x),2*sqrt(a+b*x)/b)","f(x/sqrt(a+b*x),-2/3*(2*a-b*x)*sqrt(a+b*x)/b^2)","f(x^2/sqrt(a+b*x),2/15*(8*a^2-4*a*b*x+3*b^2*x^2)*sqrt(a+b*x)/b^3)","f(1/x*1/sqrt(a+b*x),1/sqrt(a)*log((sqrt(a+b*x)-sqrt(a))/(sqrt(a+b*x)+sqrt(a))),or(not(number(a)),a>0))","f(1/x*1/sqrt(a+b*x),2/sqrt(-a)*arctan(sqrt(-(a+b*x)/a)),or(not(number(a)),a<0))","f(1/x^2*1/sqrt(a+b*x),-sqrt(a+b*x)/a/x-1/2*b/a*integral(1/x*1/sqrt(a+b*x),x))","f(sqrt(x^2+a),1/2*(x*sqrt(x^2+a)+a*log(x+sqrt(x^2+a))))","f(1/sqrt(x^2+a),log(x+sqrt(x^2+a)))","f(1/x*1/sqrt(x^2+a),arcsec(x/sqrt(-a))/sqrt(-a),or(not(number(a)),a<0))","f(1/x*1/sqrt(x^2+a),-1/sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(-a)*arcsec(x/sqrt(-a)),or(not(number(a)),a<0))","f(x/sqrt(x^2+a),sqrt(x^2+a))","f(x*sqrt(x^2+a),1/3*sqrt((x^2+a)^3))","f(sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2+a^(1/3))^3)+3/2*a^(1/3)*x*sqrt(x^2+a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2+a^(1/3)))))","f(sqrt(-a+x^6-3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2-a^(1/3))^3)-3/2*a^(1/3)*x*sqrt(x^2-a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2-a^(1/3)))))","f(1/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),x/a^(1/3)/sqrt(x^2+a^(1/3)))","f(x/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),-1/sqrt(x^2+a^(1/3)))","f(x*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/5*sqrt((x^2+a^(1/3))^5))","f(x^2*sqrt(x^2+a),1/4*x*sqrt((x^2+a)^3)-1/8*a*x*sqrt(x^2+a)-1/8*a^2*log(x+sqrt(x^2+a)))","f(x^3*sqrt(x^2+a),(1/5*x^2-2/15*a)*sqrt((x^2+a)^3),and(number(a),a>0))","f(x^3*sqrt(x^2+a),sqrt((x^2+a)^5)/5-a*sqrt((x^2+a)^3)/3,and(number(a),a<0))","f(x^2/sqrt(x^2+a),1/2*x*sqrt(x^2+a)-1/2*a*log(x+sqrt(x^2+a)))","f(x^3/sqrt(x^2+a),1/3*sqrt((x^2+a)^3)-a*sqrt(x^2+a))","f(1/x^2*1/sqrt(x^2+a),-sqrt(x^2+a)/a/x)","f(1/x^3*1/sqrt(x^2+a),-1/2*sqrt(x^2+a)/a/x^2+1/2*log((sqrt(a)+sqrt(x^2+a))/x)/a^(3/2),or(not(number(a)),a>0))","f(1/x^3*1/sqrt(x^2-a),1/2*sqrt(x^2-a)/a/x^2+1/2*1/(a^(3/2))*arcsec(x/(a^(1/2))),or(not(number(a)),a>0))","f(x^2*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/6*x*sqrt((x^2+a^(1/3))^5)-1/24*a^(1/3)*x*sqrt((x^2+a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2+a^(1/3))-1/16*a*log(x+sqrt(x^2+a^(1/3))),or(not(number(a)),a>0))","f(x^2*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/6*x*sqrt((x^2-a^(1/3))^5)+1/24*a^(1/3)*x*sqrt((x^2-a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2-a^(1/3))+1/16*a*log(x+sqrt(x^2-a^(1/3))),or(not(number(a)),a>0))","f(x^3*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/7*sqrt((x^2+a^(1/3))^7)-1/5*a^(1/3)*sqrt((x^2+a^(1/3))^5),or(not(number(a)),a>0))","f(x^3*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/7*sqrt((x^2-a^(1/3))^7)+1/5*a^(1/3)*sqrt((x^2-a^(1/3))^5),or(not(number(a)),a>0))","f(1/(x-a)/sqrt(x^2-a^2),-sqrt(x^2-a^2)/a/(x-a))","f(1/(x+a)/sqrt(x^2-a^2),sqrt(x^2-a^2)/a/(x+a))","f(sqrt(a-x^2),1/2*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(abs(a)))))","f(1/x*1/sqrt(a-x^2),-1/sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x,sqrt(a-x^2)-sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))","f(x/sqrt(a-x^2),-sqrt(a-x^2))","f(x*sqrt(a-x^2),-1/3*sqrt((a-x^2)^3))","f(x^2*sqrt(a-x^2),-x/4*sqrt((a-x^2)^3)+1/8*a*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(a))),or(not(number(a)),a>0))","f(x^3*sqrt(a-x^2),(-1/5*x^2-2/15*a)*sqrt((a-x^2)^3),or(not(number(a)),a>0))","f(x^2/sqrt(a-x^2),-x/2*sqrt(a-x^2)+a/2*arcsin(x/sqrt(a)),or(not(number(a)),a>0))","f(1/x^2*1/sqrt(a-x^2),-sqrt(a-x^2)/a/x,or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^2,-sqrt(a-x^2)/x-arcsin(x/sqrt(a)),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^3,-1/2*sqrt(a-x^2)/x^2+1/2*log((sqrt(a)+sqrt(a-x^2))/x)/sqrt(a),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^4,-1/3*sqrt((a-x^2)^3)/a/x^3,or(not(number(a)),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*log(x*sqrt(a)+sqrt(a*x^2+b))/2/sqrt(a),and(number(a),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*arcsin(x*sqrt(-a/b))/2/sqrt(-a),and(number(a),a<0))","f(sin(a*x),-cos(a*x)/a)","f(cos(a*x),sin(a*x)/a)","f(tan(a*x),-log(cos(a*x))/a)","f(1/tan(a*x),log(sin(a*x))/a)","f(1/cos(a*x),log(tan(pi/4+a*x/2))/a)","f(1/sin(a*x),log(tan(a*x/2))/a)","f(sin(a*x)^2,x/2-sin(2*a*x)/(4*a))","f(sin(a*x)^3,-cos(a*x)*(sin(a*x)^2+2)/(3*a))","f(sin(a*x)^4,3/8*x-sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))","f(cos(a*x)^2,x/2+sin(2*a*x)/(4*a))","f(cos(a*x)^3,sin(a*x)*(cos(a*x)^2+2)/(3*a))","f(cos(a*x)^4,3/8*x+sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))","f(1/sin(a*x)^2,-1/(a*tan(a*x)))","f(1/cos(a*x)^2,tan(a*x)/a)","f(sin(a*x)*cos(a*x),sin(a*x)^2/(2*a))","f(sin(a*x)^2*cos(a*x)^2,-sin(4*a*x)/(32*a)+x/8)","f(sin(a*x)/cos(a*x)^2,1/(a*cos(a*x)))","f(sin(a*x)^2/cos(a*x),(log(tan(pi/4+a*x/2))-sin(a*x))/a)","f(cos(a*x)/sin(a*x)^2,-1/(a*sin(a*x)))","f(1/(sin(a*x)*cos(a*x)),log(tan(a*x))/a)","f(1/(sin(a*x)*cos(a*x)^2),(1/cos(a*x)+log(tan(a*x/2)))/a)","f(1/(sin(a*x)^2*cos(a*x)),(log(tan(pi/4+a*x/2))-1/sin(a*x))/a)","f(1/(sin(a*x)^2*cos(a*x)^2),-2/(a*tan(2*a*x)))","f(sin(a+b*x),-cos(a+b*x)/b)","f(cos(a+b*x),sin(a+b*x)/b)","f(1/(b+b*sin(a*x)),-tan(pi/4-a*x/2)/a/b)","f(1/(b-b*sin(a*x)),tan(pi/4+a*x/2)/a/b)","f(1/(b+b*cos(a*x)),tan(a*x/2)/a/b)","f(1/(b-b*cos(a*x)),-1/tan(a*x/2)/a/b)","f(1/(a+b*sin(x)),1/sqrt(b^2-a^2)*log((a*tan(x/2)+b-sqrt(b^2-a^2))/(a*tan(x/2)+b+sqrt(b^2-a^2))),b^2-a^2)","f(1/(a+b*cos(x)),1/sqrt(b^2-a^2)*log((sqrt(b^2-a^2)*tan(x/2)+a+b)/(sqrt(b^2-a^2)*tan(x/2)-a-b)),b^2-a^2)","f(x*sin(a*x),sin(a*x)/a^2-x*cos(a*x)/a)","f(x^2*sin(a*x),2*x*sin(a*x)/a^2-(a^2*x^2-2)*cos(a*x)/a^3)","f(x*cos(a*x),cos(a*x)/a^2+x*sin(a*x)/a)","f(x^2*cos(a*x),2*x*cos(a*x)/a^2+(a^2*x^2-2)*sin(a*x)/a^3)","f(arcsin(a*x),x*arcsin(a*x)+sqrt(1-a^2*x^2)/a)","f(arccos(a*x),x*arccos(a*x)-sqrt(1-a^2*x^2)/a)","f(arctan(a*x),x*arctan(a*x)-1/2*log(1+a^2*x^2)/a)","f(x*log(a*x),x^2*log(a*x)/2-x^2/4)","f(x^2*log(a*x),x^3*log(a*x)/3-1/9*x^3)","f(log(x)^2,x*log(x)^2-2*x*log(x)+2*x)","f(1/x*1/(a+log(x)),log(a+log(x)))","f(log(a*x+b),(a*x+b)*log(a*x+b)/a-x)","f(log(a*x+b)/x^2,a/b*log(x)-(a*x+b)*log(a*x+b)/b/x)","f(sinh(x),cosh(x))","f(cosh(x),sinh(x))","f(tanh(x),log(cosh(x)))","f(x*sinh(x),x*cosh(x)-sinh(x))","f(x*cosh(x),x*sinh(x)-cosh(x))","f(sinh(x)^2,sinh(2*x)/4-x/2)","f(tanh(x)^2,x-tanh(x))","f(cosh(x)^2,sinh(2*x)/4+x/2)","f(x^3*exp(a*x^2),exp(a*x^2)*(x^2/a-1/(a^2))/2)","f(x^3*exp(a*x^2+b),exp(a*x^2)*exp(b)*(x^2/a-1/(a^2))/2)","f(exp(a*x^2),-i*sqrt(pi)*erf(i*sqrt(a)*x)/sqrt(a)/2)","f(erf(a*x),x*erf(a*x)+exp(-a^2*x^2)/a/sqrt(pi))","f(x^2*(1-x^2)^(3/2),(x*sqrt(1-x^2)*(-8*x^4+14*x^2-3)+3*arcsin(x))/48)","f(x^2*(1-x^2)^(5/2),(x*sqrt(1-x^2)*(48*x^6-136*x^4+118*x^2-15)+15*arcsin(x))/384)","f(x^4*(1-x^2)^(3/2),(-x*sqrt(1-x^2)*(16*x^6-24*x^4+2*x^2+3)+3*arcsin(x))/128)","f(x*exp(a*x),exp(a*x)*(a*x-1)/(a^2))","f(x*exp(a*x+b),exp(a*x+b)*(a*x-1)/(a^2))","f(x^2*exp(a*x),exp(a*x)*(a^2*x^2-2*a*x+2)/(a^3))","f(x^2*exp(a*x+b),exp(a*x+b)*(a^2*x^2-2*a*x+2)/(a^3))","f(x^3*exp(a*x),exp(a*x)*x^3/a-3/a*integral(x^2*exp(a*x),x))","f(x^3*exp(a*x+b),exp(a*x+b)*x^3/a-3/a*integral(x^2*exp(a*x+b),x))"];exports.Eval_integral=xO;exports.integral=Uu;Ps={x:.95532,constexp:1.43762,constant:1.1441659362941434,constbase:1.2036412230421882,sin:1.7330548251830322,arcsin:1.6483368529465805,cos:1.0586721236863401,arccos:1.8405225918106694,tan:1.1224943776292506,arctan:1.1297397925394963,sinh:1.8176164926060079,cosh:1.9404934661708022,tanh:1.6421307715103122,log:1.477443701354924,erf:1.0825269225702916};exports.make_hashed_itab=qO;EO={"1.144166":["f(a,a*x)"],"1.046770":["f(1/x,log(x))"],"0.936400":["f(x^a,x^(a+1)/(a+1))"],"1.095727":["f(x^(-2),-x^(-1))"],"1.023118":["f(x^(-1/2),2*x^(1/2))"],"0.977405":["f(x^(1/2),2/3*x^(3/2))"],"0.955320":["f(x,x^2/2)"],"0.912636":["f(x^2,x^3/3)"],"1.137302":["f(exp(a*x),1/a*exp(a*x))","f(a^x,a^x/log(a),or(not(number(a)),a>0))"],"1.326774":["f(exp(a*x+b),1/a*exp(a*x+b))"],"1.080259":["f(x*exp(a*x^2),exp(a*x^2)/(2*a))"],"1.260228":["f(x*exp(a*x^2+b),exp(a*x^2+b)/(2*a))"],"1.451902":["f(log(a*x),x*log(a*x)-x)"],"0.486192":["f(1/(a+x^2),1/sqrt(a)*arctan(x/sqrt(a)),or(not(number(a)),a>0))","f(1/(a-x^2),1/sqrt(a)*arctanh(x/sqrt(a)))","f(1/(a+b*x^2),1/sqrt(a*b)*arctan(x*sqrt(a*b)/a),or(not(number(a*b)),a*b>0))","f(1/(a+b*x^2),1/(2*sqrt(-a*b))*log((a+x*sqrt(-a*b))/(a-x*sqrt(-a*b))),or(not(number(a*b)),a*b<0))"],"0.697274":["f(1/sqrt(a-x^2),arcsin(x/(sqrt(a))))","f(1/sqrt(a+x^2),log(x+sqrt(a+x^2)))","f(1/sqrt(x^2+a),log(x+sqrt(x^2+a)))"],"0.476307":["f(1/(a+b*x),1/b*log(a+b*x))"],"0.226868":["f(1/(a+b*x)^2,-1/(b*(a+b*x)))"],"2.904531":["f(1/(a+b*x)^3,-1/(2*b)*1/(a+b*x)^2)"],"0.455026":["f(x/(a+b*x),x/b-a*log(a+b*x)/b/b)"],"0.216732":["f(x/(a+b*x)^2,1/b^2*(log(a+b*x)+a/(a+b*x)))"],"0.434695":["f(x^2/(a+b*x),1/b^2*(1/2*(a+b*x)^2-2*a*(a+b*x)+a^2*log(a+b*x)))"],"0.207048":["f(x^2/(a+b*x)^2,1/b^3*(a+b*x-2*a*log(a+b*x)-a^2/(a+b*x)))"],"2.650781":["f(x^2/(a+b*x)^3,1/b^3*(log(a+b*x)+2*a/(a+b*x)-1/2*a^2/(a+b*x)^2))"],"0.498584":["f(1/x*1/(a+b*x),-1/a*log((a+b*x)/x))"],"0.237479":["f(1/x*1/(a+b*x)^2,1/a*1/(a+b*x)-1/a^2*log((a+b*x)/x))"],"3.040375":["f(1/x*1/(a+b*x)^3,1/a^3*(1/2*((2*a+b*x)/(a+b*x))^2+log(x/(a+b*x))))"],"0.521902":["f(1/x^2*1/(a+b*x),-1/(a*x)+b/a^2*log((a+b*x)/x))"],"0.446014":["f(1/x^3*1/(a+b*x),(2*b*x-a)/(2*a^2*x^2)+b^2/a^3*log(x/(a+b*x)))"],"0.248586":["f(1/x^2*1/(a+b*x)^2,-(a+2*b*x)/(a^2*x*(a+b*x))+2*b/a^3*log((a+b*x)/x))"],"0.464469":["f(x/(a+b*x^2),1/2*1/b*log(a+b*x^2))"],"0.443716":["f(x^2/(a+b*x^2),x/b-a/b*integral(1/(a+b*x^2),x))"],"0.236382":["f(1/(a+b*x^2)^2,x/(2*a*(a+b*x^2))+1/2*1/a*integral(1/(a+b*x^2),x))"],"0.508931":["f(1/x*1/(a+b*x^2),1/2*1/a*log(x^2/(a+b*x^2)))"],"0.532733":["f(1/x^2*1/(a+b*x^2),-1/(a*x)-b/a*integral(1/(a+b*x^2),x))"],"0.480638":["f(1/(a+b*x^3),1/3*1/a*(a/b)^(1/3)*(1/2*log(((a/b)^(1/3)+x)^3/(a+b*x^3))+sqrt(3)*arctan((2*x-(a/b)^(1/3))*(a/b)^(-1/3)/sqrt(3))))"],"0.438648":["f(x^2/(a+b*x^3),1/3*1/b*log(a+b*x^3))"],"0.459164":["f(x/(a+b*x^4),1/2*sqrt(b/a)/b*arctan(x^2*sqrt(b/a)),or(not(number(a*b)),a*b>0))","f(x/(a+b*x^4),1/4*sqrt(-b/a)/b*log((x^2-sqrt(-a/b))/(x^2+sqrt(-a/b))),or(not(number(a*b)),a*b<0))"],"0.450070":["f(x^3/(a+b*x^4),1/4*1/b*log(a+b*x^4))"],"1.448960":["f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))"],"1.384221":["f(x*sqrt(a+b*x),-2*(2*a-3*b*x)*sqrt((a+b*x)^3)/15/b^2)"],"1.322374":["f(x^2*sqrt(a+b*x),2*(8*a^2-12*a*b*x+15*b^2*x^2)*sqrt((a+b*x)^3)/105/b^3)"],"1.516728":["f(sqrt(a+b*x)/x,2*sqrt(a+b*x)+a*integral(1/x*1/sqrt(a+b*x),x))"],"1.587665":["f(sqrt(a+b*x)/x^2,-sqrt(a+b*x)/x+b/2*integral(1/x*1/sqrt(a+b*x),x))"],"0.690150":["f(1/sqrt(a+b*x),2*sqrt(a+b*x)/b)"],"0.659314":["f(x/sqrt(a+b*x),-2/3*(2*a-b*x)*sqrt(a+b*x)/b^2)"],"0.629856":["f(x^2/sqrt(a+b*x),2/15*(8*a^2-4*a*b*x+3*b^2*x^2)*sqrt(a+b*x)/b^3)"],"0.722428":["f(1/x*1/sqrt(a+b*x),1/sqrt(a)*log((sqrt(a+b*x)-sqrt(a))/(sqrt(a+b*x)+sqrt(a))),or(not(number(a)),a>0))","f(1/x*1/sqrt(a+b*x),2/sqrt(-a)*arctan(sqrt(-(a+b*x)/a)),or(not(number(a)),a<0))"],"0.756216":["f(1/x^2*1/sqrt(a+b*x),-sqrt(a+b*x)/a/x-1/2*b/a*integral(1/x*1/sqrt(a+b*x),x))"],"1.434156":["f(sqrt(x^2+a),1/2*(x*sqrt(x^2+a)+a*log(x+sqrt(x^2+a))))","f(sqrt(a-x^2),1/2*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(abs(a)))))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*log(x*sqrt(a)+sqrt(a*x^2+b))/2/sqrt(a),and(number(a),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*arcsin(x*sqrt(-a/b))/2/sqrt(-a),and(number(a),a<0))"],"0.729886":["f(1/x*1/sqrt(x^2+a),arcsec(x/sqrt(-a))/sqrt(-a),or(not(number(a)),a<0))","f(1/x*1/sqrt(x^2+a),-1/sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(1/x*1/sqrt(a-x^2),-1/sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))"],"1.501230":["f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(-a)*arcsec(x/sqrt(-a)),or(not(number(a)),a<0))","f(sqrt(a-x^2)/x,sqrt(a-x^2)-sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))"],"0.666120":["f(x/sqrt(x^2+a),sqrt(x^2+a))","f(x/sqrt(a-x^2),-sqrt(a-x^2))"],"1.370077":["f(x*sqrt(x^2+a),1/3*sqrt((x^2+a)^3))","f(x*sqrt(a-x^2),-1/3*sqrt((a-x^2)^3))"],"1.730087":["f(sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2+a^(1/3))^3)+3/2*a^(1/3)*x*sqrt(x^2+a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2+a^(1/3)))))","f(sqrt(-a+x^6-3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2-a^(1/3))^3)-3/2*a^(1/3)*x*sqrt(x^2-a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2-a^(1/3)))))"],"0.578006":["f(1/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),x/a^(1/3)/sqrt(x^2+a^(1/3)))"],"0.552180":["f(x/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),-1/sqrt(x^2+a^(1/3)))"],"1.652787":["f(x*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/5*sqrt((x^2+a^(1/3))^5))"],"1.308862":["f(x^2*sqrt(x^2+a),1/4*x*sqrt((x^2+a)^3)-1/8*a*x*sqrt(x^2+a)-1/8*a^2*log(x+sqrt(x^2+a)))","f(x^2*sqrt(a-x^2),-x/4*sqrt((a-x^2)^3)+1/8*a*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(a))),or(not(number(a)),a>0))"],"1.342944":["f(x^3*sqrt(x^2+a),(1/5*x^2-2/15*a)*sqrt((x^2+a)^3),and(number(a),a>0))","f(x^3*sqrt(x^2+a),sqrt((x^2+a)^5)/5-a*sqrt((x^2+a)^3)/3,and(number(a),a<0))","f(x^3*sqrt(a-x^2),(-1/5*x^2-2/15*a)*sqrt((a-x^2)^3),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^3,-1/2*sqrt(a-x^2)/x^2+1/2*log((sqrt(a)+sqrt(a-x^2))/x)/sqrt(a),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^4,-1/3*sqrt((a-x^2)^3)/a/x^3,or(not(number(a)),a>0))"],"0.636358":["f(x^2/sqrt(x^2+a),1/2*x*sqrt(x^2+a)-1/2*a*log(x+sqrt(x^2+a)))","f(x^2/sqrt(a-x^2),-x/2*sqrt(a-x^2)+a/2*arcsin(x/sqrt(a)),or(not(number(a)),a>0))"],"0.652928":["f(x^3/sqrt(x^2+a),1/3*sqrt((x^2+a)^3)-a*sqrt(x^2+a))","f(1/x^3*1/sqrt(x^2+a),-1/2*sqrt(x^2+a)/a/x^2+1/2*log((sqrt(a)+sqrt(x^2+a))/x)/a^(3/2),or(not(number(a)),a>0))","f(1/x^3*1/sqrt(x^2-a),1/2*sqrt(x^2-a)/a/x^2+1/2*1/(a^(3/2))*arcsec(x/(a^(1/2))),or(not(number(a)),a>0))"],"0.764022":["f(1/x^2*1/sqrt(x^2+a),-sqrt(x^2+a)/a/x)","f(1/x^2*1/sqrt(a-x^2),-sqrt(a-x^2)/a/x,or(not(number(a)),a>0))"],"1.578940":["f(x^2*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/6*x*sqrt((x^2+a^(1/3))^5)-1/24*a^(1/3)*x*sqrt((x^2+a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2+a^(1/3))-1/16*a*log(x+sqrt(x^2+a^(1/3))),or(not(number(a)),a>0))","f(x^2*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/6*x*sqrt((x^2-a^(1/3))^5)+1/24*a^(1/3)*x*sqrt((x^2-a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2-a^(1/3))+1/16*a*log(x+sqrt(x^2-a^(1/3))),or(not(number(a)),a>0))"],"1.620055":["f(x^3*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/7*sqrt((x^2+a^(1/3))^7)-1/5*a^(1/3)*sqrt((x^2+a^(1/3))^5),or(not(number(a)),a>0))","f(x^3*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/7*sqrt((x^2-a^(1/3))^7)+1/5*a^(1/3)*sqrt((x^2-a^(1/3))^5),or(not(number(a)),a>0))"],"0.332117":["f(1/(x-a)/sqrt(x^2-a^2),-sqrt(x^2-a^2)/a/(x-a))","f(1/(x+a)/sqrt(x^2-a^2),sqrt(x^2-a^2)/a/(x+a))"],"1.571443":["f(sqrt(a-x^2)/x^2,-sqrt(a-x^2)/x-arcsin(x/sqrt(a)),or(not(number(a)),a>0))"],"1.690994":["f(sin(a*x),-cos(a*x)/a)"],"1.055979":["f(cos(a*x),sin(a*x)/a)"],"1.116714":["f(tan(a*x),-log(cos(a*x))/a)"],"0.895484":["f(1/tan(a*x),log(sin(a*x))/a)"],"0.946989":["f(1/cos(a*x),log(tan(pi/4+a*x/2))/a)"],"0.591368":["f(1/sin(a*x),log(tan(a*x/2))/a)"],"2.859462":["f(sin(a*x)^2,x/2-sin(2*a*x)/(4*a))"],"2.128050":["f(sin(a*x)^3,-cos(a*x)*(sin(a*x)^2+2)/(3*a))","f(sin(a*x)^4,3/8*x-sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))"],"1.115091":["f(cos(a*x)^2,x/2+sin(2*a*x)/(4*a))"],"1.081452":["f(cos(a*x)^3,sin(a*x)*(cos(a*x)^2+2)/(3*a))","f(cos(a*x)^4,3/8*x+sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))"],"0.349716":["f(1/sin(a*x)^2,-1/(a*tan(a*x)))"],"0.896788":["f(1/cos(a*x)^2,tan(a*x)/a)"],"1.785654":["f(sin(a*x)*cos(a*x),sin(a*x)^2/(2*a))"],"3.188560":["f(sin(a*x)^2*cos(a*x)^2,-sin(4*a*x)/(32*a)+x/8)"],"1.516463":["f(sin(a*x)/cos(a*x)^2,1/(a*cos(a*x)))"],"2.707879":["f(sin(a*x)^2/cos(a*x),(log(tan(pi/4+a*x/2))-sin(a*x))/a)"],"0.369293":["f(cos(a*x)/sin(a*x)^2,-1/(a*sin(a*x)))"],"0.560019":["f(1/(sin(a*x)*cos(a*x)),log(tan(a*x))/a)"],"0.530332":["f(1/(sin(a*x)*cos(a*x)^2),(1/cos(a*x)+log(tan(a*x/2)))/a)"],"0.331177":["f(1/(sin(a*x)^2*cos(a*x)),(log(tan(pi/4+a*x/2))-1/sin(a*x))/a)"],"0.313621":["f(1/(sin(a*x)^2*cos(a*x)^2),-2/(a*tan(2*a*x)))"],"3.172365":["f(sin(a+b*x),-cos(a+b*x)/b)"],"1.127162":["f(cos(a+b*x),sin(a+b*x)/b)"],"0.352714":["f(1/(b+b*sin(a*x)),-tan(pi/4-a*x/2)/a/b)","f(1/(b-b*sin(a*x)),tan(pi/4+a*x/2)/a/b)","f(1/(a+b*sin(x)),1/sqrt(b^2-a^2)*log((a*tan(x/2)+b-sqrt(b^2-a^2))/(a*tan(x/2)+b+sqrt(b^2-a^2))),b^2-a^2)"],"0.454515":["f(1/(b+b*cos(a*x)),tan(a*x/2)/a/b)","f(1/(b-b*cos(a*x)),-1/tan(a*x/2)/a/b)","f(1/(a+b*cos(x)),1/sqrt(b^2-a^2)*log((sqrt(b^2-a^2)*tan(x/2)+a+b)/(sqrt(b^2-a^2)*tan(x/2)-a-b)),b^2-a^2)"],"1.615441":["f(x*sin(a*x),sin(a*x)/a^2-x*cos(a*x)/a)"],"1.543263":["f(x^2*sin(a*x),2*x*sin(a*x)/a^2-(a^2*x^2-2)*cos(a*x)/a^3)"],"1.008798":["f(x*cos(a*x),cos(a*x)/a^2+x*sin(a*x)/a)"],"0.963724":["f(x^2*cos(a*x),2*x*cos(a*x)/a^2+(a^2*x^2-2)*sin(a*x)/a^3)"],"1.611938":["f(arcsin(a*x),x*arcsin(a*x)+sqrt(1-a^2*x^2)/a)"],"1.791033":["f(arccos(a*x),x*arccos(a*x)-sqrt(1-a^2*x^2)/a)"],"1.123599":["f(arctan(a*x),x*arctan(a*x)-1/2*log(1+a^2*x^2)/a)"],"1.387031":["f(x*log(a*x),x^2*log(a*x)/2-x^2/4)"],"1.325058":["f(x^2*log(a*x),x^3*log(a*x)/3-1/9*x^3)"],"2.108018":["f(log(x)^2,x*log(x)^2-2*x*log(x)+2*x)"],"0.403214":["f(1/x*1/(a+log(x)),log(a+log(x)))"],"2.269268":["f(log(a*x+b),(a*x+b)*log(a*x+b)/a-x)"],"2.486498":["f(log(a*x+b)/x^2,a/b*log(x)-(a*x+b)*log(a*x+b)/b/x)"],"1.769733":["f(sinh(x),cosh(x))"],"1.883858":["f(cosh(x),sinh(x))"],"1.606140":["f(tanh(x),log(cosh(x)))"],"1.690661":["f(x*sinh(x),x*cosh(x)-sinh(x))"],"1.799688":["f(x*cosh(x),x*sinh(x)-cosh(x))"],"3.131954":["f(sinh(x)^2,sinh(2*x)/4-x/2)"],"2.579685":["f(tanh(x)^2,x-tanh(x))"],"3.548923":["f(cosh(x)^2,sinh(2*x)/4+x/2)"],"1.058866":["f(x^3*exp(a*x^2),exp(a*x^2)*(x^2/a-1/(a^2))/2)"],"1.235270":["f(x^3*exp(a*x^2+b),exp(a*x^2)*exp(b)*(x^2/a-1/(a^2))/2)"],"1.130783":["f(exp(a*x^2),-i*sqrt(pi)*erf(i*sqrt(a)*x)/sqrt(a)/2)"],"1.078698":["f(erf(a*x),x*erf(a*x)+exp(-a^2*x^2)/a/sqrt(pi))"],"2.573650":["f(x^2*(1-x^2)^(3/2),(x*sqrt(1-x^2)*(-8*x^4+14*x^2-3)+3*arcsin(x))/48)","f(x^2*(1-x^2)^(5/2),(x*sqrt(1-x^2)*(48*x^6-136*x^4+118*x^2-15)+15*arcsin(x))/384)"],"2.640666":["f(x^4*(1-x^2)^(3/2),(-x*sqrt(1-x^2)*(16*x^6-24*x^4+2*x^2+3)+3*arcsin(x))/128)"],"1.086487":["f(x*exp(a*x),exp(a*x)*(a*x-1)/(a^2))"],"1.267493":["f(x*exp(a*x+b),exp(a*x+b)*(a*x-1)/(a^2))"],"1.037943":["f(x^2*exp(a*x),exp(a*x)*(a^2*x^2-2*a*x+2)/(a^3))"],"1.210862":["f(x^2*exp(a*x+b),exp(a*x+b)*(a^2*x^2-2*a*x+2)/(a^3))"],"1.064970":["f(x^3*exp(a*x),exp(a*x)*x^3/a-3/a*integral(x^2*exp(a*x),x))"],"1.242392":["f(x^3*exp(a*x+b),exp(a*x+b)*x^3/a-3/a*integral(x^2*exp(a*x+b),x))"]}});var Gp={};function TO(e){return Cn((0,AO.Eval)((0,kr.cadr)(e)))}function Cn(e){return e===(0,Bp.symbol)(kr.E)?kr.Constants.one:(0,Uf.equaln)(e,1)?kr.Constants.zero:(0,Uf.isnegativenumber)(e)?(0,$f.add)(Cn((0,Bf.negate)(e)),(0,Bf.multiply)(kr.Constants.imaginaryunit,kr.Constants.Pi())):(0,kr.isdouble)(e)?(0,hO.double)(Math.log(e.d)):(0,Uf.isfraction)(e)?(0,$f.subtract)(Cn((0,MO.numerator)(e)),Cn((0,jO.denominator)(e))):(0,kr.ispower)(e)?(0,Bf.multiply)((0,kr.caddr)(e),Cn((0,kr.cadr)(e))):(0,kr.ismultiply)(e)?e.tail().map(Cn).reduce($f.add,kr.Constants.zero):(0,OO.makeList)((0,Bp.symbol)(kr.LOG),e)}var kr,Bp,$f,hO,jO,AO,Uf,OO,Bf,MO,Gf=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.logarithm=exports.Eval_log=void 0;kr=(T(),o(N)),Bp=(U(),o(G)),$f=(_e(),o(pe)),hO=(Y(),o(V)),jO=(Ns(),o(eo)),AO=(F(),o(z)),Uf=(K(),o(te)),OO=(se(),o(oe)),Bf=(Q(),o(W)),MO=(no(),o($o));exports.Eval_log=TO;exports.logarithm=Cn});var Xp={};function RO(e){return Zp((0,IO.Eval)((0,jr.cadr)(e)))}function Zp(e){return(0,jr.isdouble)(e)?e.d>0||e.d===0?jr.Constants.one:jr.Constants.negOne:(0,jr.isrational)(e)?(0,jr.MSIGN)((0,Vp.mmul)(e.q.a,e.q.b))===-1?jr.Constants.negOne:(0,jr.MZERO)((0,Vp.mmul)(e.q.a,e.q.b))?jr.Constants.zero:jr.Constants.one:(0,zp.iscomplexnumber)(e)?(0,Ff.multiply)((0,SO.power)(jr.Constants.negOne,(0,NO.absval)(e)),e):(0,zp.isnegativeterm)(e)?(0,Ff.multiply)((0,Yp.makeList)((0,Fp.symbol)(jr.SGN),(0,Ff.negate)(e)),jr.Constants.negOne):(0,Yp.makeList)((0,Fp.symbol)(jr.SGN),e)}var jr,Fp,NO,IO,zp,Yp,Vp,Ff,SO,zf=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.sgn=exports.Eval_sgn=void 0;jr=(T(),o(N)),Fp=(U(),o(G)),NO=(is(),o(js)),IO=(F(),o(z)),zp=(K(),o(te)),Yp=(se(),o(oe)),Vp=(cs(),o(As)),Ff=(Q(),o(W)),SO=(At(),o(Mt));exports.Eval_sgn=RO;exports.sgn=Zp});var Wp={};function DO(e){return Qp((0,LO.Eval)((0,Pn.cadr)(e)))}function Qp(e){if((0,Pn.car)(e)===(0,Hp.symbol)(Pn.ARCSINH))return(0,Pn.cadr)(e);if((0,Pn.isdouble)(e)){let t=Math.sinh(e.d);return Math.abs(t)<1e-10&&(t=0),(0,wO.double)(t)}return(0,CO.isZeroAtomOrTensor)(e)?Pn.Constants.zero:(0,PO.makeList)((0,Hp.symbol)(Pn.SINH),e)}var Pn,Hp,wO,LO,CO,PO,Yf=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ysinh=exports.Eval_sinh=void 0;Pn=(T(),o(N)),Hp=(U(),o(G)),wO=(Y(),o(V)),LO=(F(),o(z)),CO=(K(),o(te)),PO=(se(),o(oe));exports.Eval_sinh=DO;exports.ysinh=Qp});var Di={};function ZO(e){e=(0,v.cdr)(e);let t=(0,ki.Eval)((0,v.car)(e));e=(0,v.cdr)(e);let r,s,n=(0,ki.Eval)((0,v.car)(e));for(n===(0,Ge.symbol)(v.NIL)?(r=(0,Kp.guess)(t),s=(0,Ge.symbol)(v.NIL)):(0,v.isNumericAtom)(n)?(r=(0,Kp.guess)(t),s=n):(r=n,e=(0,v.cdr)(e),s=(0,ki.Eval)((0,v.car)(e)));;){let i;(0,v.isNumericAtom)(s)?(i=(0,Ut.nativeInt)(s),isNaN(i)&&(0,tb.stop)("nth derivative: check n")):i=1;let a=t;if(i>=0)for(let u=0;u<i;u++)a=lt(a,r);else{i=-i;for(let u=0;u<i;u++)a=(0,BO.integral)(a,r)}if(t=a,s===(0,Ge.symbol)(v.NIL))break;if((0,v.isNumericAtom)(s)){if(e=(0,v.cdr)(e),s=(0,ki.Eval)((0,v.car)(e)),s===(0,Ge.symbol)(v.NIL))break;(0,v.isNumericAtom)(s)||(r=s,e=(0,v.cdr)(e),s=(0,ki.Eval)((0,v.car)(e)))}else r=s,e=(0,v.cdr)(e),s=(0,ki.Eval)((0,v.car)(e))}return t}function lt(e,t){return(0,v.isNumericAtom)(t)&&(0,tb.stop)("undefined function"),(0,v.istensor)(e)?(0,v.istensor)(t)?(0,Vf.d_tensor_tensor)(e,t):(0,Vf.d_tensor_scalar)(e,t):(0,v.istensor)(t)?(0,Vf.d_scalar_tensor)(e,t):XO(e,t)}function XO(e,t){if((0,v.issymbol)(t))return HO(e,t);let r=(0,eb.subst)(e,t,(0,Ge.symbol)(v.SECRETX));return(0,eb.subst)(lt(r,(0,Ge.symbol)(v.SECRETX)),(0,Ge.symbol)(v.SECRETX),t)}function HO(e,t){if((0,sl.equal)(e,t))return v.Constants.one;if(!(0,v.iscons)(e))return v.Constants.zero;if((0,v.isadd)(e))return QO(e,t);switch((0,v.car)(e)){case(0,Ge.symbol)(v.MULTIPLY):return WO(e,t);case(0,Ge.symbol)(v.POWER):return JO(e,t);case(0,Ge.symbol)(v.DERIVATIVE):return eM(e,t);case(0,Ge.symbol)(v.LOG):return KO(e,t);case(0,Ge.symbol)(v.SIN):return rM(e,t);case(0,Ge.symbol)(v.COS):return sM(e,t);case(0,Ge.symbol)(v.TAN):return oM(e,t);case(0,Ge.symbol)(v.ARCSIN):return nM(e,t);case(0,Ge.symbol)(v.ARCCOS):return iM(e,t);case(0,Ge.symbol)(v.ARCTAN):return aM(e,t);case(0,Ge.symbol)(v.SINH):return lM(e,t);case(0,Ge.symbol)(v.COSH):return uM(e,t);case(0,Ge.symbol)(v.TANH):return cM(e,t);case(0,Ge.symbol)(v.ARCSINH):return fM(e,t);case(0,Ge.symbol)(v.ARCCOSH):return dM(e,t);case(0,Ge.symbol)(v.ARCTANH):return _M(e,t);case(0,Ge.symbol)(v.ABS):return mM(e,t);case(0,Ge.symbol)(v.SGN):return xM(e,t);case(0,Ge.symbol)(v.HERMITE):return pM(e,t);case(0,Ge.symbol)(v.ERF):return bM(e,t);case(0,Ge.symbol)(v.ERFC):return gM(e,t);case(0,Ge.symbol)(v.BESSELJ):return yM(e,t);case(0,Ge.symbol)(v.BESSELY):return EM(e,t);default:}return(0,v.car)(e)===(0,Ge.symbol)(v.INTEGRAL)&&(0,v.caddr)(e)===t?AM(e):tM(e,t)}function QO(e,t){let r=(0,v.iscons)(e)?e.tail().map(s=>lt(s,t)):[];return(0,Ir.add_all)(r)}function WO(e,t){let r=(0,sl.length)(e)-1,s=[];for(let n=0;n<r;n++){let i=[],a=(0,v.cdr)(e);for(let u=0;u<r;u++){let c=(0,v.car)(a);n===u&&(c=lt(c,t)),i.push(c),a=(0,v.cdr)(a)}s.push((0,Ee.multiply_all)(i))}return(0,Ir.add_all)(s)}function JO(e,t){let r=(0,Ee.divide)((0,v.caddr)(e),(0,v.cadr)(e)),s=lt((0,v.cadr)(e),t),n=(0,GO.logarithm)((0,v.cadr)(e)),i=lt((0,v.caddr)(e),t);return(0,Ee.multiply)((0,Ir.add)((0,Ee.multiply)(r,s),(0,Ee.multiply)(n,i)),e)}function KO(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.divide)(r,(0,v.cadr)(e))}function eM(e,t){let r=lt((0,v.cadr)(e),t);return(0,v.car)(r)===(0,Ge.symbol)(v.DERIVATIVE)?(0,sl.lessp)((0,v.caddr)(r),(0,v.caddr)(e))?(0,rl.makeList)((0,Ge.symbol)(v.DERIVATIVE),(0,rl.makeList)((0,Ge.symbol)(v.DERIVATIVE),(0,v.cadr)(r),(0,v.caddr)(r)),(0,v.caddr)(e)):(0,rl.makeList)((0,Ge.symbol)(v.DERIVATIVE),(0,rl.makeList)((0,Ge.symbol)(v.DERIVATIVE),(0,v.cadr)(r),(0,v.caddr)(e)),(0,v.caddr)(r)):lt(r,(0,v.caddr)(e))}function tM(e,t){let r=(0,v.cdr)(e);return r===(0,Ge.symbol)(v.NIL)||(0,kO.Find)(r,t)?(0,rl.makeList)((0,Ge.symbol)(v.DERIVATIVE),e,t):v.Constants.zero}function rM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)(r,(0,rb.cosine)((0,v.cadr)(e)))}function sM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.negate)((0,Ee.multiply)(r,(0,YO.sine)((0,v.cadr)(e))))}function oM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)(r,(0,gr.power)((0,rb.cosine)((0,v.cadr)(e)),(0,Ut.integer)(-2)))}function nM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)(r,(0,gr.power)((0,Ir.subtract)(v.Constants.one,(0,gr.power)((0,v.cadr)(e),(0,Ut.integer)(2))),(0,Ut.rational)(-1,2)))}function iM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.negate)((0,Ee.multiply)(r,(0,gr.power)((0,Ir.subtract)(v.Constants.one,(0,gr.power)((0,v.cadr)(e),(0,Ut.integer)(2))),(0,Ut.rational)(-1,2))))}function aM(e,t){let r=lt((0,v.cadr)(e),t);return(0,zO.simplify)((0,Ee.multiply)(r,(0,Ee.inverse)((0,Ir.add)(v.Constants.one,(0,gr.power)((0,v.cadr)(e),(0,Ut.integer)(2))))))}function lM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)(r,(0,sb.ycosh)((0,v.cadr)(e)))}function uM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)(r,(0,VO.ysinh)((0,v.cadr)(e)))}function cM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)(r,(0,gr.power)((0,sb.ycosh)((0,v.cadr)(e)),(0,Ut.integer)(-2)))}function fM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)(r,(0,gr.power)((0,Ir.add)((0,gr.power)((0,v.cadr)(e),(0,Ut.integer)(2)),v.Constants.one),(0,Ut.rational)(-1,2)))}function dM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)(r,(0,gr.power)((0,Ir.add)((0,gr.power)((0,v.cadr)(e),(0,Ut.integer)(2)),v.Constants.negOne),(0,Ut.rational)(-1,2)))}function _M(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)(r,(0,Ee.inverse)((0,Ir.subtract)(v.Constants.one,(0,gr.power)((0,v.cadr)(e),(0,Ut.integer)(2)))))}function mM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)(r,(0,FO.sgn)((0,v.cadr)(e)))}function xM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)((0,Ee.multiply)(r,(0,$O.dirac)((0,v.cadr)(e))),(0,Ut.integer)(2))}function pM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)((0,Ee.multiply)(r,(0,Ee.multiply)((0,Ut.integer)(2),(0,v.caddr)(e))),(0,UO.hermite)((0,v.cadr)(e),(0,Ir.add)((0,v.caddr)(e),v.Constants.negOne)))}function bM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)((0,Ee.multiply)((0,Ee.multiply)((0,sl.exponential)((0,Ee.multiply)((0,gr.power)((0,v.cadr)(e),(0,Ut.integer)(2)),v.Constants.negOne)),(0,gr.power)(v.Constants.Pi(),(0,Ut.rational)(-1,2))),(0,Ut.integer)(2)),r)}function gM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)((0,Ee.multiply)((0,Ee.multiply)((0,sl.exponential)((0,Ee.multiply)((0,gr.power)((0,v.cadr)(e),(0,Ut.integer)(2)),v.Constants.negOne)),(0,gr.power)(v.Constants.Pi(),(0,Ut.rational)(-1,2))),(0,Ut.integer)(-2)),r)}function yM(e,t){return(0,ob.isZeroAtomOrTensor)((0,v.caddr)(e))?vM(e,t):qM(e,t)}function vM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)((0,Ee.multiply)(r,(0,Gu.besselj)((0,v.cadr)(e),v.Constants.one)),v.Constants.negOne)}function qM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)(r,(0,Ir.add)((0,Gu.besselj)((0,v.cadr)(e),(0,Ir.add)((0,v.caddr)(e),v.Constants.negOne)),(0,Ee.multiply)((0,Ee.divide)((0,Ee.multiply)((0,v.caddr)(e),v.Constants.negOne),(0,v.cadr)(e)),(0,Gu.besselj)((0,v.cadr)(e),(0,v.caddr)(e)))))}function EM(e,t){return(0,ob.isZeroAtomOrTensor)((0,v.caddr)(e))?hM(e,t):jM(e,t)}function hM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)((0,Ee.multiply)(r,(0,Gu.besselj)((0,v.cadr)(e),v.Constants.one)),v.Constants.negOne)}function jM(e,t){let r=lt((0,v.cadr)(e),t);return(0,Ee.multiply)(r,(0,Ir.add)((0,Jp.bessely)((0,v.cadr)(e),(0,Ir.add)((0,v.caddr)(e),v.Constants.negOne)),(0,Ee.multiply)((0,Ee.divide)((0,Ee.multiply)((0,v.caddr)(e),v.Constants.negOne),(0,v.cadr)(e)),(0,Jp.bessely)((0,v.cadr)(e),(0,v.caddr)(e)))))}function AM(e){return(0,v.cadr)(e)}var v,kO,tb,Ge,sl,Ir,Gu,Jp,Ut,rb,sb,$O,ki,Kp,UO,BO,ob,rl,GO,Ee,gr,FO,zO,YO,VO,eb,Vf,Ln=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.derivative=exports.Eval_derivative=void 0;v=(T(),o(N)),kO=(ar(),o(xr)),tb=(Ae(),o(Me)),Ge=(U(),o(G)),sl=(Le(),o(Pe)),Ir=(_e(),o(pe)),Gu=(tf(),o(Bx)),Jp=(rf(),o(Xx)),Ut=(Y(),o(V)),rb=(Lo(),o(bn)),sb=(sf(),o(Wx)),$O=(lf(),o(ep)),ki=(F(),o(z)),Kp=(Hr(),o(us)),UO=(Y0(),o(qx)),BO=(tl(),o(Bu)),ob=(K(),o(te)),rl=(se(),o(oe)),GO=(Gf(),o(Gp)),Ee=(Q(),o(W)),gr=(At(),o(Mt)),FO=(zf(),o(Xp)),zO=(Ho(),o(Mn)),YO=(Qs(),o(wo)),VO=(Yf(),o(Wp)),eb=(Xr(),o(ns)),Vf=(jt(),o(Ot));exports.Eval_derivative=ZO;exports.derivative=lt});var NM={};function MM(e){if(We.DEBUG&&console.log(`Eval_user_function evaluating: ${(0,We.car)(e)}`),(0,We.car)(e)===(0,Dn.symbol)(We.SYMBOL_D)&&(0,Dn.get_binding)((0,Dn.symbol)(We.SYMBOL_D))===(0,Dn.symbol)(We.SYMBOL_D))return(0,OM.Eval_derivative)(e);let t=(0,Xf.Eval)((0,We.car)(e));(0,We.isNumericAtom)(t)?(0,Zf.stop)("expected function invocation, found multiplication instead. Use '*' symbol explicitly for multiplication."):(0,We.istensor)(t)?(0,Zf.stop)("expected function invocation, found tensor product instead. Use 'dot/inner' explicitly."):(0,We.isstr)(t)&&(0,Zf.stop)("expected function, found string instead.");let r=(0,We.car)((0,We.cdr)(t)),s=(0,We.car)((0,We.cdr)((0,We.cdr)(t))),n=(0,We.cdr)(e);if((0,We.car)(t)!==(0,Dn.symbol)(We.FUNCTION)||t===(0,We.car)(e))return(0,Hf.makeList)(t,...(0,Xf.evalList)(n));e=s;let i=n,a=[];for(;(0,We.iscons)(e)&&(0,We.iscons)(i);)a.push((0,We.car)(e)),a.push((0,We.car)(i)),e=(0,We.cdr)(e),i=(0,We.cdr)(i);return a.length&&(r=Fu(r,a)),(0,Xf.Eval)(r)}function Fu(e,t){if((0,We.istensor)(e))return TM(e,t);if((0,We.iscons)(e)){let s=[];for((0,We.car)(e)===t[0]?s.push((0,Hf.makeList)((0,Dn.symbol)(We.EVAL),t[1])):s.push((0,We.car)(e)),e=(0,We.cdr)(e);(0,We.iscons)(e);)s.push(Fu((0,We.car)(e),t)),e=(0,We.cdr)(e);return(0,Hf.makeList)(...s)}if(!(0,We.issymbol)(e))return e;for(let s=0;s<t.length;s+=2)if(e===t[s])return t[s+1];let r=(0,Dn.get_binding)(e);return e!==r&&Fu(r,t)===r?e:r}function TM(e,t){return e=(0,nb.copy_tensor)(e),e.tensor.elem=e.tensor.elem.map(r=>Fu(r,t)),(0,nb.check_tensor_dimensions)(e),e}var We,Zf,Dn,OM,Xf,Hf,nb,ib=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_user_function=void 0;We=(T(),o(N)),Zf=(Ae(),o(Me)),Dn=(U(),o(G)),OM=(Ln(),o(Di)),Xf=(F(),o(z)),Hf=(se(),o(oe)),nb=(jt(),o(Ot));exports.Eval_user_function=MM});var z={};function Qf(e){return(0,kn.nativeInt)(ke(e))}function ke(e){let t;(0,xo.check_esc_flag)(),e==null&&w.breakpoint,!w.defs.evaluatingAsFloats&&(0,zu.isfloating)(e)&&(t=!0,w.defs.evaluatingAsFloats=!0);try{switch(e.k){case w.CONS:return mb(e);case w.NUM:return w.defs.evaluatingAsFloats?(0,kn.double)((0,kn.convert_rational_to_double)(e)):e;case w.DOUBLE:case w.STR:return e;case w.TENSOR:return(0,db.Eval_tensor)(e);case w.SYM:return _b(e);default:(0,xo.stop)("atom?")}}finally{t&&(w.defs.evaluatingAsFloats=!1)}}function _b(e){if((0,Ar.iskeyword)(e))return ke((0,Yu.makeList)(e,(0,Ar.symbol)(w.LAST)));if(e===(0,Ar.symbol)(w.PI)&&w.defs.evaluatingAsFloats)return w.Constants.piAsDouble;let t=(0,Ar.get_binding)(e);if(w.DEBUG&&console.log(`looked up: ${e} which contains: ${t}`),e!==t){let r=w.defs.chainOfUserSymbolsNotFunctionsBeingEvaluated.indexOf(e);if(r!==-1){let s="";for(let n=r;n<w.defs.chainOfUserSymbolsNotFunctionsBeingEvaluated.length;n++)s+=w.defs.chainOfUserSymbolsNotFunctionsBeingEvaluated[n].printname+" -> ";s+=e.printname,(0,xo.stop)("recursive evaluation of symbols: "+s);return}w.defs.chainOfUserSymbolsNotFunctionsBeingEvaluated.push(e),t=ke(t),w.defs.chainOfUserSymbolsNotFunctionsBeingEvaluated.pop()}return t}function mb(e){let t=(0,w.car)(e);return(0,w.car)(t)===(0,Ar.symbol)(w.EVAL)?(0,lb.Eval_user_function)(e):((0,w.issymbol)(t)||(0,xo.stop)("cons?"),t.keyword?t.keyword(e):(0,lb.Eval_user_function)(e))}function $M(e){return(0,Ar.get_binding)((0,w.cadr)(e))}function UM(e){let t=(0,zu.isZeroLikeOrNonZeroLikeOrUndetermined)((0,w.cadr)(e));return t==null?e:(0,kn.integer)(Number(t))}function BM(e){let t=ke((0,w.cadr)(e));return(0,RM.det)(t)}function GM(e){let t=ke((0,w.cadr)(e)),r=(0,w.iscons)((0,w.cddr)(e))?Qf((0,w.caddr)(e)):1;return(0,w.istensor)(t)?r<1||r>t.tensor.ndim?e:(0,kn.integer)(t.tensor.dim[r-1]):w.Constants.one}function FM(e){return(0,wM.divisors)(ke((0,w.cadr)(e)))}function zM(e){let t=(0,w.car)(e);for(e=(0,w.cdr)(e);(0,w.iscons)(e);)t=ke((0,w.car)(e)),e=(0,w.cdr)(e);return t}function YM(e){let t=ke((0,w.cadr)(e)),r=ke((0,w.caddr)(e)),s=ke((0,w.cadddr)(e));(0,xo.stop)("dsolve")}function VM(e){let t=ke((0,w.cadr)(e));for(e=(0,w.cddr)(e);(0,w.iscons)(e);)t=(0,fb.subst)(t,ke((0,w.car)(e)),ke((0,w.cadr)(e))),e=(0,w.cddr)(e);return ke(t)}function ZM(e){return(0,DM.exponential)(ke((0,w.cadr)(e)))}function XM(e){return(0,LM.factorial)(ke((0,w.cadr)(e)))}function HM(e){e=(0,w.cdr)(e);let t=ke((0,w.car)(e));e=(0,w.cdr)(e);let r=ke((0,w.car)(e)),s=(0,ab.factorpoly)(t,r);return(0,w.iscons)(e)&&(s=e.tail().reduce((n,i)=>(0,ab.factorpoly)(n,ke(i)),s)),s}function QM(e){let t=ke((0,w.caddr)(e)),r=ke((0,w.cadr)(e));return(0,CM.hermite)(r,t)}function WM(e){return(0,PM.hilbert)(ke((0,w.cadr)(e)))}function JM(e){let t=e;e=(0,w.cdr)(e);let r=ke((0,w.car)(e));if((0,w.isNumericAtom)(r)&&(0,xo.stop)("trying to access a scalar as a tensor"),!(0,w.istensor)(r))return t;let s=[];for(e=(0,w.cdr)(e);(0,w.iscons)(e);){if(s.push(ke((0,w.car)(e))),!(0,zu.isintegerorintegerfloat)(s[s.length-1]))return t;e=(0,w.cdr)(e)}return(0,ub.index_function)(r,s)}function KM(e){let t=ke((0,w.cadr)(e));return(0,cb.inv)(t)}function eT(e){let t=ke((0,w.cadr)(e));return(0,cb.invg)(t)}function tT(e){return e=ke((0,w.cadr)(e)),(0,w.isrational)(e)?(0,zu.isinteger)(e)?w.Constants.one:w.Constants.zero:(0,w.isdouble)(e)?Math.floor(e.d)===e.d?w.Constants.one:w.Constants.zero:(0,Yu.makeList)((0,Ar.symbol)(w.ISINTEGER),e)}function rT(e){return e=ke((0,w.cadr)(e)),e.k===w.NUM||e.k===w.DOUBLE?w.Constants.one:w.Constants.zero}function sT(e){return(0,Yu.makeList)((0,Ar.symbol)(w.OPERATOR),...xb((0,w.cdr)(e)))}function oT(e){return(0,w.cadr)(e)}function nT(e){return e=ke((0,w.cadr)(e)),(0,w.istensor)(e)?(0,kn.integer)(e.tensor.ndim):w.Constants.zero}function iT(e){if((0,w.caadr)(e)===(0,Ar.symbol)(w.INDEX))return aT(e);if((0,w.iscons)((0,w.cadr)(e)))return(0,SM.define_user_function)(e);(0,w.issymbol)((0,w.cadr)(e))||(0,xo.stop)("symbol assignment: error in symbol");let t=ke((0,w.caddr)(e));return(0,Ar.set_binding)((0,w.cadr)(e),t),(0,Ar.symbol)(w.NIL)}function aT(e){let t=(0,w.cadadr)(e);console.log(`p4: ${t}`),(0,w.issymbol)(t)||(0,xo.stop)("indexed assignment: expected a symbol name");let r=ke((0,w.caddr)(e)),s=[],n=(0,w.cdadr)(e);(0,w.iscons)(n)&&(s=[...n].map(ke));let i=(0,ub.set_component)(r,...s);return(0,Ar.set_binding)(t,i),(0,Ar.symbol)(w.NIL)}function lT(e){let t=ke((0,w.cadr)(e));return(0,kM.power)(t,(0,kn.rational)(1,2))}function uT(){(0,xo.stop)("user stop")}function cT(e){let t=ke((0,w.cadr)(e)),r=ke((0,w.caddr)(e)),s=ke((0,w.cadddr)(e));return ke((0,fb.subst)(s,r,t))}function fT(e){let t=Qf((0,w.cadr)(e));if(isNaN(t)||t<1)return e;e=(0,IM.alloc_tensor)(t*t),e.tensor.ndim=2,e.tensor.dim[0]=t,e.tensor.dim[1]=t;for(let r=0;r<t;r++)e.tensor.elem[t*r+r]=w.Constants.one;return(0,db.check_tensor_dimensions)(e),e}function dT(e){return(0,w.car)(e)===(0,Ar.symbol)(w.SETQ)&&(e=(0,Yu.makeList)((0,Ar.symbol)(w.TESTEQ),(0,w.cadr)(e),(0,w.caddr)(e))),ke(e)}function*xb(e){if((0,w.iscons)(e))for(let t of e)yield ke(t)}var ub,IM,w,xo,Ar,kn,SM,RM,wM,LM,ab,CM,PM,cb,zu,Yu,DM,kM,fb,db,lb,F=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.evalList=exports.Eval_predicate=exports.Eval_unit=exports.Eval_subst=exports.Eval_stop=exports.Eval_sqrt=exports.Eval_setq=exports.Eval_rank=exports.Eval_quote=exports.Eval_operator=exports.Eval_number=exports.Eval_isinteger=exports.Eval_invg=exports.Eval_inv=exports.Eval_index=exports.Eval_hilbert=exports.Eval_hermite=exports.Eval_factorpoly=exports.Eval_factorial=exports.Eval_exp=exports.Eval_Eval=exports.Eval_dsolve=exports.Eval_do=exports.Eval_divisors=exports.Eval_dim=exports.Eval_det=exports.Eval_check=exports.Eval_binding=exports.Eval_cons=exports.Eval_sym=exports.Eval=exports.evaluate_integer=void 0;ub=(R_(),o(c1)),IM=(Ct(),o(Dt)),w=(T(),o(N)),xo=(Ae(),o(Me)),Ar=(U(),o(G)),kn=(Y(),o(V)),SM=(r0(),o(L_)),RM=(hu(),o(B0)),wM=(b0(),o(im)),LM=(En(),o(hi)),ab=(mi(),o(ja)),CM=(Y0(),o(qx)),PM=(hx(),o(wj)),cb=(Ga(),o(Ou)),zu=(K(),o(te)),Yu=(se(),o(oe)),DM=(Le(),o(Pe)),kM=(At(),o(Mt)),fb=(Xr(),o(ns)),db=(jt(),o(Ot)),lb=(ib(),o(NM));exports.evaluate_integer=Qf;exports.Eval=ke;exports.Eval_sym=_b;exports.Eval_cons=mb;exports.Eval_binding=$M;exports.Eval_check=UM;exports.Eval_det=BM;exports.Eval_dim=GM;exports.Eval_divisors=FM;exports.Eval_do=zM;exports.Eval_dsolve=YM;exports.Eval_Eval=VM;exports.Eval_exp=ZM;exports.Eval_factorial=XM;exports.Eval_factorpoly=HM;exports.Eval_hermite=QM;exports.Eval_hilbert=WM;exports.Eval_index=JM;exports.Eval_inv=KM;exports.Eval_invg=eT;exports.Eval_isinteger=tT;exports.Eval_number=rT;exports.Eval_operator=sT;exports.Eval_quote=oT;exports.Eval_rank=nT;exports.Eval_setq=iT;exports.Eval_sqrt=lT;exports.Eval_stop=uT;exports.Eval_subst=cT;exports.Eval_unit=fT;exports.Eval_predicate=dT;exports.evalList=xb});var pe={};function gT(e){let t=[];e=(0,fe.cdr)(e);for(let r of e){let s=(0,mT.Eval)(r);Vu(t,s)}return Jf(t)}function Jf(e){if(fe.DEBUG)for(let t of e)console.log((0,pT.print_list)(t));for(let t=0;t<10&&!(e.length<2||(ol=0,e.sort(vT),ol===0));t++)qT(e);switch(e.length){case 0:return fe.Constants.Zero();case 1:return e[0];default:return e.unshift((0,$n.symbol)(fe.ADD)),(0,xT.makeList)(...e)}}function vT(e,t){if(yT++,(0,fe.isNumericAtom)(e)&&(0,fe.isNumericAtom)(t))return ol=1,0;if((0,fe.istensor)(e)&&(0,fe.istensor)(t)){if(e.tensor.ndim<t.tensor.ndim)return-1;if(e.tensor.ndim>t.tensor.ndim)return 1;for(let s=0;s<e.tensor.ndim;s++){if(e.tensor.dim[s]<t.tensor.dim[s])return-1;if(e.tensor.dim[s]>t.tensor.dim[s])return 1}return ol=1,0}(0,fe.ismultiply)(e)&&(e=(0,fe.cdr)(e),(0,fe.isNumericAtom)((0,fe.car)(e))&&(e=(0,fe.cdr)(e),(0,fe.cdr)(e)===(0,$n.symbol)(fe.NIL)&&(e=(0,fe.car)(e)))),(0,fe.ismultiply)(t)&&(t=(0,fe.cdr)(t),(0,fe.isNumericAtom)((0,fe.car)(t))&&(t=(0,fe.cdr)(t),(0,fe.cdr)(t)===(0,$n.symbol)(fe.NIL)&&(t=(0,fe.car)(t))));let r=(0,bb.cmp_expr)(e,t);return r===0&&(ol=1),r}function qT(e){let t=0;for(;t<e.length-1;){(0,_T.check_esc_flag)();let r,s,n=e[t],i=e[t+1];if((0,fe.istensor)(n)&&(0,fe.istensor)(i)){r=(0,bT.tensor_plus_tensor)(n,i),r!==(0,$n.symbol)(fe.NIL)&&(e.splice(t,2,r),t--),t++;continue}if((0,fe.istensor)(n)||(0,fe.istensor)(i)){t++;continue}if((0,fe.isNumericAtom)(n)&&(0,fe.isNumericAtom)(i)){r=(0,pb.add_numbers)(n,i),(0,Wf.isZeroAtomOrTensor)(r)?e.splice(t,2):e.splice(t,2,r),t--,t++;continue}if((0,fe.isNumericAtom)(n)||(0,fe.isNumericAtom)(i)){t++;continue}r=fe.Constants.One(),s=fe.Constants.One();let a=0;if((0,fe.ismultiply)(n)&&(n=(0,fe.cdr)(n),a=1,(0,fe.isNumericAtom)((0,fe.car)(n))&&(r=(0,fe.car)(n),n=(0,fe.cdr)(n),(0,fe.cdr)(n)===(0,$n.symbol)(fe.NIL)&&(n=(0,fe.car)(n),a=0))),(0,fe.ismultiply)(i)&&(i=(0,fe.cdr)(i),(0,fe.isNumericAtom)((0,fe.car)(i))&&(s=(0,fe.car)(i),i=(0,fe.cdr)(i),(0,fe.cdr)(i)===(0,$n.symbol)(fe.NIL)&&(i=(0,fe.car)(i)))),!(0,bb.equal)(n,i)){t++;continue}if(r=(0,pb.add_numbers)(r,s),(0,Wf.isZeroAtomOrTensor)(r)){e.splice(t,2),t--,t++;continue}let u=a?new fe.Cons((0,$n.symbol)(fe.MULTIPLY),n):n;e.splice(t,2,(0,gb.multiply)(r,u)),t--,t++}}function Vu(e,t){(0,fe.isadd)(t)?e.push(...t.tail()):(0,Wf.isZeroAtom)(t)||e.push(t)}function yb(e,t){let r=[];return Vu(r,e),Vu(r,t),Jf(r)}function ET(e){let t=[];for(let r of e)Vu(t,r);return Jf(t)}function hT(e,t){return yb(e,(0,gb.negate)(t))}var fe,_T,$n,pb,mT,Wf,xT,bb,gb,pT,bT,ol,yT,_e=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.subtract=exports.add_all=exports.add=exports.Eval_add=void 0;fe=(T(),o(N)),_T=(Ae(),o(Me)),$n=(U(),o(G)),pb=(Y(),o(V)),mT=(F(),o(z)),Wf=(K(),o(te)),xT=(se(),o(oe)),bb=(Le(),o(Pe)),gb=(Q(),o(W)),pT=(to(),o(Do)),bT=(jt(),o(Ot)),ol=0;exports.Eval_add=gT;yT=0;exports.add=yb;exports.add_all=ET;exports.subtract=hT});var js={};function LT(e){return ed((0,Hu.Eval)((0,pt.cadr)(e)))}function CT(e){return(0,NT.zzfloat)((0,Hu.Eval)(al((0,Hu.Eval)(e))))}function ed(e){let t=(0,RT.numerator)(e),r=al(t),s=(0,TT.denominator)(e),n=al(s),i=(0,Xu.divide)(r,n);return Sr&&(console.trace(">>>>  ABS of "+e),console.log(`ABS numerator ${t}`),console.log(`ABSVAL numerator: ${r}`),console.log(`ABS denominator: ${s}`),console.log(`ABSVAL denominator: ${n}`),console.log(`ABSVAL divided: ${i}`),console.log("<<<<<<<  ABS")),i}function al(e){let t=e;if(Sr&&console.log(`ABS of ${e}`),(0,Un.isZeroAtomOrTensor)(e))return Sr&&(console.log(` abs: ${e} just zero`),console.log(" --> ABS of "+t+" : "+pt.Constants.zero)),pt.Constants.zero;if((0,Un.isnegativenumber)(e))return Sr&&console.log(` abs: ${e} just a negative`),(0,Xu.negate)(e);if((0,Un.ispositivenumber)(e))return Sr&&(console.log(` abs: ${e} just a positive`),console.log(` --> ABS of ${t} : ${e}`)),e;if(e===(0,nl.symbol)(pt.PI))return Sr&&(console.log(` abs: ${e} of PI`),console.log(` --> ABS of ${t} : ${e}`)),e;if((0,pt.isadd)(e)&&((0,Kf.findPossibleClockForm)(e,e)||(0,Kf.findPossibleExponentialForm)(e)||(0,Kf.Find)(e,pt.Constants.imaginaryunit))){Sr&&(console.log(` abs: ${e} is a sum`),console.log("abs of a sum")),e=(0,wT.rect)(e);let s=(0,Eb.simplify_trig)((0,il.power)((0,OT.add)((0,il.power)((0,qb.real)(e),(0,Zu.integer)(2)),(0,il.power)((0,IT.imag)(e),(0,Zu.integer)(2))),(0,Zu.rational)(1,2)));return Sr&&console.log(` --> ABS of ${t} : ${s}`),s}if((0,pt.ispower)(e)&&(0,Un.equaln)((0,pt.cadr)(e),-1)){let s=pt.Constants.One();if(Sr){console.log(` abs: ${e} is -1 to any power`);let n=pt.defs.evaluatingAsFloats?" abs: numeric, so result is 1.0":" abs: symbolic, so result is 1";console.log(n),console.log(` --> ABS of ${t} : ${s}`)}return s}if((0,pt.ispower)(e)&&(0,Un.ispositivenumber)((0,pt.caddr)(e))){let s=(0,il.power)(ed((0,pt.cadr)(e)),(0,pt.caddr)(e));return Sr&&(console.log(` abs: ${e} is something to the power of a positive number`),console.log(` --> ABS of ${t} : ${s}`)),s}if((0,pt.ispower)(e)&&(0,pt.cadr)(e)===(0,nl.symbol)(pt.E)){let s=(0,AT.exponential)((0,qb.real)((0,pt.caddr)(e)));return Sr&&(console.log(` abs: ${e} is an exponential`),console.log(` --> ABS of ${t} : ${s}`)),s}if((0,pt.ismultiply)(e)){let s=e.tail().map(al).reduce(Xu.multiply);return Sr&&(console.log(` abs: ${e} is a product`),console.log(` --> ABS of ${t} : ${s}`)),s}if((0,pt.car)(e)===(0,nl.symbol)(pt.ABS)){let s=(0,vb.makeList)((0,nl.symbol)(pt.ABS),(0,pt.cadr)(e));return Sr&&(console.log(` abs: ${e} is abs of a abs`),console.log(` --> ABS of ${t} : ${s}`)),s}if((0,pt.istensor)(e))return PT(e);((0,Un.isnegativeterm)(e)||(0,pt.isadd)(e)&&(0,Un.isnegativeterm)((0,pt.cadr)(e)))&&(e=(0,Xu.negate)(e));let r=(0,vb.makeList)((0,nl.symbol)(pt.ABS),e);return Sr&&(console.log(` abs: ${e} is nothing decomposable`),console.log(` --> ABS of ${t} : ${r}`)),r}function PT(e){return e.tensor.ndim!==1&&(0,jT.stop)("abs(tensor) with tensor rank > 1"),(0,Hu.Eval)((0,Eb.simplify)((0,il.power)((0,ST.inner)(e,(0,MT.conjugate)(e)),(0,Zu.rational)(1,2))))}var pt,Kf,jT,nl,AT,OT,Zu,MT,TT,Hu,NT,IT,ST,Un,vb,Xu,RT,il,qb,wT,Eb,Sr,is=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.absval=exports.abs=exports.absValFloat=exports.Eval_abs=void 0;pt=(T(),o(N)),Kf=(ar(),o(xr)),jT=(Ae(),o(Me)),nl=(U(),o(G)),AT=(Le(),o(Pe)),OT=(_e(),o(pe)),Zu=(Y(),o(V)),MT=(pn(),o(fi)),TT=(Ns(),o(eo)),Hu=(F(),o(z)),NT=(Ls(),o(_o)),IT=(Sa(),o(cu)),ST=(zo(),o(jn)),Un=(K(),o(te)),vb=(se(),o(oe)),Xu=(Q(),o(W)),RT=(no(),o($o)),il=(At(),o(Mt)),qb=(Ei(),o(Ra)),wT=(Ks(),o(Co)),Eb=(Ho(),o(Mn)),Sr=!1;exports.Eval_abs=LT;exports.absValFloat=CT;exports.abs=ed;exports.absval=al});var te={};function Nb(e){switch(e.k){case h.NUM:if((0,h.MZERO)(e.q.a))return!0;break;case h.DOUBLE:if(e.d===0)return!0;break}return!1}function UT(e){return(0,h.istensor)(e)?e.tensor.elem.every(t=>ll(t)):!1}function ll(e){return Nb(e)||UT(e)}function BT(e){let t=(0,hb.Eval_predicate)(e);if(ll(t))return!1;if((0,h.isNumericAtomOrTensor)(t))return!0;if(t=(0,kT.zzfloat)(t),ll(t))return!1;if((0,h.isNumericAtomOrTensor)(t))return!0;if((0,$i.Find)(t,h.Constants.imaginaryunit)){if(t=(0,hb.Eval_predicate)((0,DT.absValFloat)(t)),ll(t))return!1;if((0,h.isNumericAtomOrTensor)(t))return!0}return null}function Ju(e){switch(e.k){case h.NUM:if((0,h.MSIGN)(e.q.a)===-1)return!0;break;case h.DOUBLE:if(e.d<0)return!0;break}return!1}function GT(e){switch(e.k){case h.NUM:if((0,h.MSIGN)(e.q.a)===1)return!0;break;case h.DOUBLE:if(e.d>0)return!0;break}return!1}function FT(e){switch(e.k){case h.NUM:if((0,h.MEQUAL)(e.q.a,2)&&(0,h.MEQUAL)(e.q.b,1))return!0;break;case h.DOUBLE:if(e.d===2)return!0;break}return!1}function Ib(e){switch(e.k){case h.NUM:if((0,h.MEQUAL)(e.q.a,1)&&(0,h.MEQUAL)(e.q.b,1))return!0;break;case h.DOUBLE:if(e.d===1)return!0;break}return!1}function sd(e){switch(e.k){case h.NUM:if((0,h.MEQUAL)(e.q.a,-1)&&(0,h.MEQUAL)(e.q.b,1))return!0;break;case h.DOUBLE:if(e.d===-1)return!0;break}return!1}function zT(e){return Ib(e)||sd(e)}function Bn(e){return e.k===h.NUM&&(0,h.MEQUAL)(e.q.b,1)}function YT(e){return e.k===h.DOUBLE?e.d===Math.round(e.d):Bn(e)}function VT(e){return(0,h.isrational)(e)&&(0,h.MEQUAL)(e.q.b,1)&&(0,h.MSIGN)(e.q.a)===1}function Ku(e){return Bn(e)&&(0,h.MSIGN)(e.q.a)===1}function ZT(e,t){return t==null&&(t=(0,$T.guess)(e)),HT(e,t)&&XT((0,$i.Find)(e,(0,Jo.symbol)(h.SYMBOL_X)),(0,$i.Find)(e,(0,Jo.symbol)(h.SYMBOL_Y)),(0,$i.Find)(e,(0,Jo.symbol)(h.SYMBOL_Z)))===1?t:!1}function XT(...e){return e.reduce((t,r)=>t+Number(r),0)}function HT(e,t){return QT(e,t)}function QT(e,t){return(0,h.ismultiply)(e)?e.tail().every(r=>{let s=jb(r,t);return h.DEBUG&&(console.log(`ispolyfactoredorexpandedform_factor testing ${r}`),s&&console.log(`... tested negative:${r}`)),s}):jb(e,t)}function jb(e,t){return(0,h.ispower)(e)?(h.DEBUG&&console.log("ispolyfactoredorexpandedform_power (isposint(caddr(p)) "+(Ku((0,h.caddr)(e)),h.DEBUG?console.log("ispolyfactoredorexpandedform_power ispolyexpandedform_expr(cadr(p), x)) "+Qu((0,h.cadr)(e),t)):void 0)),Ku((0,h.caddr)(e))&&Qu((0,h.cadr)(e),t)):(h.DEBUG&&console.log(`ispolyfactoredorexpandedform_power not a power, testing if this is exp form: ${e}`),Qu(e,t))}function WT(e,t){return(0,$i.Find)(e,t)?Qu(e,t):!1}function Qu(e,t){return(0,h.isadd)(e)?e.tail().every(r=>Ab(r,t)):Ab(e,t)}function Ab(e,t){return(0,h.ismultiply)(e)?e.tail().every(r=>Ob(r,t)):Ob(e,t)}function Ob(e,t){return(0,tr.equal)(e,t)?!0:(0,h.ispower)(e)&&(0,tr.equal)((0,h.cadr)(e),t)?Ku((0,h.caddr)(e)):!(0,$i.Find)(e,t)}function td(e){return Ju(e)||(0,h.ismultiply)(e)&&Ju((0,h.cadr)(e))}function Sb(e){return(0,h.ispower)(e)&&(0,h.isrational)((0,h.car)((0,h.cdr)((0,h.cdr)(e))))&&Ju((0,h.car)((0,h.cdr)(e)))?(ul&&console.log(`hasNegativeRationalExponent: ${e} has imaginary component`),!0):(ul&&console.log(`hasNegativeRationalExponent: ${e} has NO imaginary component`),!1)}function Mb(e){return(0,h.ismultiply)(e)&&(0,tr.length)(e)===3&&(0,h.isdouble)((0,h.cadr)(e))&&Sb((0,h.caddr)(e))||(0,tr.equal)(e,h.Constants.imaginaryunit)}function rd(e){return(0,h.ismultiply)(e)&&(0,tr.length)(e)===3&&(0,h.isNumericAtom)((0,h.cadr)(e))&&(0,tr.equal)((0,h.caddr)(e),h.Constants.imaginaryunit)||(0,tr.equal)(e,h.Constants.imaginaryunit)||Sb((0,h.caddr)(e))?(ul&&console.log(`isimaginarynumber: ${e} is imaginary number`),!0):(ul&&console.log(`isimaginarynumber: ${e} isn't an imaginary number`),!1)}function JT(e){return(0,h.isadd)(e)&&(0,tr.length)(e)===3&&(0,h.isdouble)((0,h.cadr)(e))&&Mb((0,h.caddr)(e))||Mb(e)}function KT(e){return ul&&h.breakpoint,(0,h.isadd)(e)&&(0,tr.length)(e)===3&&(0,h.isNumericAtom)((0,h.cadr)(e))&&rd((0,h.caddr)(e))||rd(e)?(h.DEBUG&&console.log(`iscomplexnumber: ${e} is imaginary number`),!0):(h.DEBUG&&console.log(`iscomplexnumber: ${e} is imaginary number`),!1)}function eN(e){return Bn(e)&&e.q.a.isEven()}function tN(e){return(0,h.isadd)(e)&&td((0,h.cadr)(e))||td(e)}function Rb(e){return(0,h.issymbol)(e)?!0:(0,h.iscons)(e)?[...e].some(Rb):!1}function rN(e){return Bn(e)||(0,h.ispower)(e)&&Bn((0,h.cadr)(e))&&Bn((0,h.caddr)(e))}function sN(e){return wb(e)&&(0,h.MEQUAL)(e.q.a.abs(),1)}function oN(e){return(0,h.ispower)(e)&&sd((0,h.caddr)(e))}function wb(e){return e.k===h.NUM&&!(0,h.MEQUAL)(e.q.b,1)}function ec(e,t){switch(e.k){case h.NUM:return(0,h.MEQUAL)(e.q.a,t)&&(0,h.MEQUAL)(e.q.b,1);case h.DOUBLE:return e.d===t;default:return!1}}function tc(e,t,r){switch(e.k){case h.NUM:return(0,h.MEQUAL)(e.q.a,t)&&(0,h.MEQUAL)(e.q.b,r);case h.DOUBLE:return e.d===t/r;default:return!1}}function od(e){return tc(e,1,2)}function Lb(e){return tc(e,-1,2)}function Cb(e){return(0,h.ispower)(e)&&ec((0,h.cadr)(e),2)&&tc((0,h.caddr)(e),-1,2)}function nN(e){return(0,h.ismultiply)(e)&&ec((0,h.cadr)(e),-1)&&Cb((0,h.caddr)(e))&&(0,tr.length)(e)===3}function iN(e){return(0,h.ismultiply)(e)&&od((0,h.cadr)(e))&&Pb((0,h.caddr)(e))&&(0,tr.length)(e)===3}function aN(e){return(0,h.ismultiply)(e)&&Lb((0,h.cadr)(e))&&Pb((0,h.caddr)(e))&&(0,tr.length)(e)===3}function Pb(e){return(0,h.ispower)(e)&&ec((0,h.cadr)(e),3)&&od((0,h.caddr)(e))}function Db(e){return e.k===h.DOUBLE||e===(0,Jo.symbol)(h.FLOATF)?!0:(0,h.iscons)(e)?[...e].some(Db):!1}function lN(e){return(0,tr.equal)(e,h.Constants.imaginaryunit)}function uN(e){let t=0;if(!(0,h.ismultiply)(e))return 0;if((0,tr.equal)((0,h.cadr)(e),h.Constants.imaginaryunit))return(0,h.caddr)(e)!==(0,Jo.symbol)(h.PI)||(0,tr.length)(e)!==3?0:2;if(!(0,h.isNumericAtom)((0,h.cadr)(e))||!(0,tr.equal)((0,h.caddr)(e),h.Constants.imaginaryunit)||(0,h.cadddr)(e)!==(0,Jo.symbol)(h.PI)||(0,tr.length)(e)!==4)return 0;let r=(0,Wu.nativeInt)((0,Tb.multiply)((0,h.cadr)(e),(0,Wu.integer)(2)));if(isNaN(r))return 0;switch(r<1&&(t=1,r=-r),r%4){case 0:r=1;break;case 1:r=t?4:3;break;case 2:r=2;break;case 3:r=t?3:4}return r}function cN(e){let t=0;return e===(0,Jo.symbol)(h.PI)?2:!(0,h.ismultiply)(e)||!(0,h.isNumericAtom)((0,h.cadr)(e))||(0,h.caddr)(e)!==(0,Jo.symbol)(h.PI)||(0,tr.length)(e)!==3||(t=(0,Wu.nativeInt)((0,Tb.multiply)((0,h.cadr)(e),(0,Wu.integer)(2))),isNaN(t))?0:(t<0?t=4- -t%4:t=1+(t-1)%4,t)}var h,$i,Jo,tr,DT,Wu,hb,kT,$T,Tb,ul,K=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.isnpi=exports.isquarterturn=exports.isimaginaryunit=exports.isfloating=exports.isMinusSqrtThreeOverTwo=exports.isSqrtThreeOverTwo=exports.isminusoneoversqrttwo=exports.isoneoversqrttwo=exports.isminusoneovertwo=exports.isoneovertwo=exports.equalq=exports.equaln=exports.isfraction=exports.isoneover=exports.isNumberOneOverSomething=exports.isintegerfactor=exports.issymbolic=exports.isnegative=exports.iseveninteger=exports.iscomplexnumber=exports.iscomplexnumberdouble=exports.isimaginarynumber=exports.isnegativeterm=exports.ispolyexpandedform=exports.isunivarpolyfactoredorexpandedform=exports.isposint=exports.isnonnegativeinteger=exports.isintegerorintegerfloat=exports.isinteger=exports.isone=exports.isminusone=exports.isplusone=exports.isplustwo=exports.ispositivenumber=exports.isnegativenumber=exports.isZeroLikeOrNonZeroLikeOrUndetermined=exports.isZeroAtomOrTensor=exports.isZeroAtom=void 0;h=(T(),o(N)),$i=(ar(),o(xr)),Jo=(U(),o(G)),tr=(Le(),o(Pe)),DT=(is(),o(js)),Wu=(Y(),o(V)),hb=(F(),o(z)),kT=(Ls(),o(_o)),$T=(Hr(),o(us)),Tb=(Q(),o(W)),ul=!1;exports.isZeroAtom=Nb;exports.isZeroAtomOrTensor=ll;exports.isZeroLikeOrNonZeroLikeOrUndetermined=BT;exports.isnegativenumber=Ju;exports.ispositivenumber=GT;exports.isplustwo=FT;exports.isplusone=Ib;exports.isminusone=sd;exports.isone=zT;exports.isinteger=Bn;exports.isintegerorintegerfloat=YT;exports.isnonnegativeinteger=VT;exports.isposint=Ku;exports.isunivarpolyfactoredorexpandedform=ZT;exports.ispolyexpandedform=WT;exports.isnegativeterm=td;exports.isimaginarynumber=rd;exports.iscomplexnumberdouble=JT;exports.iscomplexnumber=KT;exports.iseveninteger=eN;exports.isnegative=tN;exports.issymbolic=Rb;exports.isintegerfactor=rN;exports.isNumberOneOverSomething=sN;exports.isoneover=oN;exports.isfraction=wb;exports.equaln=ec;exports.equalq=tc;exports.isoneovertwo=od;exports.isminusoneovertwo=Lb;exports.isoneoversqrttwo=Cb;exports.isminusoneoversqrttwo=nN;exports.isSqrtThreeOverTwo=iN;exports.isMinusSqrtThreeOverTwo=aN;exports.isfloating=Db;exports.isimaginaryunit=lN;exports.isquarterturn=uN;exports.isnpi=cN});var Go={};function mN(e,t){return e===t?0:e>t?1:-1}function xN(e){let t;if(Ko.defs.codeGen||Ko.defs.fullDoubleOutput)return""+e;if((0,dN.isZeroAtomOrTensor)((0,rc.get_binding)((0,rc.symbol)(Ko.FORCE_FIXED_PRINTOUT))))t=""+e,Ko.defs.printMode===Ko.PRINTMODE_LATEX?/\d*\.\d*e.*/gm.test(t)?t=t.replace(/e(.*)/gm,"\\mathrm{e}{$1}"):t=t.replace(/(\d+)e(.*)/gm,"$1.0\\mathrm{e}{$2}"):/\d*\.\d*e.*/gm.test(t)?t=t.replace(/e(.*)/gm,"*10^($1)"):t=t.replace(/(\d+)e(.*)/gm,"$1.0*10^($2)");else{let r=(0,fN.nativeInt)((0,rc.get_binding)((0,rc.symbol)(Ko.MAX_FIXED_PRINTOUT_DIGITS)));t=""+e.toFixed(r),t=t.replace(/(\.\d*?[1-9])0+$/gm,"$1"),t=t.replace(/\.0+$/gm,""),t.indexOf(".")===-1&&(t+=".0"),parseFloat(t)!==e&&(t=e.toFixed(r)+"...")}return t}function pN(){}function bN(e){return e==null?!1:e===" "||e==="	"||e===`
`||e==="\v"||e==="\f"||e==="\r"}function $b(e){return e==null?!1:/^\d+$/.test(e)}function gN(e){return e==null?!1:e.search(/[^A-Za-z]/)===-1}function yN(e){return e==null?!1:e.search(/[^A-Za-z_]/)===-1}function vN(e){return e==null?!1:yN(e)||$b(e)}function qN(e,t){let r=[];return(0,Ko.iscons)(e)&&r.push(...e),(0,Ko.iscons)(t)&&r.push(...t),(0,_N.makeList)(...r)}function EN(e,t){(0,kb.stop)("Not implemented")}function hN(e,t){(0,kb.stop)("Not implemented")}var fN,dN,_N,Ko,kb,rc,uo=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.yn=exports.jn=exports.append=exports.isalnumorunderscore=exports.isalpha=exports.isdigit=exports.isspace=exports.clear_term=exports.doubleToReasonableString=exports.strcmp=void 0;fN=(Y(),o(V)),dN=(K(),o(te)),_N=(se(),o(oe)),Ko=(T(),o(N)),kb=(Ae(),o(Me)),rc=(U(),o(G));exports.strcmp=mN;exports.doubleToReasonableString=xN;exports.clear_term=pN;exports.isspace=bN;exports.isdigit=$b;exports.isalpha=gN;exports.isalnumorunderscore=vN;exports.append=qN;exports.jn=EN;exports.yn=hN});var TN={};function MN(e,t){let r=(0,cl.mmul)(e.q.a,t.q.b),s=(0,cl.mmul)(e.q.b,t.q.a),n=(0,AN.madd)(r,s);if((0,nd.MZERO)(n))return nd.Constants.zero;let i=(0,cl.mmul)(e.q.b,t.q.b),a=(0,ON.mgcd)(n,i);a=(0,jN.makeSignSameAs)(a,i);let u=(0,cl.mdiv)(n,a),c=(0,cl.mdiv)(i,a);return new nd.Num(u,c)}var nd,jN,AN,ON,cl,Ub=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.qadd=void 0;nd=(T(),o(N)),jN=(Y(),o(V)),AN=(f0(),o(Z_)),ON=(di(),o(qa)),cl=(cs(),o(As));exports.qadd=MN});var wN={};function RN(e,t){if((0,sc.MZERO)(t.q.a)&&(0,NN.stop)("divide by zero"),(0,sc.MZERO)(e.q.a))return sc.Constants.zero;let r=(0,oc.mmul)(e.q.a,t.q.b),s=(0,oc.mmul)(e.q.b,t.q.a),n=(0,SN.mgcd)(r,s);return n=(0,IN.makeSignSameAs)(n,s),new sc.Num((0,oc.mdiv)(r,n),(0,oc.mdiv)(s,n))}var sc,NN,IN,SN,oc,Bb=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.qdiv=void 0;sc=(T(),o(N)),NN=(Ae(),o(Me)),IN=(Y(),o(V)),SN=(di(),o(qa)),oc=(cs(),o(As));exports.qdiv=RN});var DN={};function PN(e,t){if((0,nc.MZERO)(e.q.a)||(0,nc.MZERO)(t.q.a))return nc.Constants.zero;let r=(0,ic.mmul)(e.q.a,t.q.a),s=(0,ic.mmul)(e.q.b,t.q.b),n=(0,CN.mgcd)(r,s);return n=(0,LN.makeSignSameAs)(n,s),new nc.Num((0,ic.mdiv)(r,n),(0,ic.mdiv)(s,n))}var nc,LN,CN,ic,Gb=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.qmul=void 0;nc=(T(),o(N)),LN=(Y(),o(V)),CN=(di(),o(qa)),ic=(cs(),o(As));exports.qmul=PN});var V={};function YN(e){return(0,Bt.default)(e)}function Yb(e){return e.geq(Number.MIN_SAFE_INTEGER)&&e.leq(Number.MAX_SAFE_INTEGER)}function lc(e,t){if(e.isPositive()){if(t<0)return e.multiply((0,Bt.default)(-1))}else if(t>0)return e.multiply((0,Bt.default)(-1));return e}function ad(e,t){if(e.isPositive()){if(t.isNegative())return e.multiply((0,Bt.default)(-1))}else if(t.isPositive())return e.multiply((0,Bt.default)(-1));return e}function VN(e){return e.isNegative()?e.multiply((0,Bt.default)(-1)):e}function ZN(e,t){if((0,xe.isrational)(e)&&(0,xe.isrational)(t))return(0,GN.qadd)(e,t);let r=(0,xe.isdouble)(e)?e.d:xs(e),s=(0,xe.isdouble)(t)?t.d:xs(t);return ld(r+s)}function XN(e,t){if((0,xe.isrational)(e)&&(0,xe.isrational)(t))return(0,zN.qmul)(e,t);let r=(0,xe.isdouble)(e)?e.d:xs(e),s=(0,xe.isdouble)(t)?t.d:xs(t);return new xe.Double(r*s)}function HN(e,t){if((0,xe.isrational)(e)&&(0,xe.isrational)(t))return(0,FN.qdiv)(e,t);(0,Ui.isZeroAtomOrTensor)(t)&&(0,id.stop)("divide by zero");let r=(0,xe.isdouble)(e)?e.d:xs(e),s=(0,xe.isdouble)(t)?t.d:xs(t);return new xe.Double(r/s)}function QN(e){if((0,Ui.isZeroAtomOrTensor)(e)&&(0,id.stop)("divide by zero"),(0,xe.isdouble)(e))return new xe.Double(1/e.d);let t=(0,Bt.default)(e.q.a),r=(0,Bt.default)(e.q.b);return r=ad(r,t),t=lc(t,1),new xe.Num(r,t)}function WN(e,t){let r=(0,ac.mmul)(e.q.a,t.q.b),s=(0,ac.mmul)(e.q.b,t.q.a);return(0,$N.mcmp)(r,s)}function JN(e,t){if((0,xe.isrational)(e)&&(0,xe.isrational)(t))return WN(e,t);let r=(0,xe.isdouble)(e)?e.d:xs(e),s=(0,xe.isdouble)(t)?t.d:xs(t);return r<s?-1:r>s?1:0}function KN(e){if((0,Ui.isZeroAtomOrTensor)(e))return e;switch(e.k){case xe.NUM:return new xe.Num((0,Bt.default)(e.q.a.multiply(Bt.default.minusOne)),(0,Bt.default)(e.q.b));case xe.DOUBLE:return new xe.Double(-e.d);default:(0,id.stop)("bug caught in mp_negate_number")}}function eI(e){let t=(0,ac.mdiv)(e.q.a,e.q.b);return new xe.Num(t)}function tI(e){return(0,xe.isrational)(e)?new xe.Num((0,Bt.default)(e.q.a)):xe.Constants.one}function rI(e){return(0,xe.isrational)(e)?new xe.Num((0,Bt.default)(e.q.b)):xe.Constants.one}function sI(e,t){let r=(0,zb.mpow)(e.q.a,Math.abs(t)),s=(0,zb.mpow)(e.q.b,Math.abs(t));if(t<0){let n=r;r=s,s=n,r=ad(r,s),s=lc(s,1)}return new xe.Num(r,s)}function xs(e){e.q==null&&xe.breakpoint;let t=e.q.a.divmod(e.q.b);return t.quotient.toJSNumber()+t.remainder.toJSNumber()/e.q.b.toJSNumber()}function oI(e){return new xe.Num((0,Bt.default)(e))}function ld(e){return new xe.Double(e)}function nI(e,t){return new xe.Num((0,Bt.default)(e),(0,Bt.default)(t))}function iI(e){let t=NaN;switch(e.k){case xe.NUM:(0,Ui.isinteger)(e)&&Yb(e.q.a)&&(t=e.q.a.toJSNumber());break;case xe.DOUBLE:xe.DEBUG&&console.log("popping integer but double is found"),Math.floor(e.d)===e.d&&(xe.DEBUG&&console.log("...although it's an integer"),t=e.d);break}return t}function aI(e){let t=0,r=e[t];(r==="+"||r==="-")&&t++;let s=(0,Bt.default)(e.substring(t)),n=new xe.Num(s);return r==="-"&&(n=(0,BN.negate)(n)),n}function lI(e){return ld(parseFloat(e))}function uI(e,t){let r="",s="",n="";switch(e.k){case xe.NUM:var i=e.q.a.toString();t||i[0]==="-"&&(i=i.substring(1)),xe.defs.printMode===xe.PRINTMODE_LATEX&&(0,Ui.isfraction)(e)&&(i="\\frac{"+i+"}{"),r+=i,(0,Ui.isfraction)(e)&&(xe.defs.printMode!==xe.PRINTMODE_LATEX&&(r+="/"),s=e.q.b.toString(),xe.defs.printMode===xe.PRINTMODE_LATEX&&(s+="}"),r+=s);break;case xe.DOUBLE:i=(0,UN.doubleToReasonableString)(e.d),t||i[0]==="-"&&(i=i.substring(1)),r+=i;break}return r}function cI(e,t){let r=(0,Fb.mgcd)(e.q.a,t.q.a),s=(0,Fb.mgcd)(e.q.b,t.q.b);return new xe.Num(lc(r,1),s)}function fI(e){let t=0;switch(e.k){case xe.NUM:t=xs(e);break;case xe.DOUBLE:({d:t}=e);break;default:t=0}return t}function dI(e){let t=xs(e);return new xe.Double(t)}function _I(e){return new xe.Num(mI(e))}function mI(e){let t;if(e===0||e===1)return t=(0,Bt.default)(1),t;t=(0,Bt.default)(2);let r=(0,Bt.default)(0);if(3<=e)for(let s=3;s<=e;s++)r=(0,Bt.default)(s),t=(0,ac.mmul)(t,r);return t}var kN,Bt,xe,$N,UN,id,Ui,Fb,ac,zb,BN,GN,FN,zN,Y=j(()=>{"use strict";kN=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});exports.bignum_factorial=exports.bignum_float=exports.nativeDouble=exports.gcd_numbers=exports.print_number=exports.bignum_scan_float=exports.bignum_scan_integer=exports.nativeInt=exports.rational=exports.double=exports.integer=exports.convert_rational_to_double=exports.bignum_power_number=exports.mp_denominator=exports.mp_numerator=exports.bignum_truncate=exports.negate_number=exports.compare_numbers=exports.invert_number=exports.divide_numbers=exports.multiply_numbers=exports.add_numbers=exports.makePositive=exports.makeSignSameAs=exports.setSignTo=exports.isSmall=exports.mint=void 0;Bt=kN(No()),xe=(T(),o(N)),$N=(Ul(),o(Jc)),UN=(uo(),o(Go)),id=(Ae(),o(Me)),Ui=(K(),o(te)),Fb=(di(),o(qa)),ac=(cs(),o(As)),zb=(_u(),o(P0)),BN=(Q(),o(W)),GN=(Ub(),o(TN)),FN=(Bb(),o(wN)),zN=(Gb(),o(DN));exports.mint=YN;exports.isSmall=Yb;exports.setSignTo=lc;exports.makeSignSameAs=ad;exports.makePositive=VN;exports.add_numbers=ZN;exports.multiply_numbers=XN;exports.divide_numbers=HN;exports.invert_number=QN;exports.compare_numbers=JN;exports.negate_number=KN;exports.bignum_truncate=eI;exports.mp_numerator=tI;exports.mp_denominator=rI;exports.bignum_power_number=sI;exports.convert_rational_to_double=xs;exports.integer=oI;exports.double=ld;exports.rational=nI;exports.nativeInt=iI;exports.bignum_scan_integer=aI;exports.bignum_scan_float=lI;exports.print_number=uI;exports.gcd_numbers=cI;exports.nativeDouble=fI;exports.bignum_float=dI;exports.bignum_factorial=_I});var Mp={};function Vb(e){return(0,Rt.doexpand)(bI,e)}function bI(e){let t=(0,en.ispolyexpandedform)(e,(0,Rr.symbol)(Rt.SYMBOL_S)),r=(0,en.ispolyexpandedform)(e,(0,Rr.symbol)(Rt.SYMBOL_T)),s=(0,en.ispolyexpandedform)(e,(0,Rr.symbol)(Rt.SYMBOL_X)),n=(0,en.ispolyexpandedform)(e,(0,Rr.symbol)(Rt.SYMBOL_Y)),i=(0,en.ispolyexpandedform)(e,(0,Rr.symbol)(Rt.SYMBOL_Z)),a;return t&&!r&&!s&&!n&&!i?a=Bi(e,(0,Rr.symbol)(Rt.SYMBOL_S)):!t&&r&&!s&&!n&&!i?a=Bi(e,(0,Rr.symbol)(Rt.SYMBOL_T)):!t&&!r&&s&&!n&&!i?a=Bi(e,(0,Rr.symbol)(Rt.SYMBOL_X)):!t&&!r&&!s&&n&&!i?a=Bi(e,(0,Rr.symbol)(Rt.SYMBOL_Y)):!t&&!r&&!s&&!n&&i?a=Bi(e,(0,Rr.symbol)(Rt.SYMBOL_Z)):(0,Rt.iscons)(e)&&(0,Rt.car)(e)!==(0,Rr.symbol)(Rt.FOR)?a=(0,fl.makeList)((0,Rt.car)(e),...e.tail().map(Vb)):a=e,a}function Zb(e,t){return(0,en.ispolyexpandedform)(e,t)?Bi(e,t):(0,Rt.iscons)(e)?(0,fl.makeList)((0,Rt.car)(e),...e.tail().map(r=>Zb(r,t))):e}function Bi(e,t){let r=(0,pI.coeff)(e,t),s=[];for(let n=r.length-1;n>=0;n--){let i=r[n];s.push(...gI(n,i,t))}return s.length>1?new Rt.Cons((0,Rr.symbol)(Rt.ADD),(0,fl.makeList)(...s)):s[0]}function gI(e,t,r){if((0,en.isZeroAtomOrTensor)(t))return[];if(e===0)return(0,Rt.isadd)(t)?t.tail():[t];let s=[];return(0,Rt.ismultiply)(t)?s.push(...t.tail()):(0,en.equaln)(t,1)||s.push(t),e===1?s.push(r):s.push((0,fl.makeList)((0,Rr.symbol)(Rt.POWER),r,(0,xI.integer)(e))),s.length>1?[(0,fl.makeList)((0,Rr.symbol)(Rt.MULTIPLY),...s)]:s}var Rt,xI,pI,en,fl,Rr,If=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.polyform=exports.bake=void 0;Rt=(T(),o(N)),xI=(Y(),o(V)),pI=(xn(),o(ui)),en=(K(),o(te)),fl=(se(),o(oe)),Rr=(U(),o(G));exports.bake=Vb;exports.polyform=Zb});var eg={};function jI(e){return uc((0,po.cadr)(e))}function uc(e){if((0,po.istensor)(e)){let t=(0,yI.alloc_tensor)(e.tensor.nelem);return t.tensor.ndim=e.tensor.ndim,t.tensor.dim=Array.from(e.tensor.dim),t.tensor.elem=t.tensor.elem.map(r=>{let s=uc(r);return(0,hI.check_tensor_dimensions)(t),s}),t}return e.k===po.DOUBLE?AI(e):(0,po.iscons)(e)?new po.Cons(uc((0,po.car)(e)),uc((0,po.cdr)(e))):e}function AI(e){let t=(0,qI.zzfloat)(e);if(t.k===po.DOUBLE){let r=t.d,s=r.toString().split(".");if(s.length===2){let n=s[1].length,i=1/Math.pow(10,n),a=OI(r,i);return(0,Xb.rational)(a[0],a[1])}return(0,Xb.integer)(r)}return(0,EI.makeList)((0,vI.symbol)(po.APPROXRATIO),t)}function OI(e,t){if(isNaN(e))return[0,0];if(e===1/0)return[1,0];if(e===-1/0)return[-1,0];let r=e<0?-1:1;if(e=Math.abs(e),Math.abs(e-Math.floor(e))<t)return[e*r,1];if(e<1e-19)return[r,1e19];if(e>1e19)return[1e19*r,1];let s=e,n=0,i=1,a;for(;;){s=1/(s-Math.floor(s));let u=i;if(i=i*Math.floor(s)+n,n=u,a=Math.floor(e*i+.5),!(Math.abs(e-a/i)>t)||s===Math.floor(s))break}return a=r*a,[a,i]}function SI(e){let t,r=e.toString().split(".");if(r.length===2){let i=r[1].length;t=1/Math.pow(10,i)}else return[""+Math.floor(e),Kr,Math.floor(e),1,2];console.log(`precision: ${t}`);let s=null,n=Number.MAX_VALUE;for(let i of[2,3,5,6,7,8,10])for(let a=1;a<=10;a++){let u,c,d,m=Math.sqrt(i)/a;if(Math.abs(m)>1e-10?(d=e/m,c=Math.round(d),u=Math.abs(1-d/c)):(d=1,c=1,u=Math.abs(e-m)),u<2*t){let R=$r(c,i,a);R<n&&(n=R,s=[`${c} * sqrt( ${i} ) / ${a}`,TI,c,i,a])}}return s}function RI(e){let t,r=e.toString().split(".");if(r.length===2){let i=r[1].length;t=1/Math.pow(10,i)}else return[""+Math.floor(e),Kr,Math.floor(e),1,2];console.log(`precision: ${t}`);let s=null,n=Number.MAX_VALUE;for(let i of[1,2,3,5,6,7,8,10])for(let a of[1,2,3,5,6,7,8,10]){let u,c,d,m=Math.sqrt(i/a);if(Math.abs(m)>1e-10?(d=e/m,c=Math.round(d),u=Math.abs(1-d/c)):(d=1,c=1,u=Math.abs(e-m)),u<2*t){let R=$r(c,i,a);R<n&&(n=R,s=[`${c} * (sqrt( ${i} / ${a} )`,ud,c,i,a])}}return s}function Gn(e){let t,r=e.toString().split(".");if(r.length===2){let i=r[1].length;t=1/Math.pow(10,i)}else return[""+Math.floor(e),Kr,Math.floor(e),1,2];console.log(`precision: ${t}`);let s=SI(e);if(s!=null)return s;let n=RI(e);return n!=null?n:null}function dl(e){let t,r=e.toString().split(".");if(r.length===2){let i=r[1].length;t=1/Math.pow(10,i)}else return[""+Math.floor(e),Kr,Math.floor(e),1,2];console.log(`precision: ${t}`);let s=Jb(e);if(s!=null)return s;let n=wI(e);return n!=null?n:null}function Jb(e){let t,r=e.toString().split(".");if(r.length===2){let i=r[1].length;t=1/Math.pow(10,i)}else return[""+Math.floor(e),Kr,Math.floor(e),1,2];console.log(`precision: ${t}`);let s=null,n=Number.MAX_VALUE;for(let i=2;i<=5;i++)for(let a=1;a<=5;a++){let u,c,d,m=Math.log(i)/a;if(Math.abs(m)>1e-10?(d=e/m,c=Math.round(d),u=Math.abs(1-d/c)):(d=1,c=1,u=Math.abs(e-m)),!(c!==1&&Math.abs(Math.floor(c/a))===Math.abs(c/a))&&u<2.2*t){let R=$r(c,i,a);R<n&&(n=R,s=[`${c} * log( ${i} ) / ${a}`,II,c,i,a])}}return s}function wI(e){let t,r=e.toString().split(".");if(r.length===2){let i=r[1].length;t=1/Math.pow(10,i)}else return[""+Math.floor(e),Kr,Math.floor(e),1,2];console.log(`precision: ${t}`);let s=null,n=Number.MAX_VALUE;for(let i=1;i<=5;i++)for(let a=1;a<=5;a++){let u,c,d,m=Math.log(i/a);if(Math.abs(m)>1e-10?(d=e/m,c=Math.round(d),u=Math.abs(1-d/c)):(d=1,c=1,u=Math.abs(e-m)),u<1.96*t){let R=$r(c,i,a);R<n&&(n=R,s=[`${c} * log( ${i} / ${a} )`,NI,c,i,a])}}return s}function Kb(e){let t,r=e.toString().split(".");if(r.length===2){let i=r[1].length;t=1/Math.pow(10,i)}else return[""+Math.floor(e),Kr,Math.floor(e),1,2];console.log(`precision: ${t}`);let s=null,n=Number.MAX_VALUE;for(let i=1;i<=2;i++)for(let a=1;a<=12;a++){let u,c,d,m=Math.pow(Math.E,i)/a;if(Math.abs(m)>1e-10?(d=e/m,c=Math.round(d),u=Math.abs(1-d/c)):(d=1,c=1,u=Math.abs(e-m)),u<2*t){let R=$r(c,i,a);R<n&&(n=R,s=[`${c} * (e ^ ${i} ) / ${a}`,Wb,c,i,a])}}return s}function cd(e){let t,r=e.toString().split(".");if(r.length===2){let i=r[1].length;t=1/Math.pow(10,i)}else return[""+Math.floor(e),Kr,Math.floor(e),1,2];console.log(`precision: ${t}`);let s=null,n=Number.MAX_VALUE;for(let i=1;i<=5;i++)for(let a=1;a<=12;a++){let u,c,d,m=Math.pow(Math.PI,i)/a;if(Math.abs(m)>1e-10?(d=e/m,c=Math.round(d),u=Math.abs(1-d/c)):(d=1,c=1,u=Math.abs(e-m)),u<2*t){let R=$r(c,i,a);R<n&&(n=R,s=[`${c} * (pi ^ ${i} ) / ${a} )`,Qb,c,i,a])}}return s}function _l(e){let t,r=e.toString().split(".");if(r.length===2){let i=r[1].length;t=1/Math.pow(10,i)}else return[""+Math.floor(e),Kr,Math.floor(e),1,2];console.log(`precision: ${t}`);let s=LI(e);if(s!=null)return s;let n=CI(e);return n!=null?n:null}function LI(e){let t,r=e.toString().split(".");if(r.length===2){let i=r[1].length;t=1/Math.pow(10,i)}else return[""+Math.floor(e),Kr,Math.floor(e),1,2];console.log(`precision: ${t}`);let s=null,n=Number.MAX_VALUE;for(let i=1;i<=4;i++)for(let a=1;a<=4;a++){let u,c,d,m=i/a,R=Math.sin(m);if(Math.abs(R)>1e-10?(d=e/R,c=Math.round(d),u=Math.abs(1-d/c)):(d=1,c=1,u=Math.abs(e-R)),u<2*t){let M=$r(c,i,a);M<n&&(n=M,s=[`${c} * sin( ${i}/${a} )`,MI,c,i,a])}}return s}function CI(e){let t,r=e.toString().split(".");if(r.length===2){let i=r[1].length;t=1/Math.pow(10,i)}else return[""+Math.floor(e),Kr,Math.floor(e),1,2];console.log(`precision: ${t}`);let s=null,n=Number.MAX_VALUE;for(let i=1;i<=13;i++)for(let a=1;a<=13;a++){let u,c,d,m=i/a,R=Math.sin(Math.PI*m);if(Math.abs(R)>1e-10?(d=e/R,c=Math.round(d),u=Math.abs(1-d/c)):(d=1,c=1,u=Math.abs(e-R)),u<23*t){let M=$r(c,i,a);M<n&&(n=M,s=[`${c} * sin( ${i}/${a} * pi )`,Hb,c,i,a])}}return s}function Ce(e){let t,r=e.toString().split(".");if(r.length===2){let M=r[1].length;t=1/Math.pow(10,M)}else return[""+Math.floor(e),Kr,Math.floor(e),1,2];console.log(`precision: ${t}`);let s=Number.MAX_VALUE,n=0,i=null,a=!0,u=Gn(e);u!=null&&(n=$r(u),n<s?(a&&console.log(`better explanation by approxRadicals: ${u} complexity: ${n}`),s=n,i=u):a&&console.log(`subpar explanation by approxRadicals: ${u} complexity: ${n}`));let c=dl(e);c!=null&&(n=$r(c),n<s?(a&&console.log(`better explanation by approxLogs: ${c} complexity: ${n}`),s=n,i=c):a&&console.log(`subpar explanation by approxLogs: ${c} complexity: ${n}`));let d=Kb(e);d!=null&&(n=$r(d),n<s?(a&&console.log(`better explanation by approxRationalsOfPowersOfE: ${d} complexity: ${n}`),s=n,i=d):a&&console.log(`subpar explanation by approxRationalsOfPowersOfE: ${d} complexity: ${n}`));let m=cd(e);m!=null&&(n=$r(m),n<s?(a&&console.log(`better explanation by approxRationalsOfPowersOfPI: ${m} complexity: ${n}`),s=n,i=m):a&&console.log(`subpar explanation by approxRationalsOfPowersOfPI: ${m} complexity: ${n}`));let R=_l(e);return R!=null&&(n=$r(R),n<s?(a&&console.log(`better explanation by approxTrigonometric: ${R} complexity: ${n}`),s=n,i=R):a&&console.log(`subpar explanation by approxTrigonometric: ${R} complexity: ${n}`)),i}function $r(e,t,r){let s=0;if(e instanceof Array){switch(e[1]){case Hb:s=4;break;case Qb:s=Math.pow(4,Math.abs(e[3]))*Math.abs(e[2]);break;case Wb:s=Math.pow(3,Math.abs(e[3]))*Math.abs(e[2]);break;default:s=0}s+=Math.abs(e[2])*(Math.abs(e[3])+Math.abs(e[4]))}else s+=Math.abs(e)*(Math.abs(t)+Math.abs(r));return e[2]===1?s-=1:s+=1,e[3]===1?s-=1:s+=1,e[4]===1?s-=1:s+=1,s<0&&(s=0),s}function PI(){for(let t of[2,3,5,6,7,8,10])for(let r of[2,3,5,6,7,8,10]){if(t===r)continue;console.log(`testapproxRadicals testing: 1 * sqrt( ${t} ) / ${r}`);let s=t/r,n=Math.sqrt(t)/r,i=Gn(n),a=i[2]*Math.sqrt(i[3])/i[4];Math.abs(n-a)>1e-15&&console.log(`fail testapproxRadicals: 1 * sqrt( ${t} ) / ${r} . obtained: ${i}`)}for(let t of[2,3,5,6,7,8,10])for(let r of[2,3,5,6,7,8,10]){if(t===r)continue;console.log(`testapproxRadicals testing with 4 digits: 1 * sqrt( ${t} ) / ${r}`);let s=t/r,n=Math.sqrt(t)/r,i=n.toFixed(4),a=Gn(Number(i)),u=a[2]*Math.sqrt(a[3])/a[4];Math.abs(n-u)>1e-15&&console.log(`fail testapproxRadicals with 4 digits: 1 * sqrt( ${t} ) / ${r} . obtained: ${a}`)}for(let t of[2,3,5,6,7,8,10])for(let r of[2,3,5,6,7,8,10]){if(t===r)continue;console.log(`testapproxRadicals testing: 1 * sqrt( ${t} / ${r} )`);let s=t/r,n=Math.sqrt(t/r),i=Gn(n);if(i!=null){let a=i[2]*Math.sqrt(i[3]/i[4]);i[1]===ud&&Math.abs(n-a)>1e-15&&console.log(`fail testapproxRadicals: 1 * sqrt( ${t} / ${r} ) . obtained: ${i}`)}}for(let t of[1,2,3,5,6,7,8,10])for(let r of[1,2,3,5,6,7,8,10]){if(t===1&&r===1)continue;console.log(`testapproxRadicals testing with 4 digits:: 1 * sqrt( ${t} / ${r} )`);let s=t/r,n=Math.sqrt(t/r),i=n.toFixed(4),a=Gn(Number(i)),u=a[2]*Math.sqrt(a[3]/a[4]);a[1]===ud&&Math.abs(n-u)>1e-15&&console.log(`fail testapproxRadicals with 4 digits:: 1 * sqrt( ${t} / ${r} ) . obtained: ${a}`)}for(let t=1;t<=5;t++)for(let r=1;r<=5;r++){console.log(`testApproxAll testing: 1 * log(${t} ) / ${r}`);let s=t/r,n=Math.log(t)/r,i=Ce(n),a=i[2]*Math.log(i[3])/i[4];Math.abs(n-a)>1e-15&&console.log(`fail testApproxAll: 1 * log(${t} ) / ${r} . obtained: ${i}`)}for(let t=1;t<=5;t++)for(let r=1;r<=5;r++){console.log(`testApproxAll testing with 4 digits: 1 * log(${t} ) / ${r}`);let s=t/r,n=Math.log(t)/r,i=n.toFixed(4),a=Ce(Number(i)),u=a[2]*Math.log(a[3])/a[4];Math.abs(n-u)>1e-15&&console.log(`fail testApproxAll with 4 digits: 1 * log(${t} ) / ${r} . obtained: ${a}`)}for(let t=1;t<=5;t++)for(let r=1;r<=5;r++){console.log(`testApproxAll testing: 1 * log(${t} / ${r} )}`);let s=t/r,n=Math.log(t/r),i=Ce(n),a=i[2]*Math.log(i[3]/i[4]);Math.abs(n-a)>1e-15&&console.log(`fail testApproxAll: 1 * log(${t} / ${r} ) . obtained: ${i}`)}for(let t=1;t<=5;t++)for(let r=1;r<=5;r++){console.log(`testApproxAll testing with 4 digits: 1 * log(${t} / ${r} )`);let s=t/r,n=Math.log(t/r),i=n.toFixed(4),a=Ce(Number(i)),u=a[2]*Math.log(a[3]/a[4]);Math.abs(n-u)>1e-15&&console.log(`fail testApproxAll with 4 digits: 1 * log(${t} / ${r} ) . obtained: ${a}`)}for(let t=1;t<=2;t++)for(let r=1;r<=12;r++){console.log(`testApproxAll testing: 1 * (e ^ ${t} ) / ${r}`);let s=t/r,n=Math.pow(Math.E,t)/r,i=Ce(n),a=i[2]*Math.pow(Math.E,i[3])/i[4];Math.abs(n-a)>1e-15&&console.log(`fail testApproxAll: 1 * (e ^ ${t} ) / ${r} . obtained: ${i}`)}for(let t=1;t<=2;t++)for(let r=1;r<=12;r++){console.log(`approxRationalsOfPowersOfE testing with 4 digits: 1 * (e ^ ${t} ) / ${r}`);let s=t/r,n=Math.pow(Math.E,t)/r,i=n.toFixed(4),a=Kb(Number(i)),u=a[2]*Math.pow(Math.E,a[3])/a[4];Math.abs(n-u)>1e-15&&console.log(`fail approxRationalsOfPowersOfE with 4 digits: 1 * (e ^ ${t} ) / ${r} . obtained: ${a}`)}for(let t=1;t<=2;t++)for(let r=1;r<=12;r++){console.log(`testApproxAll testing: 1 * pi ^ ${t} / ${r}`);let s=t/r,n=Math.pow(Math.PI,t)/r,i=Ce(n),a=i[2]*Math.pow(Math.PI,i[3])/i[4];Math.abs(n-a)>1e-15&&console.log(`fail testApproxAll: 1 * pi ^ ${t} / ${r} ) . obtained: ${i}`)}for(let t=1;t<=2;t++)for(let r=1;r<=12;r++){console.log(`approxRationalsOfPowersOfPI testing with 4 digits: 1 * pi ^ ${t} / ${r}`);let s=t/r,n=Math.pow(Math.PI,t)/r,i=n.toFixed(4),a=cd(Number(i)),u=a[2]*Math.pow(Math.PI,a[3])/a[4];Math.abs(n-u)>1e-15&&console.log(`fail approxRationalsOfPowersOfPI with 4 digits: 1 * pi ^ ${t} / ${r} ) . obtained: ${a}`)}for(let t=1;t<=4;t++)for(let r=1;r<=4;r++){console.log(`testApproxAll testing: 1 * sin( ${t}/${r} )}`);let s=t/r,n=Math.sin(s),i=Ce(n),a=i[3]/i[4],u=i[2]*Math.sin(a);Math.abs(n-u)>1e-15&&console.log(`fail testApproxAll: 1 * sin( ${t}/${r} ) . obtained: ${i}`)}for(let t=1;t<=4;t++)for(let r=1;r<=4;r++){console.log(`testApproxAll testing with 5 digits: 1 * sin( ${t}/${r} )`);let s=t/r,n=Math.sin(s),i=n.toFixed(5),a=Ce(Number(i));a==null&&console.log(`fail testApproxAll with 5 digits: 1 * sin( ${t}/${r} ) . obtained:  undefined `);let u=a[3]/a[4],c=a[2]*Math.sin(u),d=Math.abs(n-c);d>1e-14&&console.log(`fail testApproxAll with 5 digits: 1 * sin( ${t}/${r} ) . obtained: ${a} error: ${d}`)}for(let t=1;t<=4;t++)for(let r=1;r<=4;r++){console.log(`testApproxAll testing with 4 digits: 1 * sin( ${t}/${r} )`);let s=t/r,n=Math.sin(s),i=n.toFixed(4),a=Ce(Number(i));a==null&&console.log(`fail testApproxAll with 4 digits: 1 * sin( ${t}/${r} ) . obtained:  undefined `);let u=a[3]/a[4],c=a[2]*Math.sin(u),d=Math.abs(n-c);d>1e-14&&console.log(`fail testApproxAll with 4 digits: 1 * sin( ${t}/${r} ) . obtained: ${a} error: ${d}`)}let e=0;Ce(e)[0]!=="0"&&console.log("fail testApproxAll: 0"),e=0,Ce(e)[0]!=="0"&&console.log("fail testApproxAll: 0.0"),e=0,Ce(e)[0]!=="0"&&console.log("fail testApproxAll: 0.00"),e=0,Ce(e)[0]!=="0"&&console.log("fail testApproxAll: 0.000"),e=0,Ce(e)[0]!=="0"&&console.log("fail testApproxAll: 0.0000"),e=1,Ce(e)[0]!=="1"&&console.log("fail testApproxAll: 1"),e=1,Ce(e)[0]!=="1"&&console.log("fail testApproxAll: 1.0"),e=1,Ce(e)[0]!=="1"&&console.log("fail testApproxAll: 1.00"),e=1,Ce(e)[0]!=="1"&&console.log("fail testApproxAll: 1.000"),e=1,Ce(e)[0]!=="1"&&console.log("fail testApproxAll: 1.0000"),e=1,Ce(e)[0]!=="1"&&console.log("fail testApproxAll: 1.00000"),e=Math.sqrt(2),Ce(e)[0]!=="1 * sqrt( 2 ) / 1"&&console.log("fail testApproxAll: Math.sqrt(2)"),e=1.41,Ce(e)[0]!=="1 * sqrt( 2 ) / 1"&&console.log("fail testApproxAll: 1.41"),e=1.4,Gn(e)[0]!=="1 * sqrt( 2 ) / 1"&&console.log("fail approxRadicals: 1.4"),e=.6,dl(e)[0]!=="1 * log( 2 ) / 1"&&console.log("fail approxLogs: 0.6"),e=.69,dl(e)[0]!=="1 * log( 2 ) / 1"&&console.log("fail approxLogs: 0.69"),e=.7,dl(e)[0]!=="1 * log( 2 ) / 1"&&console.log("fail approxLogs: 0.7"),e=1.09,dl(e)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxLogs: 1.09"),e=1.09,Ce(e)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.09"),e=1.098,Ce(e)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.098"),e=1.1,Ce(e)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.1"),e=1.11,Ce(e)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.11"),e=Math.sqrt(3),Ce(e)[0]!=="1 * sqrt( 3 ) / 1"&&console.log("fail testApproxAll: Math.sqrt(3)"),e=1,Ce(e)[0]!=="1"&&console.log("fail testApproxAll: 1.0000"),e=3.141592,Ce(e)[0]!=="1 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 3.141592"),e=31.41592,Ce(e)[0]!=="10 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 31.41592"),e=314.1592,Ce(e)[0]!=="100 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 314.1592"),e=3141592653589793e-8,Ce(e)[0]!=="10000000 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 31415926.53589793"),e=Math.sqrt(2),_l(e)[0]!=="2 * sin( 1/4 * pi )"&&console.log("fail approxTrigonometric: Math.sqrt(2)"),e=Math.sqrt(3),_l(e)[0]!=="2 * sin( 1/3 * pi )"&&console.log("fail approxTrigonometric: Math.sqrt(3)"),e=(Math.sqrt(6)-Math.sqrt(2))/4,Ce(e)[0]!=="1 * sin( 1/12 * pi )"&&console.log("fail testApproxAll: (Math.sqrt(6) - Math.sqrt(2))/4"),e=Math.sqrt(2-Math.sqrt(2))/2,Ce(e)[0]!=="1 * sin( 1/8 * pi )"&&console.log("fail testApproxAll: Math.sqrt(2 - Math.sqrt(2))/2"),e=(Math.sqrt(6)+Math.sqrt(2))/4,Ce(e)[0]!=="1 * sin( 5/12 * pi )"&&console.log("fail testApproxAll: (Math.sqrt(6) + Math.sqrt(2))/4"),e=Math.sqrt(2+Math.sqrt(3))/2,Ce(e)[0]!=="1 * sin( 5/12 * pi )"&&console.log("fail testApproxAll: Math.sqrt(2 + Math.sqrt(3))/2"),e=(Math.sqrt(5)-1)/4,Ce(e)[0]!=="1 * sin( 1/10 * pi )"&&console.log("fail testApproxAll: (Math.sqrt(5) - 1)/4"),e=Math.sqrt(10-2*Math.sqrt(5))/4,Ce(e)[0]!=="1 * sin( 1/5 * pi )"&&console.log("fail testApproxAll: Math.sqrt(10 - 2*Math.sqrt(5))/4"),e=Math.sin(Math.PI/7),Ce(e)[0]!=="1 * sin( 1/7 * pi )"&&console.log("fail testApproxAll: Math.sin(Math.PI/7)"),e=Math.sin(Math.PI/9),Ce(e)[0]!=="1 * sin( 1/9 * pi )"&&console.log("fail testApproxAll: Math.sin(Math.PI/9)"),e=1836.15267,cd(e)[0]!=="6 * (pi ^ 5 ) / 1 )"&&console.log("fail approxRationalsOfPowersOfPI: 1836.15267");for(let t=1;t<=13;t++)for(let r=1;r<=13;r++){console.log(`approxTrigonometric testing: 1 * sin( ${t}/${r} * pi )`);let s=t/r;e=Math.sin(Math.PI*s);let n=_l(e),i=n[3]/n[4],a=n[2]*Math.sin(Math.PI*i);Math.abs(e-a)>1e-15&&console.log(`fail approxTrigonometric: 1 * sin( ${t}/${r} * pi ) . obtained: ${n}`)}for(let t=1;t<=13;t++)for(let r=1;r<=13;r++){if(t===5&&r===11||t===6&&r===11)continue;console.log(`approxTrigonometric testing with 4 digits: 1 * sin( ${t}/${r} * pi )`);let s=t/r,n=Math.sin(Math.PI*s),i=n.toFixed(4),a=_l(Number(i)),u=a[3]/a[4],c=a[2]*Math.sin(Math.PI*u),d=Math.abs(n-c);d>1e-14&&console.log(`fail approxTrigonometric with 4 digits: 1 * sin( ${t}/${r} * pi ) . obtained: ${a} error: ${d}`)}return console.log("testApprox done")}var yI,po,vI,Xb,qI,EI,hI,Kr,MI,Hb,Qb,ud,TI,Wb,NI,II,fd=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.testApprox=exports.approxAll=exports.approxRationalsOfLogs=exports.approxRadicals=exports.Eval_approxratio=void 0;yI=(Ct(),o(Dt)),po=(T(),o(N)),vI=(U(),o(G)),Xb=(Y(),o(V)),qI=(Ls(),o(_o)),EI=(se(),o(oe)),hI=(jt(),o(Ot));exports.Eval_approxratio=jI;Kr=0,MI=1,Hb=2,Qb=3,ud=4,TI=6,Wb=7,NI=8,II=9;exports.approxRadicals=Gn;exports.approxRationalsOfLogs=Jb;exports.approxAll=Ce;exports.testApprox=PI});var UI={};function kI(e){return $I((0,DI.Eval)((0,ie.cadr)(e)))}function $I(e){if((0,ie.car)(e)===(0,es.symbol)(ie.COS))return(0,ie.cadr)(e);if((0,ie.isdouble)(e))return(0,_r.double)(Math.acos(e.d));if((0,Ds.isoneoversqrttwo)(e)||(0,ie.ismultiply)(e)&&(0,Ds.equalq)((0,ie.car)((0,ie.cdr)(e)),1,2)&&(0,ie.car)((0,ie.car)((0,ie.cdr)((0,ie.cdr)(e))))===(0,es.symbol)(ie.POWER)&&(0,Ds.equaln)((0,ie.car)((0,ie.cdr)((0,ie.car)((0,ie.cdr)((0,ie.cdr)(e))))),2)&&(0,Ds.equalq)((0,ie.car)((0,ie.cdr)((0,ie.cdr)((0,ie.car)((0,ie.cdr)((0,ie.cdr)(e)))))),1,2))return ie.defs.evaluatingAsFloats?(0,_r.double)(Math.PI/4):(0,tn.multiply)((0,_r.rational)(1,4),(0,es.symbol)(ie.PI));if((0,Ds.isminusoneoversqrttwo)(e)||(0,ie.ismultiply)(e)&&(0,Ds.equalq)((0,ie.car)((0,ie.cdr)(e)),-1,2)&&(0,ie.car)((0,ie.car)((0,ie.cdr)((0,ie.cdr)(e))))===(0,es.symbol)(ie.POWER)&&(0,Ds.equaln)((0,ie.car)((0,ie.cdr)((0,ie.car)((0,ie.cdr)((0,ie.cdr)(e))))),2)&&(0,Ds.equalq)((0,ie.car)((0,ie.cdr)((0,ie.cdr)((0,ie.car)((0,ie.cdr)((0,ie.cdr)(e)))))),1,2))return ie.defs.evaluatingAsFloats?(0,_r.double)(Math.PI*3/4):(0,tn.multiply)((0,_r.rational)(3,4),(0,es.symbol)(ie.PI));if((0,Ds.isSqrtThreeOverTwo)(e))return ie.defs.evaluatingAsFloats?(0,_r.double)(Math.PI/6):(0,tn.multiply)((0,_r.rational)(1,6),(0,es.symbol)(ie.PI));if((0,Ds.isMinusSqrtThreeOverTwo)(e))return ie.defs.evaluatingAsFloats?(0,_r.double)(5*Math.PI/6):(0,tn.multiply)((0,_r.rational)(5,6),(0,es.symbol)(ie.PI));if(!(0,ie.isrational)(e))return(0,tg.makeList)((0,es.symbol)(ie.ARCCOS),e);switch((0,_r.nativeInt)((0,tn.multiply)(e,(0,_r.integer)(2)))){case-2:return ie.Constants.Pi();case-1:return ie.defs.evaluatingAsFloats?(0,_r.double)(Math.PI*2/3):(0,tn.multiply)((0,_r.rational)(2,3),(0,es.symbol)(ie.PI));case 0:return ie.defs.evaluatingAsFloats?(0,_r.double)(Math.PI/2):(0,tn.multiply)((0,_r.rational)(1,2),(0,es.symbol)(ie.PI));case 1:return ie.defs.evaluatingAsFloats?(0,_r.double)(Math.PI/3):(0,tn.multiply)((0,_r.rational)(1,3),(0,es.symbol)(ie.PI));case 2:return ie.Constants.Zero();default:return(0,tg.makeList)((0,es.symbol)(ie.ARCCOS),e)}}var ie,es,_r,DI,Ds,tg,tn,rg=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_arccos=void 0;ie=(T(),o(N)),es=(U(),o(G)),_r=(Y(),o(V)),DI=(F(),o(z)),Ds=(K(),o(te)),tg=(se(),o(oe)),tn=(Q(),o(W));exports.Eval_arccos=kI});var XI={};function VI(e){return ZI((0,FI.Eval)((0,Fn.cadr)(e)))}function ZI(e){if((0,Fn.car)(e)===(0,sg.symbol)(Fn.COSH))return(0,Fn.cadr)(e);if((0,Fn.isdouble)(e)){let{d:t}=e;return t<1&&(0,BI.stop)("arccosh function argument is less than 1.0"),t=Math.log(t+Math.sqrt(t*t-1)),(0,GI.double)(t)}return(0,zI.isplusone)(e)?Fn.Constants.zero:(0,YI.makeList)((0,sg.symbol)(Fn.ARCCOSH),e)}var Fn,BI,sg,GI,FI,zI,YI,og=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_arccosh=void 0;Fn=(T(),o(N)),BI=(Ae(),o(Me)),sg=(U(),o(G)),GI=(Y(),o(V)),FI=(F(),o(z)),zI=(K(),o(te)),YI=(se(),o(oe));exports.Eval_arccosh=VI});var JI={};function QI(e){return WI((0,HI.Eval)((0,ae.cadr)(e)))}function WI(e){if((0,ae.car)(e)===(0,Ur.symbol)(ae.SIN))return(0,ae.cadr)(e);if((0,ae.isdouble)(e))return(0,rr.double)(Math.asin(e.d));if((0,ks.isoneoversqrttwo)(e)||(0,ae.ismultiply)(e)&&(0,ks.equalq)((0,ae.car)((0,ae.cdr)(e)),1,2)&&(0,ae.car)((0,ae.car)((0,ae.cdr)((0,ae.cdr)(e))))===(0,Ur.symbol)(ae.POWER)&&(0,ks.equaln)((0,ae.car)((0,ae.cdr)((0,ae.car)((0,ae.cdr)((0,ae.cdr)(e))))),2)&&(0,ks.equalq)((0,ae.car)((0,ae.cdr)((0,ae.cdr)((0,ae.car)((0,ae.cdr)((0,ae.cdr)(e)))))),1,2))return(0,bo.multiply)((0,rr.rational)(1,4),(0,Ur.symbol)(ae.PI));if((0,ks.isminusoneoversqrttwo)(e)||(0,ae.ismultiply)(e)&&(0,ks.equalq)((0,ae.car)((0,ae.cdr)(e)),-1,2)&&(0,ae.car)((0,ae.car)((0,ae.cdr)((0,ae.cdr)(e))))===(0,Ur.symbol)(ae.POWER)&&(0,ks.equaln)((0,ae.car)((0,ae.cdr)((0,ae.car)((0,ae.cdr)((0,ae.cdr)(e))))),2)&&(0,ks.equalq)((0,ae.car)((0,ae.cdr)((0,ae.cdr)((0,ae.car)((0,ae.cdr)((0,ae.cdr)(e)))))),1,2))return ae.defs.evaluatingAsFloats?(0,rr.double)(-Math.PI/4):(0,bo.multiply)((0,rr.rational)(-1,4),(0,Ur.symbol)(ae.PI));if((0,ks.isSqrtThreeOverTwo)(e))return ae.defs.evaluatingAsFloats?(0,rr.double)(Math.PI/3):(0,bo.multiply)((0,rr.rational)(1,3),(0,Ur.symbol)(ae.PI));if((0,ks.isMinusSqrtThreeOverTwo)(e))return ae.defs.evaluatingAsFloats?(0,rr.double)(-Math.PI/3):(0,bo.multiply)((0,rr.rational)(-1,3),(0,Ur.symbol)(ae.PI));if(!(0,ae.isrational)(e))return(0,ng.makeList)((0,Ur.symbol)(ae.ARCSIN),e);switch((0,rr.nativeInt)((0,bo.multiply)(e,(0,rr.integer)(2)))){case-2:return ae.defs.evaluatingAsFloats?(0,rr.double)(-Math.PI/2):(0,bo.multiply)((0,rr.rational)(-1,2),(0,Ur.symbol)(ae.PI));case-1:return ae.defs.evaluatingAsFloats?(0,rr.double)(-Math.PI/6):(0,bo.multiply)((0,rr.rational)(-1,6),(0,Ur.symbol)(ae.PI));case 0:return ae.Constants.Zero();case 1:return ae.defs.evaluatingAsFloats?(0,rr.double)(Math.PI/6):(0,bo.multiply)((0,rr.rational)(1,6),(0,Ur.symbol)(ae.PI));case 2:return ae.defs.evaluatingAsFloats?(0,rr.double)(Math.PI/2):(0,bo.multiply)((0,rr.rational)(1,2),(0,Ur.symbol)(ae.PI));default:return(0,ng.makeList)((0,Ur.symbol)(ae.ARCSIN),e)}}var ae,Ur,rr,HI,ks,ng,bo,ig=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_arcsin=void 0;ae=(T(),o(N)),Ur=(U(),o(G)),rr=(Y(),o(V)),HI=(F(),o(z)),ks=(K(),o(te)),ng=(se(),o(oe)),bo=(Q(),o(W));exports.Eval_arcsin=QI});var nS={};function sS(e){return oS((0,eS.Eval)((0,zn.cadr)(e)))}function oS(e){if((0,zn.car)(e)===(0,ag.symbol)(zn.SINH))return(0,zn.cadr)(e);if((0,zn.isdouble)(e)){let{d:t}=e;return t=Math.log(t+Math.sqrt(t*t+1)),(0,KI.double)(t)}return(0,tS.isZeroAtomOrTensor)(e)?zn.Constants.zero:(0,rS.makeList)((0,ag.symbol)(zn.ARCSINH),e)}var zn,ag,KI,eS,tS,rS,lg=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_arcsinh=void 0;zn=(T(),o(N)),ag=(U(),o(G)),KI=(Y(),o(V)),eS=(F(),o(z)),tS=(K(),o(te)),rS=(se(),o(oe));exports.Eval_arcsinh=sS});var _S={};function fS(e){return dS((0,lS.Eval)((0,Yn.cadr)(e)))}function dS(e){if((0,Yn.car)(e)===(0,ug.symbol)(Yn.TANH))return(0,Yn.cadr)(e);if((0,Yn.isdouble)(e)){let{d:t}=e;return(t<-1||t>1)&&(0,iS.stop)("arctanh function argument is not in the interval [-1,1]"),t=Math.log((1+t)/(1-t))/2,(0,aS.double)(t)}return(0,uS.isZeroAtomOrTensor)(e)?Yn.Constants.zero:(0,cS.makeList)((0,ug.symbol)(Yn.ARCTANH),e)}var Yn,iS,ug,aS,lS,uS,cS,cg=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_arctanh=void 0;Yn=(T(),o(N)),iS=(Ae(),o(Me)),ug=(U(),o(G)),aS=(Y(),o(V)),lS=(F(),o(z)),uS=(K(),o(te)),cS=(se(),o(oe));exports.Eval_arctanh=fS});var yS={};function xS(e){let t=(0,fg.Eval)((0,go.cadr)(e)),r=(0,fg.Eval)((0,go.caddr)(e));return pS(t,r)}function pS(e,t){return bS(e,t)}function bS(e,t){return gS(e,t)?(0,dg.divide)((0,dg.divide)((0,_d.factorial)(e),(0,_d.factorial)(t)),(0,_d.factorial)((0,mS.subtract)(e,t))):go.Constants.zero}function gS(e,t){return(0,go.isNumericAtom)(e)&&(0,dd.lessp)(e,go.Constants.zero)||(0,go.isNumericAtom)(t)&&(0,dd.lessp)(t,go.Constants.zero)?!1:!((0,go.isNumericAtom)(e)&&(0,go.isNumericAtom)(t)&&(0,dd.lessp)(e,t))}var go,dd,mS,fg,_d,dg,_g=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_binomial=void 0;go=(T(),o(N)),dd=(Le(),o(Pe)),mS=(_e(),o(pe)),fg=(F(),o(z)),_d=(En(),o(hi)),dg=(Q(),o(W));exports.Eval_binomial=xS});var NS={};function OS(e){return MS((0,hS.Eval)((0,Gi.cadr)(e)))}function MS(e){return TS(e)}function TS(e){if(!(0,Gi.isNumericAtom)(e))return(0,jS.makeList)((0,vS.symbol)(Gi.CEILING),e);if((0,Gi.isdouble)(e))return(0,ES.double)(Math.ceil(e.d));if((0,mg.isinteger)(e))return e;let t=new Gi.Num((0,AS.mdiv)(e.q.a,e.q.b));return(0,mg.isnegativenumber)(e)||(t=(0,qS.add)(t,Gi.Constants.one)),t}var Gi,vS,qS,ES,hS,mg,jS,AS,xg=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_ceiling=void 0;Gi=(T(),o(N)),vS=(U(),o(G)),qS=(_e(),o(pe)),ES=(Y(),o(V)),hS=(F(),o(z)),mg=(K(),o(te)),jS=(se(),o(oe)),AS=(cs(),o(As));exports.Eval_ceiling=OS});var LS={};function SS(e){let t=(0,pg.Eval)((0,yo.cadr)(e)),r=(0,pg.Eval)((0,yo.caddr)(e));return RS(t,r)}function RS(e,t){return wS(e,t)?(0,bg.divide)((0,bg.divide)((0,xd.factorial)(e),(0,xd.factorial)(t)),(0,xd.factorial)((0,IS.subtract)(e,t))):yo.Constants.zero}function wS(e,t){return(0,yo.isNumericAtom)(e)&&(0,md.lessp)(e,yo.Constants.zero)||(0,yo.isNumericAtom)(t)&&(0,md.lessp)(t,yo.Constants.zero)?!1:!((0,yo.isNumericAtom)(e)&&(0,yo.isNumericAtom)(t)&&(0,md.lessp)(e,t))}var yo,md,IS,pg,xd,bg,gg=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_choose=void 0;yo=(T(),o(N)),md=(Le(),o(Pe)),IS=(_e(),o(pe)),pg=(F(),o(z)),xd=(En(),o(hi)),bg=(Q(),o(W));exports.Eval_choose=SS});var Eg={};function DS(e){return qg((0,PS.Eval)((0,pd.cadr)(e)))}function qg(e){return(0,CS.add)((0,ml.multiply)((0,yg.exponential)((0,ml.multiply)(pd.Constants.imaginaryunit,e)),(0,vg.rational)(1,2)),(0,ml.multiply)((0,yg.exponential)((0,ml.multiply)((0,ml.negate)(pd.Constants.imaginaryunit),e)),(0,vg.rational)(1,2)))}var pd,yg,CS,vg,PS,ml,bd=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.expcos=exports.Eval_expcos=void 0;pd=(T(),o(N)),yg=(Le(),o(Pe)),CS=(_e(),o(pe)),vg=(Y(),o(V)),PS=(F(),o(z)),ml=(Q(),o(W));exports.Eval_expcos=DS;exports.expcos=qg});var Og={};function US(e){return Ag((0,$S.Eval)((0,xl.cadr)(e)))}function Ag(e){return(0,kS.subtract)((0,Vn.multiply)((0,Vn.divide)((0,hg.exponential)((0,Vn.multiply)(xl.Constants.imaginaryunit,e)),xl.Constants.imaginaryunit),(0,jg.rational)(1,2)),(0,Vn.multiply)((0,Vn.divide)((0,hg.exponential)((0,Vn.multiply)((0,Vn.negate)(xl.Constants.imaginaryunit),e)),xl.Constants.imaginaryunit),(0,jg.rational)(1,2)))}var xl,hg,kS,jg,$S,Vn,gd=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.expsin=exports.Eval_expsin=void 0;xl=(T(),o(N)),hg=(Le(),o(Pe)),kS=(_e(),o(pe)),jg=(Y(),o(V)),$S=(F(),o(z)),Vn=(Q(),o(W));exports.Eval_expsin=US;exports.expsin=Ag});var YS={};function zS(e){let t=vd((0,Mg.Eval)((0,vt.cadr)(e)));return(0,Mg.Eval)(t)}function vd(e){if((0,vt.car)(e)===(0,Fi.symbol)(vt.COS))return(0,BS.expcos)((0,vt.cadr)(e));if((0,vt.car)(e)===(0,Fi.symbol)(vt.SIN))return(0,GS.expsin)((0,vt.cadr)(e));if((0,vt.car)(e)===(0,Fi.symbol)(vt.TAN)){e=(0,vt.cadr)(e);let t=(0,Zn.exponential)((0,ps.multiply)(vt.Constants.imaginaryunit,e)),r=(0,Zn.exponential)((0,ps.negate)((0,ps.multiply)(vt.Constants.imaginaryunit,e)));return(0,ps.divide)((0,ps.multiply)((0,zi.subtract)(r,t),vt.Constants.imaginaryunit),(0,zi.add)(t,r))}return(0,vt.car)(e)===(0,Fi.symbol)(vt.COSH)?(e=(0,vt.cadr)(e),(0,ps.multiply)((0,zi.add)((0,Zn.exponential)(e),(0,Zn.exponential)((0,ps.negate)(e))),(0,yd.rational)(1,2))):(0,vt.car)(e)===(0,Fi.symbol)(vt.SINH)?(e=(0,vt.cadr)(e),(0,ps.multiply)((0,zi.subtract)((0,Zn.exponential)(e),(0,Zn.exponential)((0,ps.negate)(e))),(0,yd.rational)(1,2))):(0,vt.car)(e)===(0,Fi.symbol)(vt.TANH)?(e=(0,Zn.exponential)((0,ps.multiply)((0,vt.cadr)(e),(0,yd.integer)(2))),(0,ps.divide)((0,zi.subtract)(e,vt.Constants.one),(0,zi.add)(e,vt.Constants.one))):(0,vt.iscons)(e)?e.map(vd):(e.k===vt.TENSOR&&(e=(0,FS.copy_tensor)(e),e.tensor.elem=e.tensor.elem.map(vd)),e)}var vt,Fi,Zn,zi,yd,Mg,BS,GS,ps,FS,Tg=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_circexp=void 0;vt=(T(),o(N)),Fi=(U(),o(G)),Zn=(Le(),o(Pe)),zi=(_e(),o(pe)),yd=(Y(),o(V)),Mg=(F(),o(z)),BS=(bd(),o(Eg)),GS=(gd(),o(Og)),ps=(Q(),o(W)),FS=(jt(),o(Ot));exports.Eval_circexp=zS});var JS={};function QS(e){let t=(0,qd.Eval)((0,vo.cadr)(e)),r,s;return(0,vo.cddr)(e)===(0,ZS.symbol)(vo.NIL)?(r=vo.Constants.one,s=(0,Ed.integer)(2)):(r=(0,qd.Eval)((0,vo.caddr)(e)),s=(0,qd.Eval)((0,vo.cadddr)(e))),WS(t,r,s)}function WS(e,t,r){let s=[],n=[];if(!(0,vo.istensor)(e))return(0,HS.isZeroAtomOrTensor)(e)||(0,Ng.stop)("contract: tensor expected, 1st arg is not a tensor"),vo.Constants.zero;let i=(0,Ed.nativeInt)(t),a=(0,Ed.nativeInt)(r),{ndim:u}=e.tensor;(i<1||i>u||a<1||a>u||i===a||e.tensor.dim[i-1]!==e.tensor.dim[a-1])&&(0,Ng.stop)("contract: index out of range"),i--,a--;let c=e.tensor.dim[i],d=1;for(let k=0;k<u;k++)k!==i&&k!==a&&(d*=e.tensor.dim[k]);t=(0,VS.alloc_tensor)(d),t.tensor.ndim=u-2;let m=0;for(let k=0;k<u;k++)k!==i&&k!==a&&(t.tensor.dim[m++]=e.tensor.dim[k]);let R=e.tensor.elem,M=t.tensor.elem;for(let k=0;k<u;k++)s[k]=0,n[k]=e.tensor.dim[k];for(let k=0;k<d;k++){let H=vo.Constants.zero;for(let X=0;X<c;X++){s[i]=X,s[a]=X;let Ie=0;for(let at=0;at<u;at++)Ie=Ie*n[at]+s[at];H=(0,XS.add)(H,R[Ie])}M[k]=H;for(let X=u-1;X>=0;X--)if(!(X===i||X===a)){if(++s[X]<n[X])break;s[X]=0}}return d===1?M[0]:t}var VS,vo,Ng,ZS,XS,Ed,qd,HS,Ig=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_contract=void 0;VS=(Ct(),o(Dt)),vo=(T(),o(N)),Ng=(Ae(),o(Me)),ZS=(U(),o(G)),XS=(_e(),o(pe)),Ed=(Y(),o(V)),qd=(F(),o(z)),HS=(K(),o(te));exports.Eval_contract=QS});var rR={};function tR(e){let t=(0,Yi.Eval)((0,qo.cadr)(e));for(e=(0,qo.cddr)(e);(0,qo.iscons)(e);){let r=(0,Yi.Eval)((0,qo.car)(e));e=(0,qo.cdr)(e);let s=(0,Yi.Eval)((0,qo.car)(e));e=(0,qo.cdr)(e);let n=(0,Yi.Eval)((0,qo.car)(e));e=(0,qo.cdr)(e),t=(0,eR.integral)(t,r);let i=(0,Yi.Eval)((0,Sg.subst)(t,r,n)),a=(0,Yi.Eval)((0,Sg.subst)(t,r,s));t=(0,KS.subtract)(i,a)}return t}var qo,KS,Yi,eR,Sg,Rg=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_defint=void 0;qo=(T(),o(N)),KS=(_e(),o(pe)),Yi=(F(),o(z)),eR=(tl(),o(Bu)),Sg=(Xr(),o(ns));exports.Eval_defint=tR});var jd={};function iR(e){let t=(0,wg.Eval)((0,ts.cadr)(e));e=(0,wg.Eval)((0,ts.caddr)(e));let r=e===(0,sR.symbol)(ts.NIL)?(0,oR.guess)(t):e;return Lg(t,r)}function Lg(e,t){return Cg(e,t,ts.Constants.zero)}function Cg(e,t,r){return(0,hd.equal)(e,t)?(0,nR.isZeroAtomOrTensor)(r)&&(r=ts.Constants.one):(0,ts.ispower)(e)?(0,hd.equal)((0,ts.cadr)(e),t)&&(0,ts.isNumericAtom)((0,ts.caddr)(e))&&(0,hd.lessp)(r,(0,ts.caddr)(e))&&(r=(0,ts.caddr)(e)):(0,ts.iscons)(e)&&(r=e.tail().reduce((s,n)=>Cg(n,t,s),r)),r}var ts,sR,hd,wg,oR,nR,cc=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.degree=exports.Eval_degree=void 0;ts=(T(),o(N)),sR=(U(),o(G)),hd=(Le(),o(Pe)),wg=(F(),o(z)),oR=(Hr(),o(us)),nR=(K(),o(te));exports.Eval_degree=iR;exports.degree=Lg});var xR={};function uR(e){let{arg:t}=Ad(e);t||(0,fc.stop)("eigen: argument is not a square matrix");let[r,s]=Od(Br.EIGEN,t);return e=(0,Xn.usr_symbol)("D"),(0,Xn.set_binding)(e,r),e=(0,Xn.usr_symbol)("Q"),(0,Xn.set_binding)(e,s),(0,Xn.symbol)(Br.NIL)}function cR(e){let{arg:t,invalid:r}=Ad(e);if(r)return(0,$g.makeList)((0,Xn.symbol)(Br.EIGENVAL),r);let[s,n]=Od(Br.EIGENVAL,t);return s}function fR(e){let{arg:t,invalid:r}=Ad(e);if(r)return(0,$g.makeList)((0,Xn.symbol)(Br.EIGENVEC),r);let[s,n]=Od(Br.EIGENVEC,t);return n}function Ad(e){if(e=(0,Dg.Eval)((0,aR.yyfloat)((0,Dg.Eval)((0,Br.cadr)(e)))),!(0,Br.istensor)(e))return{invalid:e};(e.tensor.ndim!==2||e.tensor.dim[0]!==e.tensor.dim[1])&&(0,fc.stop)("eigen: argument is not a square matrix"),de=e.tensor.dim[0],dR(e)||(0,fc.stop)("eigen: matrix is not numerical");for(let t=0;t<de-1;t++)for(let r=t+1;r<de;r++){let s=e.tensor.elem[de*t+r],n=e.tensor.elem[de*r+t];Math.abs(s.d-n.d)>1e-10&&(0,fc.stop)("eigen: matrix is not symmetrical")}return{arg:e}}function dR(e){for(let t=0;t<de;t++)for(let r=0;r<de;r++)if(!(0,Br.isdouble)(e.tensor.elem[de*t+r]))return!1;return!0}function Od(e,t){for(let i=0;i<de*de;i++)Qt[i]=0;for(let i=0;i<de*de;i++)Eo[i]=0;for(let i=0;i<de;i++){Qt[de*i+i]=t.tensor.elem[de*i+i].d;for(let a=i+1;a<de;a++)Qt[de*i+a]=t.tensor.elem[de*i+a].d,Qt[de*a+i]=t.tensor.elem[de*i+a].d}for(let i=0;i<de;i++){Eo[de*i+i]=1;for(let a=i+1;a<de;a++)Eo[de*i+a]=0,Eo[de*a+i]=0}let r=0;for(r=0;r<100&&_R()!==0;r++);r===100&&(0,lR.print_str)(`
note: eigen did not converge
`);let s;if(e===Br.EIGEN||e===Br.EIGENVAL){s=(0,kg.copy_tensor)(t);for(let i=0;i<de;i++)for(let a=0;a<de;a++)s.tensor.elem[de*i+a]=(0,Pg.double)(Qt[de*i+a])}let n;if(e===Br.EIGEN||e===Br.EIGENVEC){n=(0,kg.copy_tensor)(t);for(let i=0;i<de;i++)for(let a=0;a<de;a++)n.tensor.elem[de*i+a]=(0,Pg.double)(Eo[de*i+a])}return[s,n]}function _R(){let e=0;for(let t=0;t<de-1;t++)for(let r=t+1;r<de;r++)Qt[de*t+r]!==0&&(mR(t,r),e++);return e}function mR(e,t){let r=.5*(Qt[de*e+e]-Qt[de*t+t])/Qt[de*e+t],s=1/(Math.abs(r)+Math.sqrt(r*r+1));r<0&&(s=-s);let n=1/Math.sqrt(s*s+1),i=s*n;for(let a=0;a<de;a++){let u=Qt[de*e+a],c=Qt[de*t+a];Qt[de*e+a]=n*u+i*c,Qt[de*t+a]=n*c-i*u}for(let a=0;a<de;a++){let u=Qt[de*a+e],c=Qt[de*a+t];Qt[de*a+e]=n*u+i*c,Qt[de*a+t]=n*c-i*u}for(let a=0;a<de;a++){let u=Eo[de*e+a],c=Eo[de*t+a];Eo[de*e+a]=n*u+i*c,Eo[de*t+a]=n*c-i*u}Qt[de*e+t]=0,Qt[de*t+e]=0}var Br,fc,Xn,Pg,Dg,aR,$g,lR,kg,de,Qt,Eo,Ug=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_eigenvec=exports.Eval_eigenval=exports.Eval_eigen=void 0;Br=(T(),o(N)),fc=(Ae(),o(Me)),Xn=(U(),o(G)),Pg=(Y(),o(V)),Dg=(F(),o(z)),aR=(Ls(),o(_o)),$g=(se(),o(oe)),lR=(to(),o(Do)),kg=(jt(),o(Ot)),de=0,Qt=[],Eo=[];exports.Eval_eigen=uR;exports.Eval_eigenval=cR;exports.Eval_eigenvec=fR});var Gg={};function qR(e){return ER((0,gR.Eval)((0,dc.cadr)(e)))}function ER(e){if((0,dc.isdouble)(e)){let t=Bg(e.d);return(0,bR.double)(t)}return(0,yR.isZeroAtomOrTensor)(e)?dc.Constants.one:(0,vR.makeList)((0,pR.symbol)(dc.ERFC),e)}function Bg(e){if(e===0)return 1;let t=Math.abs(e),r=1/(1+.5*t),s=r*Math.exp(-t*t-1.26551223+r*(1.00002368+r*(.37409196+r*(.09678418+r*(-.18628806+r*(.27886807+r*(-1.13520398+r*(1.48851587+r*(-.82215223+r*.17087277)))))))));return e>=0?s:2-s}var dc,pR,bR,gR,yR,vR,Md=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.erfc=exports.Eval_erfc=void 0;dc=(T(),o(N)),pR=(U(),o(G)),bR=(Y(),o(V)),gR=(F(),o(z)),yR=(K(),o(te)),vR=(se(),o(oe));exports.Eval_erfc=qR;exports.erfc=Bg});var TR={};function OR(e){return MR((0,AR.Eval)((0,pl.cadr)(e)))}function MR(e){return(0,pl.isdouble)(e)?(0,hR.double)(1-(0,jR.erfc)(e.d)):(0,zg.isZeroAtomOrTensor)(e)?pl.Constants.zero:(0,zg.isnegativeterm)(e)?(0,Vg.negate)((0,Yg.makeList)((0,Fg.symbol)(pl.ERF),(0,Vg.negate)(e))):(0,Yg.makeList)((0,Fg.symbol)(pl.ERF),e)}var pl,Fg,hR,jR,AR,zg,Yg,Vg,Zg=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_erf=void 0;pl=(T(),o(N)),Fg=(U(),o(G)),hR=(Y(),o(V)),jR=(Md(),o(Gg)),AR=(F(),o(z)),zg=(K(),o(te)),Yg=(se(),o(oe)),Vg=(Q(),o(W));exports.Eval_erf=OR});var IR={};function NR(e){let t=[];return(0,Hg.isadd)(e)?e.tail().forEach(r=>t.push(...Xg(r))):t.push(...Xg(e)),t}function Xg(e){return(0,Hg.ismultiply)(e)?e.tail():[e]}var Hg,Qg=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.factors=void 0;Hg=(T(),o(N));exports.factors=NR});var ZR={};function UR(e){let t=(0,Nd.Eval)((0,_t.cadr)(e)),r=(0,Nd.Eval)((0,_t.caddr)(e)),s=r===(0,SR.symbol)(_t.NIL)?(0,CR.guess)(t):r;return Sd(t,s)}function Sd(e,t){if((0,_t.istensor)(e))return BR(e,t);if((0,_t.isadd)(e))return e.tail().reduce((u,c)=>(0,Td.add)(u,Sd(c,t)),_t.Constants.zero);let r=(0,DR.numerator)(e),s=(0,wR.denominator)(e);if([s,r]=GR(s,r,t),((0,bl.isone)(r)||(0,bl.isone)(s))&&(!(0,bl.ispolyexpandedform)(s,t)||(0,bl.isone)(s)))return e;let n=(0,kR.divpoly)(r,s,t);if(r=(0,Td.subtract)(r,(0,Fr.multiply)(s,n)),(0,bl.isZeroAtomOrTensor)(r))return n;s=(0,LR.factorpoly)(s,t);let i=FR(s,t);r=YR(r,i,t),s=VR(s,i,t);let a;if((0,_t.istensor)(i)){let u=(0,_t.doexpand)(PR.inv,i);a=(0,Jg.inner)((0,Jg.inner)(u,r),s)}else{let u=(0,_t.doexpand)(Fr.divide,r,i);a=(0,Fr.multiply)(u,s)}return(0,Td.add)(a,n)}function BR(e,t){return e=(0,$R.copy_tensor)(e),e.tensor.elem=e.tensor.elem.map(r=>Sd(r,t)),e}function GR(e,t,r){let s=[...(0,Wg.factors)(e),...(0,Wg.factors)(t)],n=0;for(let i=0;i<s.length;i++){let a=s[i];if(!(0,_t.ispower)(a)||(0,_t.cadr)(a)!==r)continue;let u=(0,Gr.nativeInt)((0,_t.caddr)(a));isNaN(u)||u<n&&(n=u)}return n===0?[e,t]:(e=(0,Fr.multiply)(e,(0,rn.power)(r,(0,Gr.integer)(-n))),t=(0,Fr.multiply)(t,(0,rn.power)(r,(0,Gr.integer)(-n))),[e,t])}function FR(e,t){let r=[];(0,_t.ismultiply)(e)?e.tail().forEach(i=>r.push(...Kg(e,i,t))):r.push(...Kg(e,e,t));let s=r.length;if(s===1)return r[0];let n=(0,Id.alloc_tensor)(s*s);n.tensor.ndim=2,n.tensor.dim[0]=s,n.tensor.dim[1]=s;for(let i=0;i<s;i++)for(let a=0;a<s;a++){let u=(0,rn.power)(t,(0,Gr.integer)(i)),c=(0,_t.doexpand)(Fr.divide,r[a],u);n.tensor.elem[s*i+a]=(0,sy.filter)(c,t)}return n}function Kg(e,t,r){let s,n=0;if(!(0,ty.Find)(t,r))return[];let i=(0,_t.doexpand)(zR,e,t);(0,_t.ispower)(t)?(n=(0,Gr.nativeInt)((0,_t.caddr)(t)),s=(0,_t.cadr)(t)):(n=1,s=t);let a=[],u=(0,Gr.nativeInt)((0,ry.degree)(s,r));for(let c=0;c<n;c++)for(let d=0;d<u;d++){let m=(0,rn.power)(s,(0,Gr.integer)(c)),R=(0,_t.doexpand)(Fr.multiply,i,m);m=(0,rn.power)(r,(0,Gr.integer)(d));let M=(0,_t.doexpand)(Fr.multiply,R,m);a.push(M)}return a}function zR(e,t){let r=_t.Constants.one;if((0,_t.ismultiply)(e)){let s=[];e.tail().forEach(n=>{(0,RR.equal)(n,t)||s.push((0,Nd.Eval)(n))}),r=(0,Fr.multiply_all)(s)}return r}function YR(e,t,r){if(!(0,_t.istensor)(t))return e;let s=t.tensor.dim[0],n=(0,Id.alloc_tensor)(s);n.tensor.ndim=1,n.tensor.dim[0]=s;for(let i=0;i<s;i++){let a=(0,rn.power)(r,(0,Gr.integer)(i)),u=(0,_t.doexpand)(Fr.divide,e,a);n.tensor.elem[i]=(0,sy.filter)(u,r)}return n}function VR(e,t,r){if(!(0,_t.istensor)(t))return(0,Fr.reciprocate)(e);let s=[];(0,_t.ismultiply)(e)?e.tail().forEach(a=>{s.push(...ey(a,r))}):s=ey(e,r);let n=s.length,i=(0,Id.alloc_tensor)(n);return i.tensor.ndim=1,i.tensor.dim[0]=n,i.tensor.elem=s,i}function ey(e,t){let r=1;if(!(0,ty.Find)(e,t))return[];(0,_t.ispower)(e)&&(r=(0,Gr.nativeInt)((0,_t.caddr)(e)),e=(0,_t.cadr)(e));let s=[],n=(0,Gr.nativeInt)((0,ry.degree)(e,t));for(let i=r;i>0;i--)for(let a=0;a<n;a++)s.push((0,Fr.multiply)((0,Fr.reciprocate)((0,rn.power)(e,(0,Gr.integer)(i))),(0,rn.power)(t,(0,Gr.integer)(a))));return s}var Id,_t,ty,SR,RR,Td,Gr,ry,wR,Nd,LR,Wg,sy,CR,Jg,PR,bl,Fr,DR,rn,kR,$R,oy=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_expand=void 0;Id=(Ct(),o(Dt)),_t=(T(),o(N)),ty=(ar(),o(xr)),SR=(U(),o(G)),RR=(Le(),o(Pe)),Td=(_e(),o(pe)),Gr=(Y(),o(V)),ry=(cc(),o(jd)),wR=(Ns(),o(eo)),Nd=(F(),o(z)),LR=(mi(),o(ja)),Wg=(Qg(),o(IR)),sy=(ba(),o(Yl)),CR=(Hr(),o(us)),Jg=(zo(),o(jn)),PR=(Ga(),o(Ou)),bl=(K(),o(te)),Fr=(Q(),o(W)),DR=(no(),o($o)),rn=(At(),o(Mt)),kR=(Kl(),o(v0)),$R=(jt(),o(Ot));exports.Eval_expand=UR});var sw={};function ew(e){return tw((0,WR.Eval)((0,Vi.cadr)(e)))}function tw(e){return rw(e)}function rw(e){if(!(0,Vi.isNumericAtom)(e))return(0,JR.makeList)((0,XR.symbol)(Vi.FLOOR),e);if((0,Vi.isdouble)(e))return(0,QR.double)(Math.floor(e.d));if((0,ny.isinteger)(e))return e;let t=new Vi.Num((0,KR.mdiv)(e.q.a,e.q.b));return(0,ny.isnegativenumber)(e)&&(t=(0,HR.add)(t,Vi.Constants.negOne)),t}var Vi,XR,HR,QR,WR,ny,JR,KR,iy=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_floor=void 0;Vi=(T(),o(N)),XR=(U(),o(G)),HR=(_e(),o(pe)),QR=(Y(),o(V)),WR=(F(),o(z)),ny=(K(),o(te)),JR=(se(),o(oe)),KR=(cs(),o(As));exports.Eval_floor=ew});var aw={};function iw(e){let t=(0,Zi.caddr)(e);(0,Zi.issymbol)(t)||(0,ow.stop)("for: 2nd arg should be the variable to loop over");let r=(0,Rd.evaluate_integer)((0,Zi.cadddr)(e));if(isNaN(r))return e;let s=(0,Rd.evaluate_integer)((0,Zi.caddddr)(e));if(isNaN(s))return e;let n=(0,_c.get_binding)(t);for(let i=r;i<=s;i++)(0,_c.set_binding)(t,(0,nw.integer)(i)),(0,Rd.Eval)((0,Zi.cadr)(e));return(0,_c.set_binding)(t,n),(0,_c.symbol)(Zi.NIL)}var Zi,ow,_c,nw,Rd,ay=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_for=void 0;Zi=(T(),o(N)),ow=(Ae(),o(Me)),_c=(U(),o(G)),nw=(Y(),o(V)),Rd=(F(),o(z));exports.Eval_for=iw});var xw={};function dw(e){return mc((0,uw.Eval)((0,st.cadr)(e)))}function mc(e){return _w(e)}function _w(e){return(0,st.isrational)(e)&&(0,st.MEQUAL)(e.q.a,1)&&(0,st.MEQUAL)(e.q.b,2)?(0,ly.power)(st.Constants.Pi(),(0,wd.rational)(1,2)):(0,st.isrational)(e)&&(0,st.MEQUAL)(e.q.a,3)&&(0,st.MEQUAL)(e.q.b,2)?(0,ho.multiply)((0,ly.power)(st.Constants.Pi(),(0,wd.rational)(1,2)),(0,wd.rational)(1,2)):(0,cw.isnegativeterm)(e)?(0,ho.divide)((0,ho.multiply)(st.Constants.Pi(),st.Constants.negOne),(0,ho.multiply)((0,ho.multiply)((0,fw.sine)((0,ho.multiply)(st.Constants.Pi(),e)),e),mc((0,ho.negate)(e)))):(0,st.isadd)(e)?mw(e):(0,cy.makeList)((0,uy.symbol)(st.GAMMA),e)}function mw(e){let t=(0,st.cdr)(e);return(0,st.isrational)((0,st.car)(t))&&(0,st.MEQUAL)((0,st.car)(t).q.a,1)&&(0,st.MEQUAL)((0,st.car)(t).q.b,1)?(0,ho.multiply)((0,st.cadr)(t),mc((0,st.cadr)(t))):(0,st.isrational)((0,st.car)(t))&&(0,st.MEQUAL)((0,st.car)(t).q.a,-1)&&(0,st.MEQUAL)((0,st.car)(t).q.b,1)?(0,ho.divide)(mc((0,st.cadr)(t)),(0,lw.add)((0,st.cadr)(t),st.Constants.negOne)):(0,cy.makeList)((0,uy.symbol)(st.GAMMA),e)}var st,uy,lw,wd,uw,cw,cy,ho,ly,fw,fy=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_gamma=void 0;st=(T(),o(N)),uy=(U(),o(G)),lw=(_e(),o(pe)),wd=(Y(),o(V)),uw=(F(),o(z)),cw=(K(),o(te)),cy=(se(),o(oe)),ho=(Q(),o(W)),ly=(At(),o(Mt)),fw=(Qs(),o(wo));exports.Eval_gamma=dw});var qw={};function yw(e){return vw((0,pw.Eval)((0,Ld.cadr)(e)))}function vw(e){return(0,bw.isnonnegativeinteger)(e)&&(0,gw.mprime)(e.q.a)?Ld.Constants.one:Ld.Constants.zero}var Ld,pw,bw,gw,dy=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_isprime=void 0;Ld=(T(),o(N)),pw=(F(),o(z)),bw=(K(),o(te)),gw=(d0(),o(X_));exports.Eval_isprime=yw});var Ow={};function jw(e){let t=(0,gc.Eval)((0,bs.cadr)(e)),r=(0,gc.Eval)((0,bs.caddr)(e)),s=(0,gc.Eval)((0,bs.cadddr)(e)),n=s===(0,pc.symbol)(bs.NIL)?bs.Constants.zero:s;return Aw(t,r,n)}function Aw(e,t,r){let s=(0,bc.nativeInt)(t);return s<0||isNaN(s)?(0,Ew.makeList)((0,pc.symbol)(bs.LAGUERRE),e,t,r):(0,bs.issymbol)(e)?_y(s,e,r):(0,gc.Eval)((0,hw.subst)(_y(s,(0,pc.symbol)(bs.SECRETX),r),(0,pc.symbol)(bs.SECRETX),e))}function _y(e,t,r){let s=bs.Constants.zero,n=bs.Constants.one;for(let i=0;i<e;i++){let a=(0,Cd.divide)((0,xc.subtract)((0,Cd.multiply)((0,xc.add)((0,xc.subtract)((0,bc.integer)(2*i+1),t),r),n),(0,Cd.multiply)((0,xc.add)((0,bc.integer)(i),r),s)),(0,bc.integer)(i+1));s=n,n=a}return n}var bs,pc,xc,bc,gc,Ew,Cd,hw,my=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_laguerre=void 0;bs=(T(),o(N)),pc=(U(),o(G)),xc=(_e(),o(pe)),bc=(Y(),o(V)),gc=(F(),o(z)),Ew=(se(),o(oe)),Cd=(Q(),o(W)),hw=(Xr(),o(ns));exports.Eval_laguerre=jw});var Cw={};function ww(e){let t=(0,xy.Eval)((0,Pd.cadr)(e));e=(0,xy.Eval)((0,Pd.caddr)(e));let r=e===(0,Mw.symbol)(Pd.NIL)?(0,Iw.guess)(t):e;return Lw(t,r)}function Lw(e,t){let r=(0,Tw.degree)(e,t);return(0,Nw.filter)((0,Sw.divide)(e,(0,Rw.power)(t,r)),t)}var Pd,Mw,Tw,xy,Nw,Iw,Sw,Rw,py=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_leading=void 0;Pd=(T(),o(N)),Mw=(U(),o(G)),Tw=(cc(),o(jd)),xy=(F(),o(z)),Nw=(ba(),o(Yl)),Iw=(Hr(),o(us)),Sw=(Q(),o(W)),Rw=(At(),o(Mt));exports.Eval_leading=ww});var Vw={};function Gw(e){let t=(0,yc.Eval)((0,sr.cadr)(e)),r=(0,yc.Eval)((0,sr.caddr)(e)),s=(0,yc.Eval)((0,sr.cadddr)(e)),n=s===(0,Xi.symbol)(sr.NIL)?sr.Constants.zero:s;return Fw(t,r,n)}function Fw(e,t,r){return zw(e,t,r)}function zw(e,t,r){let s=(0,Qn.nativeInt)(t),n=(0,Qn.nativeInt)(r);if(s<0||isNaN(s)||n<0||isNaN(n))return(0,kw.makeList)((0,Xi.symbol)(sr.LEGENDRE),e,t,r);let i;if((0,sr.issymbol)(e))i=by(s,n,e);else{let a=by(s,n,(0,Xi.symbol)(sr.SECRETX));i=(0,yc.Eval)((0,Bw.subst)(a,(0,Xi.symbol)(sr.SECRETX),e))}return i=Yw(i,n,e)||i,i}function by(e,t,r){let s=sr.Constants.zero,n=sr.Constants.one;for(let i=0;i<e;i++){let a=(0,Hn.divide)((0,gy.subtract)((0,Hn.multiply)((0,Hn.multiply)((0,Qn.integer)(2*i+1),r),n),(0,Hn.multiply)((0,Qn.integer)(i),s)),(0,Qn.integer)(i+1));s=n,n=a}for(let i=0;i<t;i++)n=(0,Dw.derivative)(n,r);return n}function Yw(e,t,r){if(t===0)return;let s=(0,gy.subtract)(sr.Constants.one,(0,Dd.square)(r));(0,sr.car)(r)===(0,Xi.symbol)(sr.COS)?s=(0,Dd.square)((0,Uw.sine)((0,sr.cadr)(r))):(0,sr.car)(r)===(0,Xi.symbol)(sr.SIN)&&(s=(0,Dd.square)((0,Pw.cosine)((0,sr.cadr)(r))));let n=(0,Hn.multiply)(e,(0,$w.power)(s,(0,Hn.multiply)((0,Qn.integer)(t),(0,Qn.rational)(1,2))));return t%2&&(n=(0,Hn.negate)(n)),n}var sr,Xi,Dd,gy,Qn,Pw,Dw,yc,kw,Hn,$w,Uw,Bw,yy=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_legendre=void 0;sr=(T(),o(N)),Xi=(U(),o(G)),Dd=(Le(),o(Pe)),gy=(_e(),o(pe)),Qn=(Y(),o(V)),Pw=(Lo(),o(bn)),Dw=(Ln(),o(Di)),yc=(F(),o(z)),kw=(se(),o(oe)),Hn=(Q(),o(W)),$w=(At(),o(Mt)),Uw=(Qs(),o(wo)),Bw=(Xr(),o(ns));exports.Eval_legendre=Gw});var Hw={};function Xw(e){return e=(0,vc.cadr)(e),!(0,vc.iscons)(e)&&(0,vc.cadr)(e).k===vc.SYM&&(e=(0,Zw.get_binding)(e)),e}var vc,Zw,vy=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_lookup=void 0;vc=(T(),o(N)),Zw=(U(),o(G));exports.Eval_lookup=Xw});var tL={};function Kw(e){let t=(0,qy.Eval)((0,sn.cadr)(e)),r=(0,qy.Eval)((0,sn.caddr)(e));return eL(t,r)}function eL(e,t){if((0,kd.isZeroAtomOrTensor)(t)&&(0,qc.stop)("mod function: divide by zero"),!(0,sn.isNumericAtom)(e)||!(0,sn.isNumericAtom)(t))return(0,Ww.makeList)((0,Qw.symbol)(sn.MOD),e,t);if((0,sn.isdouble)(e)){let r=(0,Ec.nativeInt)(e);isNaN(r)&&(0,qc.stop)("mod function: cannot convert float value to integer"),e=(0,Ec.integer)(r)}if((0,sn.isdouble)(t)){let r=(0,Ec.nativeInt)(t);isNaN(r)&&(0,qc.stop)("mod function: cannot convert float value to integer"),t=(0,Ec.integer)(r)}return(!(0,kd.isinteger)(e)||!(0,kd.isinteger)(t))&&(0,qc.stop)("mod function: integer arguments expected"),new sn.Num((0,Jw.mmod)(e.q.a,t.q.a))}var sn,qc,Qw,Ec,qy,kd,Ww,Jw,Ey=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_mod=void 0;sn=(T(),o(N)),qc=(Ae(),o(Me)),Qw=(U(),o(G)),Ec=(Y(),o(V)),qy=(F(),o(z)),kd=(K(),o(te)),Ww=(se(),o(oe)),Jw=(cs(),o(As));exports.Eval_mod=Kw});var bL={};function gl(e){return Math.sqrt(e.r*e.r+e.i*e.i)}function jc(){return 4*Math.random()-2}function _L(e){let t=(0,hc.Eval)((0,Wn.caddr)(e));e=(0,hc.Eval)((0,Wn.cadr)(e)),t=t===(0,sL.symbol)(Wn.NIL)?(0,aL.guess)(e):t,(0,uL.ispolyexpandedform)(e,t)||(0,yl.stop)("nroots: polynomial?");let r=(0,iL.coeff)(e,t),s=r.length;s>Oy&&(0,yl.stop)("nroots: degree?");for(let i=0;i<s;i++)e=(0,hc.Eval)((0,jy.yyfloat)((0,fL.real)(r[i]))),t=(0,hc.Eval)((0,jy.yyfloat)((0,lL.imag)(r[i]))),(!(0,Wn.isdouble)(e)||!(0,Wn.isdouble)(t))&&(0,yl.stop)("nroots: coefficients?"),Je[i].r=e.d,Je[i].i=t.d;mL(s);let n=[];for(let i=s;i>1;i--)xL(i),Math.abs(it.r)<Ac&&(it.r=0),Math.abs(it.i)<Ac&&(it.i=0),n.push((0,nL.add)((0,hy.double)(it.r),(0,cL.multiply)((0,hy.double)(it.i),Wn.Constants.imaginaryunit))),pL(i);if(s=n.length,s==1)return n[0];if(s>1)return n.sort(oL.cmp_expr),e=(0,rL.alloc_tensor)(s),e.tensor.ndim=1,e.tensor.dim[0]=s,e.tensor.elem=n,e}function mL(e){yr.r=Je[e-1].r,yr.i=Je[e-1].i;let t=yr.r*yr.r+yr.i*yr.i;for(let r=0;r<e-1;r++)Je[r].r=(Je[r].r*yr.r+Je[r].i*yr.i)/t,Je[r].i=(Je[r].i*yr.r-Je[r].r*yr.i)/t;Je[e-1].r=1,Je[e-1].i=0}function xL(e){if(gl(Je[0])<Ac){it.r=0,it.i=0;return}for(let t=0;t<100;t++){it.r=jc(),it.i=jc(),Ay(e),$s.r=it.r,$s.i=it.i,zr.r=wr.r,zr.i=wr.i,it.r=jc(),it.i=jc();for(let r=0;r<1e3;r++){Ay(e);let s=gl(wr);if(Wn.DEBUG&&console.log(`nrabs: ${s}`),s<dL)return;gl(wr)<gl(zr)&&(Nt.r=it.r,Nt.i=it.i,it.r=$s.r,it.i=$s.i,$s.r=Nt.r,$s.i=Nt.i,Nt.r=wr.r,Nt.i=wr.i,wr.r=zr.r,wr.i=zr.i,zr.r=Nt.r,zr.i=Nt.i),Hi.r=$s.r-it.r,Hi.i=$s.i-it.i,Us.r=zr.r-wr.r,Us.i=zr.i-wr.i;let n=Us.r*Us.r+Us.i*Us.i;if(n===0)break;yr.r=(Hi.r*Us.r+Hi.i*Us.i)/n,yr.i=(Hi.i*Us.r-Hi.r*Us.i)/n,it.r=$s.r-(yr.r*zr.r-yr.i*zr.i),it.i=$s.i-(yr.r*zr.i+yr.i*zr.r)}}(0,yl.stop)("nroots: convergence error")}function Ay(e){Nt.r=it.r,Nt.i=it.i,wr.r=Je[0].r+Je[1].r*Nt.r-Je[1].i*Nt.i,wr.i=Je[0].i+Je[1].r*Nt.i+Je[1].i*Nt.r;for(let t=2;t<e;t++){let r=it.r*Nt.r-it.i*Nt.i;Nt.i=it.r*Nt.i+it.i*Nt.r,Nt.r=r,wr.r+=Je[t].r*Nt.r-Je[t].i*Nt.i,wr.i+=Je[t].r*Nt.i+Je[t].i*Nt.r}}function pL(e){for(let t=e-1;t>0;t--)Je[t-1].r+=Je[t].r*it.r-Je[t].i*it.i,Je[t-1].i+=Je[t].i*it.r+Je[t].r*it.i;gl(Je[0])>Ac&&(0,yl.stop)("nroots: residual error");for(let t=0;t<e-1;t++)Je[t].r=Je[t+1].r,Je[t].i=Je[t+1].i}var rL,Wn,yl,sL,oL,nL,hy,iL,hc,jy,aL,lL,uL,cL,fL,Oy,Ac,dL,gs,it,$s,Nt,yr,wr,zr,Hi,Us,Je,My=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_nroots=void 0;rL=(Ct(),o(Dt)),Wn=(T(),o(N)),yl=(Ae(),o(Me)),sL=(U(),o(G)),oL=(Le(),o(Pe)),nL=(_e(),o(pe)),hy=(Y(),o(V)),iL=(xn(),o(ui)),hc=(F(),o(z)),jy=(Ls(),o(_o)),aL=(Hr(),o(us)),lL=(Sa(),o(cu)),uL=(K(),o(te)),cL=(Q(),o(W)),fL=(Ei(),o(Ra)),Oy=101,Ac=1e-6,dL=1e-9;gs=class{constructor(){this.r=0,this.i=0}},it=new gs,$s=new gs,Nt=new gs,yr=new gs,wr=new gs,zr=new gs,Hi=new gs,Us=new gs,Je=[];for(let e=0;e<Oy;e++)Je[e]=new gs;exports.Eval_nroots=_L});var hL={};function vL(e){e=(0,on.cdr)(e);let t=(0,Ty.Eval)((0,on.car)(e));return(0,on.iscons)(e)?e.tail().reduce((s,n)=>qL(s,(0,Ty.Eval)(n)),t):t}function qL(e,t){return(0,on.istensor)(e)&&(0,on.istensor)(t)?EL(e,t):(0,on.istensor)(e)?(0,Ny.tensor_times_scalar)(e,t):(0,on.istensor)(t)?(0,Ny.scalar_times_tensor)(e,t):(0,Iy.multiply)(e,t)}function EL(e,t){let r=e.tensor.ndim+t.tensor.ndim;r>on.MAXDIM&&(0,yL.stop)("outer: rank of result exceeds maximum");let s=e.tensor.nelem*t.tensor.nelem,n=(0,gL.alloc_tensor)(s);n.tensor.ndim=r,n.tensor.dim=[...e.tensor.dim,...t.tensor.dim];let i=0;for(let a=0;a<e.tensor.nelem;a++)for(let u=0;u<t.tensor.nelem;u++)n.tensor.elem[i++]=(0,Iy.multiply)(e.tensor.elem[a],t.tensor.elem[u]);return n}var gL,on,yL,Ty,Iy,Ny,Sy=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_outer=void 0;gL=(Ct(),o(Dt)),on=(T(),o(N)),yL=(Ae(),o(Me)),Ty=(F(),o(z)),Iy=(Q(),o(W)),Ny=(jt(),o(Ot));exports.Eval_outer=vL});var Cy={};function OL(e){return wy(e),(0,Qi.symbol)(Ze.NIL)}function wy(e){let t;(0,Ze.iscons)((0,Ze.cdr)(e))||(0,$d.stop)("pattern needs at least a template and a transformed version");let r=(0,Ze.car)((0,Ze.cdr)(e)),s=(0,Ze.car)((0,Ze.cdr)((0,Ze.cdr)(e)));s===(0,Qi.symbol)(Ze.NIL)&&(0,$d.stop)("pattern needs at least a template and a transformed version"),(0,Ze.iscons)((0,Ze.cdr)((0,Ze.cdr)(e)))?t=(0,Ze.car)((0,Ze.cdr)((0,Ze.cdr)((0,Ze.cdr)(e)))):t=(0,Qi.symbol)(Ze.NIL),(0,jL.equal)(r,s)&&(0,$d.stop)("recursive pattern");let n="template: "+(0,Ry.print_list)(r);n+=" tests: "+(0,Ry.print_list)(t),Ze.DEBUG&&console.log(`pattern stringkey: ${n}`);let i=Ze.defs.userSimplificationsInStringForm.indexOf(n);return i===-1?(Ze.defs.userSimplificationsInStringForm.push(n),Ze.defs.userSimplificationsInListForm.push((0,Ze.cdr)(e))):(Ze.DEBUG&&console.log(`pattern already exists, replacing. ${(0,Ze.cdr)(e)}`),Ze.defs.userSimplificationsInStringForm[i]=n,Ze.defs.userSimplificationsInListForm[i]=(0,Ze.cdr)(e)),(0,AL.makeList)((0,Qi.symbol)(Ze.PATTERN),(0,Ze.cdr)(e))}function Ly(){Ze.defs.userSimplificationsInListForm=[],Ze.defs.userSimplificationsInStringForm=[]}function ML(){return Ly(),(0,Qi.symbol)(Ze.NIL)}function TL(){let e=NL();return e!==""?new Ze.Str(e):(0,Qi.symbol)(Ze.NIL)}function NL(){let e="";for(let t of Array.from(Ze.defs.userSimplificationsInListForm))e+=Ze.defs.userSimplificationsInListForm+`
`;return e}var Ze,$d,Qi,jL,AL,Ry,Ud=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_patternsinfo=exports.Eval_clearpatterns=exports.do_clearPatterns=exports.Eval_pattern=exports.Eval_silentpattern=void 0;Ze=(T(),o(N)),$d=(Ae(),o(Me)),Qi=(U(),o(G)),jL=(Le(),o(Pe)),AL=(se(),o(oe)),Ry=(to(),o(Do));exports.Eval_silentpattern=OL;exports.Eval_pattern=wy;exports.do_clearPatterns=Ly;exports.Eval_clearpatterns=ML;exports.Eval_patternsinfo=TL});var LL={};function RL(e){return wL((0,SL.Eval)((0,Bd.cadr)(e)))}function wL(e){let t=(0,Py.nativeInt)(e);return(t<1||t>Bd.MAXPRIMETAB)&&(0,IL.stop)("prime: Argument out of range."),t=Bd.primetab[t-1],(0,Py.integer)(t)}var Bd,IL,Py,SL,Dy=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_prime=void 0;Bd=(T(),o(N)),IL=(Ae(),o(Me)),Py=(Y(),o(V)),SL=(F(),o(z));exports.Eval_prime=RL});var $L={};function kL(e){let t=(0,Jn.cadr)(e),r=(0,Jn.caddr)(e);(0,Jn.issymbol)(r)||(0,CL.stop)("sum: 2nd arg?");let s=(0,Fd.evaluate_integer)((0,Jn.cadddr)(e));if(isNaN(s))return e;let n=(0,Fd.evaluate_integer)((0,Jn.caddddr)(e));if(isNaN(n))return e;let i=(0,Gd.get_binding)(r),a=Jn.Constants.one;for(let u=s;u<=n;u++){(0,Gd.set_binding)(r,(0,PL.integer)(u));let c=(0,Fd.Eval)(t),d=(0,DL.multiply)(a,c);Jn.DEBUG&&(console.log(`product - factor 1: ${c}`),console.log(`product - factor 2: ${a}`),console.log(`product - result: ${d}`)),a=d}return(0,Gd.set_binding)(r,i),a}var Jn,CL,Gd,PL,Fd,DL,ky=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_product=void 0;Jn=(T(),o(N)),CL=(Ae(),o(Me)),Gd=(U(),o(G)),PL=(Y(),o(V)),Fd=(F(),o(z)),DL=(Q(),o(W));exports.Eval_product=kL});var ZL={};function YL(e){return VL((0,BL.Eval)((0,Oc.cadr)(e)))}function VL(e){return(0,Oc.isNumericAtom)(e)?(0,Oc.isdouble)(e)?(0,$y.double)(Math.round(e.d)):(0,FL.isinteger)(e)?e:(e=(0,GL.yyfloat)(e),(0,$y.integer)(Math.round(e.d))):(0,zL.makeList)((0,UL.symbol)(Oc.ROUND),e)}var Oc,UL,$y,BL,GL,FL,zL,Uy=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_round=void 0;Oc=(T(),o(N)),UL=(U(),o(G)),$y=(Y(),o(V)),BL=(F(),o(z)),GL=(Ls(),o(_o)),FL=(K(),o(te)),zL=(se(),o(oe));exports.Eval_round=YL});var tC={};function KL(e){return eC((0,WL.Eval)((0,zd.cadr)(e)))}function eC(e){if(!(0,zd.istensor)(e))return(0,JL.isZeroAtomOrTensor)(e)||(0,HL.stop)("transpose: tensor expected, 1st arg is not a tensor"),zd.Constants.zero;let{ndim:t}=e.tensor,r=(0,XL.alloc_tensor)(t);r.tensor.ndim=1,r.tensor.dim[0]=t;for(let s=0;s<t;s++)r.tensor.elem[s]=(0,QL.integer)(e.tensor.dim[s]);return r}var XL,zd,HL,QL,WL,JL,By=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_shape=void 0;XL=(Ct(),o(Dt)),zd=(T(),o(N)),HL=(Ae(),o(Me)),QL=(Y(),o(V)),WL=(F(),o(z)),JL=(K(),o(te));exports.Eval_shape=KL});var iC={};function nC(e){let t=(0,Wi.cadr)(e),r=(0,Wi.caddr)(e);(0,Wi.issymbol)(r)||(0,rC.stop)("sum: 2nd arg?");let s=(0,Vd.evaluate_integer)((0,Wi.cadddr)(e));if(isNaN(s))return e;let n=(0,Vd.evaluate_integer)((0,Wi.caddddr)(e));if(isNaN(n))return e;let i=(0,Yd.get_binding)(r),a=Wi.Constants.zero;for(let u=s;u<=n;u++)(0,Yd.set_binding)(r,(0,oC.integer)(u)),a=(0,sC.add)(a,(0,Vd.Eval)(t));return(0,Yd.set_binding)(r,i),a}var Wi,rC,Yd,sC,oC,Vd,Gy=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_sum=void 0;Wi=(T(),o(N)),rC=(Ae(),o(Me)),Yd=(U(),o(G)),sC=(_e(),o(pe)),oC=(Y(),o(V)),Vd=(F(),o(z));exports.Eval_sum=nC});var cC={};function uC(e){return zy((0,aC.Eval)((0,ys.cadr)(e)))}function zy(e){if((0,ys.car)(e)===(0,Zd.symbol)(ys.ARCTAN))return(0,ys.cadr)(e);if((0,ys.isdouble)(e)){let r=Math.tan(e.d);return Math.abs(r)<1e-10&&(r=0),(0,Yr.double)(r)}if((0,lC.isnegative)(e))return(0,Kn.negate)(zy((0,Kn.negate)(e)));let t=(0,Yr.nativeInt)((0,Kn.divide)((0,Kn.multiply)(e,(0,Yr.integer)(180)),ys.Constants.Pi()));if(t<0||isNaN(t))return(0,Fy.makeList)((0,Zd.symbol)(ys.TAN),e);switch(t%360){case 0:case 180:return ys.Constants.zero;case 30:case 210:return(0,Kn.multiply)((0,Yr.rational)(1,3),(0,Mc.power)((0,Yr.integer)(3),(0,Yr.rational)(1,2)));case 150:case 330:return(0,Kn.multiply)((0,Yr.rational)(-1,3),(0,Mc.power)((0,Yr.integer)(3),(0,Yr.rational)(1,2)));case 45:case 225:return ys.Constants.one;case 135:case 315:return ys.Constants.negOne;case 60:case 240:return(0,Mc.power)((0,Yr.integer)(3),(0,Yr.rational)(1,2));case 120:case 300:return(0,Kn.negate)((0,Mc.power)((0,Yr.integer)(3),(0,Yr.rational)(1,2)));default:return(0,Fy.makeList)((0,Zd.symbol)(ys.TAN),e)}}var ys,Zd,Yr,aC,lC,Fy,Kn,Mc,Yy=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_tan=void 0;ys=(T(),o(N)),Zd=(U(),o(G)),Yr=(Y(),o(V)),aC=(F(),o(z)),lC=(K(),o(te)),Fy=(se(),o(oe)),Kn=(Q(),o(W)),Mc=(At(),o(Mt));exports.Eval_tan=uC});var bC={};function xC(e){return pC((0,dC.Eval)((0,ei.cadr)(e)))}function pC(e){if((0,ei.car)(e)===(0,Vy.symbol)(ei.ARCTANH))return(0,ei.cadr)(e);if((0,ei.isdouble)(e)){let t=Math.tanh(e.d);return Math.abs(t)<1e-10&&(t=0),(0,fC.double)(t)}return(0,_C.isZeroAtomOrTensor)(e)?ei.Constants.zero:(0,mC.makeList)((0,Vy.symbol)(ei.TANH),e)}var ei,Vy,fC,dC,_C,mC,Zy=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_tanh=void 0;ei=(T(),o(N)),Vy=(U(),o(G)),fC=(Y(),o(V)),dC=(F(),o(z)),_C=(K(),o(te)),mC=(se(),o(oe));exports.Eval_tanh=xC});var AC={};function hC(e){e=(0,Lr.cdr)(e);let t=(0,Ji.Eval)((0,Lr.car)(e));e=(0,Lr.cdr)(e);let r=(0,Ji.Eval)((0,Lr.car)(e)),s=r===(0,Tc.symbol)(Lr.NIL)?(0,vC.guess)(t):r;e=(0,Lr.cdr)(e),r=(0,Ji.Eval)((0,Lr.car)(e));let n=r===(0,Tc.symbol)(Lr.NIL)?(0,Hd.integer)(24):r;e=(0,Lr.cdr)(e),r=(0,Ji.Eval)((0,Lr.car)(e));let i=r===(0,Tc.symbol)(Lr.NIL)?Lr.Constants.zero:r;return jC(t,s,n,i)}function jC(e,t,r,s){let n=(0,Hd.nativeInt)(r);if(isNaN(n))return(0,EC.makeList)((0,Tc.symbol)(Lr.TAYLOR),e,t,r,s);let i=Lr.Constants.one,a=(0,Ji.Eval)((0,Hy.subst)(e,t,s));for(let u=1;u<=n&&(e=(0,gC.derivative)(e,t),!(0,qC.isZeroAtomOrTensor)(e));u++){i=(0,Xd.multiply)(i,(0,Xy.subtract)(t,s));let c=(0,Ji.Eval)((0,Hy.subst)(e,t,s));a=(0,Xy.add)(a,(0,Xd.divide)((0,Xd.multiply)(c,i),(0,yC.factorial)((0,Hd.integer)(u))))}return a}var Lr,Tc,Xy,Hd,gC,Ji,yC,vC,qC,EC,Xd,Hy,Qy=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_taylor=void 0;Lr=(T(),o(N)),Tc=(U(),o(G)),Xy=(_e(),o(pe)),Hd=(Y(),o(V)),gC=(Ln(),o(Di)),Ji=(F(),o(z)),yC=(En(),o(hi)),vC=(Hr(),o(us)),qC=(K(),o(te)),EC=(se(),o(oe)),Xd=(Q(),o(W)),Hy=(Xr(),o(ns));exports.Eval_taylor=hC});var DC={};function TC(e){let t=e;for(e=(0,ve.cdr)(e);(0,ve.iscons)(e);){if((0,ve.cdr)(e)===(0,OC.symbol)(ve.NIL))return(0,jo.Eval)((0,ve.car)(e));let r=(0,ti.isZeroLikeOrNonZeroLikeOrUndetermined)((0,ve.car)(e));if(r==null)return t;if(r)return(0,jo.Eval)((0,ve.cadr)(e));e=(0,ve.cddr)(e)}return ve.Constants.zero}function NC(e){let t=e,r=(0,Qd.subtract)((0,jo.Eval)((0,ve.cadr)(e)),(0,jo.Eval)((0,ve.caddr)(e))),s=(0,ti.isZeroLikeOrNonZeroLikeOrUndetermined)(r);if(s)return ve.Constants.zero;if(s!=null&&!s)return ve.Constants.one;let n=(0,Nc.simplify)((0,jo.Eval)((0,ve.cadr)(e))),i=(0,Nc.simplify)((0,jo.Eval)((0,ve.caddr)(e)));return r=(0,Qd.subtract)(n,i),s=(0,ti.isZeroLikeOrNonZeroLikeOrUndetermined)(r),s?ve.Constants.zero:s!=null&&!s?ve.Constants.one:t}function IC(e){let t=e,r=Ic(e);return r==null?t:r>=0?ve.Constants.one:ve.Constants.zero}function SC(e){let t=e,r=Ic(e);return r==null?t:r>0?ve.Constants.one:ve.Constants.zero}function RC(e){let t=e,r=Ic(e);return r==null?t:r<=0?ve.Constants.one:ve.Constants.zero}function wC(e){let t=e,r=Ic(e);return r==null?t:r<0?ve.Constants.one:ve.Constants.zero}function LC(e){let t=e,r=(0,ti.isZeroLikeOrNonZeroLikeOrUndetermined)((0,ve.cadr)(e));return r==null?t:r?ve.Constants.zero:ve.Constants.one}function CC(e){let t=e,r=(0,ve.cdr)(t),s=!1;for(;(0,ve.iscons)(r);){let n=(0,ti.isZeroLikeOrNonZeroLikeOrUndetermined)((0,ve.car)(r));if(n==null)s=!0,r=(0,ve.cdr)(r);else if(n)r=(0,ve.cdr)(r);else if(!n)return ve.Constants.zero}return s?t:ve.Constants.one}function PC(e){let t=e,r=(0,ve.cdr)(t),s=!1;for(;(0,ve.iscons)(r);){let n=(0,ti.isZeroLikeOrNonZeroLikeOrUndetermined)((0,ve.car)(r));if(n==null)s=!0,r=(0,ve.cdr)(r);else{if(n)return ve.Constants.one;n||(r=(0,ve.cdr)(r))}}return s?t:ve.Constants.zero}function Ic(e){let t=0,r=(0,Nc.simplify)((0,jo.Eval)((0,ve.cadr)(e))),s=(0,Nc.simplify)((0,jo.Eval)((0,ve.caddr)(e)));if(e=(0,Qd.subtract)(r,s),e.k!==ve.NUM&&e.k!==ve.DOUBLE&&(e=(0,jo.Eval)((0,MC.yyfloat)(e))),(0,ti.isZeroAtomOrTensor)(e))return 0;switch(e.k){case ve.NUM:(0,ve.MSIGN)(e.q.a)===-1?t=-1:t=1;break;case ve.DOUBLE:e.d<0?t=-1:t=1;break;default:t=null}return t}var ve,OC,Qd,jo,MC,ti,Nc,Wy=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_or=exports.Eval_and=exports.Eval_not=exports.Eval_testlt=exports.Eval_testle=exports.Eval_testgt=exports.Eval_testge=exports.Eval_testeq=exports.Eval_test=void 0;ve=(T(),o(N)),OC=(U(),o(G)),Qd=(_e(),o(pe)),jo=(F(),o(z)),MC=(Ls(),o(_o)),ti=(K(),o(te)),Nc=(Ho(),o(Mn));exports.Eval_test=TC;exports.Eval_testeq=NC;exports.Eval_testge=IC;exports.Eval_testgt=SC;exports.Eval_testle=RC;exports.Eval_testlt=wC;exports.Eval_not=LC;exports.Eval_and=CC;exports.Eval_or=PC});var BC={};function UC(e){let t=Array(Sc.MAXDIM).fill(0),r=1,s=0;if((0,Sc.iscons)(e))for(let n of e.tail()){let i=(0,$C.evaluate_integer)(n);if(i<1||isNaN(i))return Sc.Constants.zero;r*=i,t[s++]=i}if(s===0)return Sc.Constants.zero;e=(0,kC.alloc_tensor)(r),e.tensor.ndim=s;for(let n=0;n<s;n++)e.tensor.dim[n]=t[n];return e}var kC,Sc,$C,Jy=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_zero=void 0;kC=(Ct(),o(Dt)),Sc=(T(),o(N)),$C=(F(),o(z));exports.Eval_zero=UC});var Ky={};var Wd=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.version=void 0;exports.version="2.0.1"});var wc={};function pP(){Kd=0,(0,p.reset_after_error)(),p.defs.chainOfUserSymbolsNotFunctionsBeingEvaluated=[],!Kd&&(Kd=1,(0,b.reset_symbols)(),ov())}function ov(){(0,b.std_symbol)(p.ABS,GC.Eval_abs),(0,b.std_symbol)(p.ADD,FC.Eval_add),(0,b.std_symbol)(p.ADJ,zC.Eval_adj),(0,b.std_symbol)(p.AND,Ao.Eval_and),(0,b.std_symbol)(p.APPROXRATIO,YC.Eval_approxratio),(0,b.std_symbol)(p.ARCCOS,VC.Eval_arccos),(0,b.std_symbol)(p.ARCCOSH,ZC.Eval_arccosh),(0,b.std_symbol)(p.ARCSIN,XC.Eval_arcsin),(0,b.std_symbol)(p.ARCSINH,HC.Eval_arcsinh),(0,b.std_symbol)(p.ARCTAN,QC.Eval_arctan),(0,b.std_symbol)(p.ARCTANH,WC.Eval_arctanh),(0,b.std_symbol)(p.ARG,JC.Eval_arg),(0,b.std_symbol)(p.ATOMIZE),(0,b.std_symbol)(p.BESSELJ,KC.Eval_besselj),(0,b.std_symbol)(p.BESSELY,e3.Eval_bessely),(0,b.std_symbol)(p.BINDING,qt.Eval_binding),(0,b.std_symbol)(p.BINOMIAL,t3.Eval_binomial),(0,b.std_symbol)(p.CEILING,r3.Eval_ceiling),(0,b.std_symbol)(p.CHECK,qt.Eval_check),(0,b.std_symbol)(p.CHOOSE,s3.Eval_choose),(0,b.std_symbol)(p.CIRCEXP,o3.Eval_circexp),(0,b.std_symbol)(p.CLEAR,tv.Eval_clear),(0,b.std_symbol)(p.CLEARALL,tv.Eval_clearall),(0,b.std_symbol)(p.CLEARPATTERNS,Rc.Eval_clearpatterns),(0,b.std_symbol)(p.CLOCK,n3.Eval_clock),(0,b.std_symbol)(p.COEFF,i3.Eval_coeff),(0,b.std_symbol)(p.COFACTOR,a3.Eval_cofactor),(0,b.std_symbol)(p.CONDENSE,l3.Eval_condense),(0,b.std_symbol)(p.CONJ,u3.Eval_conj),(0,b.std_symbol)(p.CONTRACT,c3.Eval_contract),(0,b.std_symbol)(p.COS,f3.Eval_cos),(0,b.std_symbol)(p.COSH,d3.Eval_cosh),(0,b.std_symbol)(p.DECOMP,_3.Eval_decomp),(0,b.std_symbol)(p.DEFINT,x3.Eval_defint),(0,b.std_symbol)(p.DEGREE,p3.Eval_degree),(0,b.std_symbol)(p.DENOMINATOR,b3.Eval_denominator),(0,b.std_symbol)(p.DET,qt.Eval_det),(0,b.std_symbol)(p.DERIVATIVE,g3.Eval_derivative),(0,b.std_symbol)(p.DIM,qt.Eval_dim),(0,b.std_symbol)(p.DIRAC,y3.Eval_dirac),(0,b.std_symbol)(p.DIVISORS,qt.Eval_divisors),(0,b.std_symbol)(p.DO,qt.Eval_do),(0,b.std_symbol)(p.DOT,rv.Eval_inner),(0,b.std_symbol)(p.DRAW),(0,b.std_symbol)(p.DSOLVE),(0,b.std_symbol)(p.ERF,v3.Eval_erf),(0,b.std_symbol)(p.ERFC,q3.Eval_erfc),(0,b.std_symbol)(p.EIGEN,Jd.Eval_eigen),(0,b.std_symbol)(p.EIGENVAL,Jd.Eval_eigenval),(0,b.std_symbol)(p.EIGENVEC,Jd.Eval_eigenvec),(0,b.std_symbol)(p.EVAL,qt.Eval_Eval),(0,b.std_symbol)(p.EXP,qt.Eval_exp),(0,b.std_symbol)(p.EXPAND,E3.Eval_expand),(0,b.std_symbol)(p.EXPCOS,h3.Eval_expcos),(0,b.std_symbol)(p.EXPSIN,j3.Eval_expsin),(0,b.std_symbol)(p.FACTOR,A3.Eval_factor),(0,b.std_symbol)(p.FACTORIAL,qt.Eval_factorial),(0,b.std_symbol)(p.FACTORPOLY,qt.Eval_factorpoly),(0,b.std_symbol)(p.FILTER,O3.Eval_filter),(0,b.std_symbol)(p.FLOATF,M3.Eval_float),(0,b.std_symbol)(p.FLOOR,T3.Eval_floor),(0,b.std_symbol)(p.FOR,N3.Eval_for),(0,b.std_symbol)(p.FUNCTION,m3.Eval_function_reference),(0,b.std_symbol)(p.GAMMA,I3.Eval_gamma),(0,b.std_symbol)(p.GCD,S3.Eval_gcd),(0,b.std_symbol)(p.HERMITE,qt.Eval_hermite),(0,b.std_symbol)(p.HILBERT,qt.Eval_hilbert),(0,b.std_symbol)(p.IMAG,R3.Eval_imag),(0,b.std_symbol)(p.INDEX,qt.Eval_index),(0,b.std_symbol)(p.INNER,rv.Eval_inner),(0,b.std_symbol)(p.INTEGRAL,w3.Eval_integral),(0,b.std_symbol)(p.INV,qt.Eval_inv),(0,b.std_symbol)(p.INVG,qt.Eval_invg),(0,b.std_symbol)(p.ISINTEGER,qt.Eval_isinteger),(0,b.std_symbol)(p.ISPRIME,L3.Eval_isprime),(0,b.std_symbol)(p.LAGUERRE,C3.Eval_laguerre),(0,b.std_symbol)(p.LCM,P3.Eval_lcm),(0,b.std_symbol)(p.LEADING,D3.Eval_leading),(0,b.std_symbol)(p.LEGENDRE,k3.Eval_legendre),(0,b.std_symbol)(p.LOG,U3.Eval_log),(0,b.std_symbol)(p.LOOKUP,B3.Eval_lookup),(0,b.std_symbol)(p.MOD,G3.Eval_mod),(0,b.std_symbol)(p.MULTIPLY,F3.Eval_multiply),(0,b.std_symbol)(p.NOT,Ao.Eval_not),(0,b.std_symbol)(p.NROOTS,z3.Eval_nroots),(0,b.std_symbol)(p.NUMBER,qt.Eval_number),(0,b.std_symbol)(p.NUMERATOR,Y3.Eval_numerator),(0,b.std_symbol)(p.OPERATOR,qt.Eval_operator),(0,b.std_symbol)(p.OR,Ao.Eval_or),(0,b.std_symbol)(p.OUTER,V3.Eval_outer),(0,b.std_symbol)(p.PATTERN,Rc.Eval_pattern),(0,b.std_symbol)(p.PATTERNSINFO,Rc.Eval_patternsinfo),(0,b.std_symbol)(p.POLAR,Z3.Eval_polar),(0,b.std_symbol)(p.POWER,X3.Eval_power),(0,b.std_symbol)(p.PRIME,H3.Eval_prime),(0,b.std_symbol)(p.PRINT,nn.Eval_print),(0,b.std_symbol)(p.PRINT2DASCII,nn.Eval_print2dascii),(0,b.std_symbol)(p.PRINTFULL,nn.Eval_printcomputer),(0,b.std_symbol)(p.PRINTLATEX,nn.Eval_printlatex),(0,b.std_symbol)(p.PRINTLIST,nn.Eval_printlist),(0,b.std_symbol)(p.PRINTPLAIN,nn.Eval_printhuman),(0,b.std_symbol)(p.PRINT_LEAVE_E_ALONE),(0,b.std_symbol)(p.PRINT_LEAVE_X_ALONE),(0,b.std_symbol)(p.PRODUCT,Q3.Eval_product),(0,b.std_symbol)(p.QUOTE,qt.Eval_quote),(0,b.std_symbol)(p.QUOTIENT,W3.Eval_quotient),(0,b.std_symbol)(p.RANK,qt.Eval_rank),(0,b.std_symbol)(p.RATIONALIZE,J3.Eval_rationalize),(0,b.std_symbol)(p.REAL,K3.Eval_real),(0,b.std_symbol)(p.YYRECT,eP.Eval_rect),(0,b.std_symbol)(p.ROOTS,tP.Eval_roots),(0,b.std_symbol)(p.ROUND,rP.Eval_round),(0,b.std_symbol)(p.SETQ,qt.Eval_setq),(0,b.std_symbol)(p.SGN,oP.Eval_sgn),(0,b.std_symbol)(p.SILENTPATTERN,Rc.Eval_silentpattern),(0,b.std_symbol)(p.SIMPLIFY,iP.Eval_simplify),(0,b.std_symbol)(p.SIN,aP.Eval_sin),(0,b.std_symbol)(p.SINH,lP.Eval_sinh),(0,b.std_symbol)(p.SHAPE,nP.Eval_shape),(0,b.std_symbol)(p.SQRT,qt.Eval_sqrt),(0,b.std_symbol)(p.STOP,qt.Eval_stop),(0,b.std_symbol)(p.SUBST,qt.Eval_subst),(0,b.std_symbol)(p.SUM,uP.Eval_sum),(0,b.std_symbol)(p.SYMBOLSINFO,b.Eval_symbolsinfo),(0,b.std_symbol)(p.TAN,cP.Eval_tan),(0,b.std_symbol)(p.TANH,fP.Eval_tanh),(0,b.std_symbol)(p.TAYLOR,dP.Eval_taylor),(0,b.std_symbol)(p.TEST,Ao.Eval_test),(0,b.std_symbol)(p.TESTEQ,Ao.Eval_testeq),(0,b.std_symbol)(p.TESTGE,Ao.Eval_testge),(0,b.std_symbol)(p.TESTGT,Ao.Eval_testgt),(0,b.std_symbol)(p.TESTLE,Ao.Eval_testle),(0,b.std_symbol)(p.TESTLT,Ao.Eval_testlt),(0,b.std_symbol)(p.TRANSPOSE,_P.Eval_transpose),(0,b.std_symbol)(p.UNIT,qt.Eval_unit),(0,b.std_symbol)(p.ZERO,mP.Eval_zero),(0,b.std_symbol)(p.NIL),(0,b.std_symbol)(p.AUTOEXPAND),(0,b.std_symbol)(p.BAKE),(0,b.std_symbol)(p.ASSUME_REAL_VARIABLES),(0,b.std_symbol)(p.LAST),(0,b.std_symbol)(p.LAST_PRINT),(0,b.std_symbol)(p.LAST_2DASCII_PRINT),(0,b.std_symbol)(p.LAST_FULL_PRINT),(0,b.std_symbol)(p.LAST_LATEX_PRINT),(0,b.std_symbol)(p.LAST_LIST_PRINT),(0,b.std_symbol)(p.LAST_PLAIN_PRINT),(0,b.std_symbol)(p.TRACE),(0,b.std_symbol)(p.FORCE_FIXED_PRINTOUT),(0,b.std_symbol)(p.MAX_FIXED_PRINTOUT_DIGITS),(0,b.std_symbol)(p.YYE),(0,b.std_symbol)(p.DRAWX),(0,b.std_symbol)(p.METAA),(0,b.std_symbol)(p.METAB),(0,b.std_symbol)(p.METAX),(0,b.std_symbol)(p.SECRETX),(0,b.std_symbol)(p.VERSION),(0,b.std_symbol)(p.PI),(0,b.std_symbol)(p.SYMBOL_A),(0,b.std_symbol)(p.SYMBOL_B),(0,b.std_symbol)(p.SYMBOL_C),(0,b.std_symbol)(p.SYMBOL_D),(0,b.std_symbol)(p.SYMBOL_I),(0,b.std_symbol)(p.SYMBOL_J),(0,b.std_symbol)(p.SYMBOL_N),(0,b.std_symbol)(p.SYMBOL_R),(0,b.std_symbol)(p.SYMBOL_S),(0,b.std_symbol)(p.SYMBOL_T),(0,b.std_symbol)(p.SYMBOL_X),(0,b.std_symbol)(p.SYMBOL_Y),(0,b.std_symbol)(p.SYMBOL_Z),(0,b.std_symbol)(p.SYMBOL_IDENTITY_MATRIX),(0,b.std_symbol)(p.SYMBOL_A_UNDERSCORE),(0,b.std_symbol)(p.SYMBOL_B_UNDERSCORE),(0,b.std_symbol)(p.SYMBOL_X_UNDERSCORE),(0,b.std_symbol)(p.C1),(0,b.std_symbol)(p.C2),(0,b.std_symbol)(p.C3),(0,b.std_symbol)(p.C4),(0,b.std_symbol)(p.C5),(0,b.std_symbol)(p.C6),bP();let e=p.defs.codeGen;p.defs.codeGen=!1;for(let t=0;t<sv.length;t++){let r=sv[t],[,s]=(0,sP.scan)(r);p.DEBUG&&(console.log(`... evaling ${r}`),console.log("top of stack:"),console.log((0,nn.print_list)(s))),(0,qt.Eval)(s)}p.defs.codeGen=e}function bP(){let e=(0,$3.makeList)((0,b.symbol)(p.POWER),(0,ev.integer)(-1),(0,ev.rational)(1,2));p.DEBUG&&console.log((0,nn.print_list)(e)),p.Constants.imaginaryunit=e}var GC,FC,zC,YC,VC,ZC,XC,HC,QC,WC,JC,KC,e3,ev,t3,r3,s3,o3,tv,n3,i3,a3,l3,u3,c3,f3,d3,_3,m3,x3,p3,b3,g3,y3,Jd,v3,q3,qt,E3,h3,j3,A3,O3,M3,T3,N3,I3,S3,R3,rv,w3,L3,C3,P3,D3,k3,$3,U3,B3,G3,F3,z3,Y3,V3,Rc,Z3,X3,H3,nn,Q3,W3,J3,K3,eP,tP,rP,sP,oP,nP,iP,aP,lP,uP,cP,fP,dP,Ao,_P,mP,p,b,xP,Kd,sv,vl=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.defn=exports.init=void 0;GC=(is(),o(js)),FC=(_e(),o(pe)),zC=(Q0(),o(Mx)),YC=(fd(),o(eg)),VC=(rg(),o(UI)),ZC=(og(),o(XI)),XC=(ig(),o(JI)),HC=(lg(),o(nS)),QC=(L0(),o(Gm)),WC=(cg(),o(_S)),JC=(ci(),o(ya)),KC=(tf(),o(Bx)),e3=(rf(),o(Xx)),ev=(Y(),o(V)),t3=(_g(),o(yS)),r3=(xg(),o(NS)),s3=(gg(),o(LS)),o3=(Tg(),o(YS)),tv=(e_(),o(nv)),n3=(Xl(),o(a0)),i3=(xn(),o(ui)),a3=(H0(),o(Ax)),l3=(Ta(),o(iu)),u3=(pn(),o(fi)),c3=(Ig(),o(JS)),f3=(Lo(),o(bn)),d3=(sf(),o(Wx)),_3=(Mf(),o(Ep)),m3=(r0(),o(L_)),x3=(Rg(),o(rR)),p3=(cc(),o(jd)),b3=(Ns(),o(eo)),g3=(Ln(),o(Di)),y3=(lf(),o(ep)),Jd=(Ug(),o(xR)),v3=(Zg(),o(TR)),q3=(Md(),o(Gg)),qt=(F(),o(z)),E3=(oy(),o(ZR)),h3=(bd(),o(Eg)),j3=(gd(),o(Og)),A3=(ha(),o(Wl)),O3=(ba(),o(Yl)),M3=(Ls(),o(_o)),T3=(iy(),o(sw)),N3=(ay(),o(aw)),I3=(fy(),o(xw)),S3=(_n(),o(li)),R3=(Sa(),o(cu)),rv=(zo(),o(jn)),w3=(tl(),o(Bu)),L3=(dy(),o(qw)),C3=(my(),o(Ow)),P3=(o0(),o(D_)),D3=(py(),o(Cw)),k3=(yy(),o(Vw)),$3=(se(),o(oe)),U3=(Gf(),o(Gp)),B3=(vy(),o(Hw)),G3=(Ey(),o(tL)),F3=(Q(),o(W)),z3=(My(),o(bL)),Y3=(no(),o($o)),V3=(Sy(),o(hL)),Rc=(Ud(),o(Cy)),Z3=(Hl(),o(u0)),X3=(At(),o(Mt)),H3=(Dy(),o(LL)),nn=(to(),o(Do)),Q3=(ky(),o($L)),W3=(Kl(),o(v0)),J3=(Na(),o(lu)),K3=(Ei(),o(Ra)),eP=(Ks(),o(Co)),tP=(Af(),o(mp)),rP=(Uy(),o(ZL)),sP=(Xo(),o(On)),oP=(zf(),o(Xp)),nP=(By(),o(tC)),iP=(Ho(),o(Mn)),aP=(Qs(),o(wo)),lP=(Yf(),o(Wp)),uP=(Gy(),o(iC)),cP=(Yy(),o(cC)),fP=(Zy(),o(bC)),dP=(Qy(),o(AC)),Ao=(Wy(),o(DC)),_P=(wf(),o(Np)),mP=(Jy(),o(BC)),p=(T(),o(N)),b=(U(),o(G)),xP=(Wd(),o(Ky)),Kd=0;exports.init=pP;sv=['version="'+xP.version+'"',"e=exp(1)","i=sqrt(-1)","autoexpand=1","assumeRealVariables=1","trange=[-pi,pi]","xrange=[-10,10]","yrange=[-10,10]","last=0","trace=0","forceFixedPrintout=1","maxFixedPrintoutDigits=6","printLeaveEAlone=1","printLeaveXAlone=0","cross(u,v)=[u[2]*v[3]-u[3]*v[2],u[3]*v[1]-u[1]*v[3],u[1]*v[2]-u[2]*v[1]]","curl(v)=[d(v[3],y)-d(v[2],z),d(v[1],z)-d(v[3],x),d(v[2],x)-d(v[1],y)]","div(v)=d(v[1],x)+d(v[2],y)+d(v[3],z)","ln(x)=log(x)"];exports.defn=ov});var nv={};function EP(){return iv(),(0,Lc.symbol)(Oo.NIL)}function iv(){return Oo.defs.test_flag||(0,yP.clear_term)(),(0,qP.do_clearPatterns)(),(0,Lc.clear_symbols)(),(0,gP.defn)(),Oo.defs.codeGen=!1}function hP(e){let t;for(t=(0,Oo.cdr)(e);(0,Oo.iscons)(t);){let r=(0,Oo.car)(t);r.k!==Oo.SYM&&(0,vP.stop)("symbol error"),(0,Lc.clear_symbol)(r),t=(0,Oo.cdr)(t)}return(0,Lc.symbol)(Oo.NIL)}var Oo,gP,yP,vP,Lc,qP,e_=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Eval_clear=exports.do_clearall=exports.Eval_clearall=void 0;Oo=(T(),o(N)),gP=(vl(),o(wc)),yP=(uo(),o(Go)),vP=(Ae(),o(Me)),Lc=(U(),o(G)),qP=(Ud(),o(Cy));exports.Eval_clearall=EP;exports.do_clearall=iv;exports.Eval_clear=hP});var pv={};function r_(e){let t="";return t+=e,t}function OP(e){return r_(e)}function MP(e){xt=0,Bs=0,Gs=0,TP(e);let[t,r,s]=Array.from(ra(0,xt));if(r>100){(0,AP.printline)(e);return}return BP()}function TP(e){if((0,g.car)(e)===(0,vs.symbol)(g.SETQ)){vr((0,g.cadr)(e)),i_(" = "),vr((0,g.caddr)(e));return}(0,g.istensor)(e)?FP(e):vr(e)}function lv(e){if(Bs>0)return!1;if((0,or.isfraction)(e))return!0;if(!(0,g.ismultiply)(e))return!1;if((0,or.isfraction)((0,g.cadr)(e)))return!0;for(;(0,g.iscons)(e);){if(ri((0,g.car)(e)))return!0;e=(0,g.cdr)(e)}return!1}function vr(e){if(av++,(0,g.isadd)(e))for(e=(0,g.cdr)(e),Ki((0,g.car)(e))&&(ge("-"),lv((0,g.car)(e))&&ge(" ")),ea((0,g.car)(e)),e=(0,g.cdr)(e);(0,g.iscons)(e);)Ki((0,g.car)(e))?(ge(" "),ge("-"),ge(" ")):(ge(" "),ge("+"),ge(" ")),ea((0,g.car)(e)),e=(0,g.cdr)(e);else Ki(e)&&(ge("-"),lv(e)&&ge(" ")),ea(e);av--}function NP(e){if((0,g.isadd)(e))for(e=(0,g.cdr)(e),ea((0,g.car)(e)),e=(0,g.cdr)(e);(0,g.iscons)(e);)Ki((0,g.car)(e))?(ge(" "),ge("-"),ge(" ")):(ge(" "),ge("+"),ge(" ")),ea((0,g.car)(e)),e=(0,g.cdr)(e);else ea(e)}function Ki(e){return!!((0,or.isnegativenumber)(e)||(0,g.ismultiply)(e)&&(0,or.isnegativenumber)((0,g.cadr)(e)))}function ea(e){if((0,g.ismultiply)(e)){let t=IP(e);t&&Bs===0?RP(e,t):SP(e,t)}else qs(e)}function ri(e){return(0,g.ispower)(e)&&(0,g.cadr)(e)!==(0,vs.symbol)(g.E)&&Ki((0,g.caddr)(e))}function IP(e){let t=0;for(e=(0,g.cdr)(e);(0,g.iscons)(e);){let r=(0,g.car)(e);ri(r)&&t++,e=(0,g.cdr)(e)}return t}function SP(e,t){if(t===0)for(e=(0,g.cdr)(e),((0,or.isplusone)((0,g.car)(e))||(0,or.isminusone)((0,g.car)(e)))&&(e=(0,g.cdr)(e)),qs((0,g.car)(e)),e=(0,g.cdr)(e);(0,g.iscons)(e);)ge(" "),qs((0,g.car)(e)),e=(0,g.cdr)(e);else wP(e),ge("/"),t>1||(0,or.isfraction)((0,g.cadr)(e))?(ge("("),uv(e),ge(")")):uv(e)}function RP(e,t){let r,s,n=0,i=0,a=0,u=0,c=0,d=g.Constants.one,m=g.Constants.one;for((0,g.isrational)((0,g.cadr)(e))&&(d=(0,El.absval)((0,ta.mp_numerator)((0,g.cadr)(e))),m=(0,ta.mp_denominator)((0,g.cadr)(e))),(0,g.isdouble)((0,g.cadr)(e))&&(d=(0,El.absval)((0,g.cadr)(e))),u=(0,or.isplusone)(d)?0:1,r=(0,g.cdr)(e),(0,g.isNumericAtom)((0,g.car)(r))&&(r=(0,g.cdr)(r));(0,g.iscons)(r);)s=(0,g.car)(r),ri(s)||u++,r=(0,g.cdr)(r);for(c=Gs,i=xt,n=0,(0,or.isplusone)(d)||(Mo(d,0),n++),r=(0,g.cdr)(e),(0,g.isNumericAtom)((0,g.car)(r))&&(r=(0,g.cdr)(r));(0,g.iscons)(r);)s=(0,g.car)(r),ri(s)||(n>0&&ge(" "),u===1?vr(s):qs(s),n++),r=(0,g.cdr)(r);for(n===0&&ge("1"),a=xt,n=0,(0,or.isplusone)(m)||(Mo(m,0),n++,t++),r=(0,g.cdr)(e),(0,g.isrational)((0,g.car)(r))&&(r=(0,g.cdr)(r));(0,g.iscons)(r);)s=(0,g.car)(r),ri(s)&&(n>0&&ge(" "),o_(s,t),n++),r=(0,g.cdr)(r);n_(c,i,a)}function wP(e){let t=g.Constants.one;e=(0,g.cdr)(e),(0,g.isrational)((0,g.car)(e))?(t=(0,El.absval)((0,ta.mp_numerator)((0,g.car)(e))),e=(0,g.cdr)(e)):(0,g.isdouble)((0,g.car)(e))&&(t=(0,El.absval)((0,g.car)(e)),e=(0,g.cdr)(e));let r=0;for((0,or.isplusone)(t)||(Mo(t,0),r++);(0,g.iscons)(e);)ri((0,g.car)(e))||(r>0&&ge(" "),qs((0,g.car)(e)),r++),e=(0,g.cdr)(e);r===0&&ge("1")}function uv(e){let t=0;if(e=(0,g.cdr)(e),(0,or.isfraction)((0,g.car)(e))){let r=(0,ta.mp_denominator)((0,g.car)(e));Mo(r,0),t++,e=(0,g.cdr)(e)}for(;(0,g.iscons)(e);)ri((0,g.car)(e))&&(t>0&&ge(" "),o_((0,g.car)(e),0),t++),e=(0,g.cdr)(e)}function qs(e){if((0,g.istensor)(e)){Cc(e);return}if((0,g.isdouble)(e)){Mo(e,0);return}if((0,g.isadd)(e)||(0,g.ismultiply)(e)){an(e);return}if((0,g.ispower)(e)){CP(e);return}if((0,g.iscons)(e)){PP(e);return}if((0,g.isNumericAtom)(e)){Bs===0?LP(e):Mo(e,0);return}if((0,g.issymbol)(e)){_v(e);return}(0,g.isstr)(e)&&$P(e)}function LP(e){let t=(0,El.absval)((0,ta.mp_numerator)(e)),r=(0,ta.mp_denominator)(e);if((0,or.isplusone)(r)){Mo(t,0);return}let s=Gs,n=xt;Mo(t,0);let i=xt;Mo(r,0),n_(s,n,i)}function ql(e){return(0,g.iscons)(e)&&!(0,g.isadd)(e)&&!(0,g.ismultiply)(e)&&!(0,g.ispower)(e)||(0,g.issymbol)(e)?!0:(0,or.isfraction)(e)||(0,or.isnegativenumber)(e)?!1:!!(0,g.isNumericAtom)(e)}function CP(e){let t=0,r=0,s=0;if((0,g.cadr)(e)===(0,vs.symbol)(g.E)){i_("exp("),vr((0,g.caddr)(e)),ge(")");return}if(Bs>0){(0,or.isminusone)((0,g.caddr)(e))?(ge("1"),ge("/"),ql((0,g.cadr)(e))?qs((0,g.cadr)(e)):an((0,g.cadr)(e))):(ql((0,g.cadr)(e))?qs((0,g.cadr)(e)):an((0,g.cadr)(e)),ge("^"),ql((0,g.caddr)(e))?qs((0,g.caddr)(e)):an((0,g.caddr)(e)));return}if(Ki((0,g.caddr)(e))){s=Gs,t=xt,ge("1"),r=xt,o_(e,1),n_(s,t,r);return}t=xt,ql((0,g.cadr)(e))?qs((0,g.cadr)(e)):an((0,g.cadr)(e)),r=xt,Bs++,vr((0,g.caddr)(e)),Bs--,mv(t,r)}function o_(e,t){let r=0,s=0;if((0,or.isminusone)((0,g.caddr)(e))){t===1?vr((0,g.cadr)(e)):qs((0,g.cadr)(e));return}r=xt,ql((0,g.cadr)(e))?qs((0,g.cadr)(e)):an((0,g.cadr)(e)),s=xt,Bs++,NP((0,g.caddr)(e)),Bs--,mv(r,s)}function PP(e){if((0,g.car)(e)===(0,vs.symbol)(g.INDEX)&&(0,g.issymbol)((0,g.cadr)(e))){DP(e);return}if((0,g.isfactorial)(e)){kP(e);return}if((0,g.car)(e)===(0,vs.symbol)(g.DERIVATIVE)?ge("d"):_v((0,g.car)(e)),ge("("),e=(0,g.cdr)(e),(0,g.iscons)(e))for(vr((0,g.car)(e)),e=(0,g.cdr)(e);(0,g.iscons)(e);)ge(","),vr((0,g.car)(e)),e=(0,g.cdr)(e);ge(")")}function DP(e){if(e=(0,g.cdr)(e),(0,g.caar)(e)===(0,vs.symbol)(g.ADD)||(0,g.caar)(e)===(0,vs.symbol)(g.MULTIPLY)||(0,g.caar)(e)===(0,vs.symbol)(g.POWER)||(0,g.caar)(e)===(0,vs.symbol)(g.FACTORIAL)?an((0,g.car)(e)):vr((0,g.car)(e)),ge("["),e=(0,g.cdr)(e),(0,g.iscons)(e))for(vr((0,g.car)(e)),e=(0,g.cdr)(e);(0,g.iscons)(e);)ge(","),vr((0,g.car)(e)),e=(0,g.cdr)(e);ge("]")}function kP(e){e=(0,g.cadr)(e),(0,or.isfraction)(e)||(0,g.isadd)(e)||(0,g.ismultiply)(e)||(0,g.ispower)(e)||(0,g.isfactorial)(e)?an(e):vr(e),ge("!")}function an(e){ge("("),vr(e),ge(")")}function _v(e){if(e===(0,vs.symbol)(g.E)){i_("exp(1)");return}let t=(0,vs.get_printname)(e);for(let r=0;r<t.length;r++)ge(t[r])}function $P(e){let t=e.str;ge('"');for(let r=0;r<t.length;r++)ge(t[r]);ge('"')}function n_(e,t,r){let s=0,n=0,[i,a,u]=Array.from(ra(t,r)),[c,d,m]=Array.from(ra(r,xt));d>a?s=(d-a)/2:s=0,s++,n=-(u+i-1)-1,hl(t,r,s,n),d>a?s=-a:s=-a+(a-d)/2,s++,n=-m+1,hl(r,xt,s,n);let M=0;d>a?M=d:M=a,M+=2,Gs=e;for(let k=0;k<M;k++)ge("-")}function mv(e,t){let r=0,s=0,n=0,i=0,a=0,u=0,c=0;[s,n,i]=Array.from(ra(e,t)),[a,u,c]=Array.from(ra(t,xt)),r=-c-a+1,r+=i-1,hl(t,xt,0,r)}function hl(e,t,r,s){for(let n=e;n<t;n++)Et[n].x+=r,Et[n].y+=s}function ra(e,t){let r=Et[e].x,s=Et[e].x,n=Et[e].y,i=Et[e].y;for(let d=e+1;d<t;d++)Et[d].x<r&&(r=Et[d].x),Et[d].x>s&&(s=Et[d].x),Et[d].y<n&&(n=Et[d].y),Et[d].y>i&&(i=Et[d].y);let a=i-n+1,u=s-r+1;return[a,u,n]}function ge(e){if(xt!==dv)return Et[xt]==null&&g.breakpoint,Et[xt].c=e,Et[xt].x=Gs,Et[xt].y=0,xt++,Gs++}function i_(e){for(let t=0;t<e.length;t++)ge(e[t])}function Mo(e,t){let r="";switch(e.k){case g.NUM:r=e.q.a.toString(),r[0]==="-"&&t===0&&(r=r.substring(1));for(let s=0;s<r.length;s++)ge(r[s]);if(r=e.q.b.toString(),r==="1")break;ge("/");for(let s=0;s<r.length;s++)ge(r[s]);break;case g.DOUBLE:r=(0,jP.doubleToReasonableString)(e.d),r[0]==="-"&&t===0&&(r=r.substring(1));for(let s=0;s<r.length;s++)ge(r[s]);break}}function UP(e,t){return e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0}function BP(){let e="",t=Et.slice(0,xt);t.sort(UP),Et=[].concat(t).concat(Et.slice(xt));let r=0,{y:s}=Et[0];for(let n=0;n<xt;n++){for(;Et[n].y>s;)e+=OP(`
`),r=0,s++;for(;Et[n].x>r;)e+=r_(" "),r++;e+=r_(Et[n].c),r++}return e}function FP(e){let t=0,r=0,s=0;if(e.tensor.ndim>2){Cc(e);return}let n=e.tensor.dim[0];e.tensor.ndim===2?t=e.tensor.dim[1]:t=1;let i=n*t;if(i>GP){Cc(e);return}let a=Gs;for(let M=0;M<i;M++)wt[M].index=xt,wt[M].x=Gs,vr(e.tensor.elem[M]),wt[M].count=xt-wt[M].index,[wt[M].h,wt[M].w,wt[M].y]=Array.from(ra(wt[M].index,xt));let u=0,c=0;for(let M=0;M<i;M++)wt[M].h>u&&(u=wt[M].h),wt[M].w>c&&(c=wt[M].w);let d=n*u+(n-1)*fv,m=t*c+(t-1)*cv,R=-(d/2);for(let M=0;M<n;M++)for(let k=0;k<t;k++){let H=M*t+k;r=a-wt[H].x,s=R-wt[H].y,hl(wt[H].index,wt[H].index+wt[H].count,r,s),r=0,k>0&&(r=k*(c+cv)),s=0,M>0&&(s=M*(u+fv)),r+=(c-wt[H].w)/2,s+=(u-wt[H].h)/2,hl(wt[H].index,wt[H].index+wt[H].count,r,s)}Gs=a+m}function Cc(e){xv(e,0,0)}function xv(e,t,r){ge("(");for(let s=0;s<e.tensor.dim[t];s++)t+1===e.tensor.ndim?(vr(e.tensor.elem[r]),r=r+1):r=xv(e,t+1,r),s+1<e.tensor.dim[t]&&ge(",");return ge(")"),r}var g,jP,vs,El,ta,or,AP,dv,t_,Et,xt,Bs,Gs,av,GP,s_,wt,cv,fv,a_=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.print2dascii=void 0;g=(T(),o(N)),jP=(uo(),o(Go)),vs=(U(),o(G)),El=(is(),o(js)),ta=(Y(),o(V)),or=(K(),o(te)),AP=(to(),o(Do)),dv=1e4,t_=class{constructor(){this.c=0,this.x=0,this.y=0}},Et=[];for(let e=0;e<dv;e++)Et[e]=new t_;xt=0,Bs=0,Gs=0,av=0;exports.print2dascii=MP;GP=100,s_=class{constructor(){this.x=0,this.y=0,this.h=0,this.w=0,this.index=0,this.count=0}},wt=[];for(let e=0;e<1e4;e++)wt[e]=new s_;cv=3,fv=1});var Me={};function Al(e){E.defs.errorMessage+="Stop: ",E.defs.errorMessage+=e;let t=E.defs.errorMessage;throw E.defs.errorMessage="",new Error(t)}function u_(e,t=!1){E.DEBUG&&console.log(`stringToBeParsed: ${e}`);let r=new Date().getTime(),s=!0;E.defs.codeGen=!0,E.defs.symbolsDependencies={},E.defs.symbolsHavingReassignments=[],E.defs.symbolsInExpressionsWithoutAssignments=[],E.defs.patternHasBeenFound=!1;let n=0,i="",a="",u=0,c={affectsVariables:[],affectedBy:[]},d=e;for(;;){try{E.defs.errorMessage="",sa(),E.DEBUG&&console.log("findDependenciesInScript: scanning"),[u]=(0,yv.scan)(e.substring(n)),E.DEBUG&&console.log("scanned"),sa()}catch(X){E.PRINTOUTRESULT&&console.log(X),E.defs.errorMessage=X+"",(0,E.reset_after_error)();break}if(u===0)break;n+=u}let m="";E.DEBUG&&console.log("all local dependencies ----------------"),m+="All local dependencies: ";for(let X in E.defs.symbolsDependencies){let Ie=E.defs.symbolsDependencies[X];E.DEBUG&&console.log(`variable ${X} depends on: `),c.affectsVariables.push(X),m+=" variable "+X+" depends on: ";for(let at of Array.from(Ie))E.DEBUG&&console.log(`    ${at}`),at[0]!=="'"&&c.affectedBy.push(at),m+=at+", ";m+="; "}m+=". ",E.DEBUG&&console.log("Symbols with reassignments ----------------"),m+="Symbols with reassignments: ";for(let X of Array.from(E.defs.symbolsHavingReassignments))c.affectedBy.indexOf(X)===-1&&(c.affectedBy.push(X),m+=X+", ");m+=". ",E.DEBUG&&console.log("Symbols in expressions without assignments ----------------"),m+="Symbols in expressions without assignments: ";for(let X of Array.from(E.defs.symbolsInExpressionsWithoutAssignments))c.affectedBy.indexOf(X)===-1&&(c.affectedBy.push(X),m+=X+", ");m+=". ",c.affectedBy.push("PATTERN_DEPENDENCY"),E.defs.patternHasBeenFound&&(c.affectsVariables.push("PATTERN_DEPENDENCY"),m+=" - PATTERN_DEPENDENCY inserted - "),E.DEBUG&&console.log("All dependencies recursively ----------------"),m+="All dependencies recursively: ";let R=["",""],M="",k="";if(E.defs.errorMessage===""&&!t){try{i="",a="",R=qv(e,!0),i="",a=""}catch(X){let Ie=X;E.PRINTOUTRESULT&&console.log(Ie),E.defs.errorMessage=Ie.toString(),(0,Dc.init)()}if(E.defs.errorMessage==="")for(let X in E.defs.symbolsDependencies){E.defs.codeGen=!0,E.DEBUG&&console.log("  variable "+X+" is: "+(0,ht.get_binding)((0,ht.usr_symbol)(X)).toString()),E.defs.codeGen=!1,E.DEBUG&&console.log(`  variable ${X} depends on: `),m+=" variable "+X+" depends on: ";var H=[];let Ie=[],at=[];vv(X,H,[],Ie,[],at);for(let Se of Array.from(Ie))E.DEBUG&&console.log(`    --> cycle through ${Se}`);for(let Se of Array.from(H))E.DEBUG&&console.log(`    ${Se}`),m+=Se+", ";m+="; ";for(let Se of Array.from(at))m+=" "+Se+", ";E.DEBUG&&console.log(`  code generation:${X} is: ${(0,ht.get_binding)((0,ht.usr_symbol)(X))}`);let Ke=(0,ht.get_binding)((0,ht.usr_symbol)(X)),Fe=[],ft=[];for(let Se of Array.from(H))if(Se[0]==="'"){let dt=Se.substring(1),ir=(0,ht.usr_symbol)(dt),Ft=(0,ht.usr_symbol)("AVOID_BINDING_TO_EXTERNAL_SCOPE_VALUE"+dt);Fe.push(ir),ft.push(Ft),Ke=(0,Pc.subst)(Ke,ir,Ft),E.DEBUG&&console.log(`after substitution: ${Ke}`)}try{Ke=(0,ZP.simplifyForCodeGeneration)(Ke)}catch(Se){E.PRINTOUTRESULT&&console.log(Se),E.defs.errorMessage=Se+"",(0,Dc.init)()}for(let Se=0;Se<Fe.length;Se++)Ke=(0,Pc.subst)(Ke,ft[Se],Fe[Se]);if((0,ht.clearRenamedVariablesToAvoidBindingToExternalScope)(),E.defs.errorMessage===""){let Se=Ke,dt=[];(0,ht.collectUserSymbols)(Se,dt),i="",a="",E.defs.codeGen=!0;let ir=Se.toString();E.defs.codeGen=!1;let Ft=E.defs.printMode;E.defs.printMode=E.PRINTMODE_LATEX;let qr=Se.toString();if(E.defs.printMode=Ft,Ie.indexOf(X)!==-1)M+="// "+X+" is part of a cyclic dependency, no code generated.",k+="#"+X+" is part of a cyclic dependency, no code generated.";else if(dt=dt.filter(Lt=>E.predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(Lt+"")===-1),dt=dt.filter(Lt=>H.indexOf(Lt+"")!==-1||H.indexOf("'"+Lt)!==-1),dt.length!==0){let Lt="(";for(let un of Array.from(dt))un.printname!==X&&(Lt+=un.printname+", ");Lt=Lt.replace(/, $/gm,""),Lt+=")",M+=X+" = function "+Lt+" { return ( "+ir+" ); }",k+=X+Lt+" = "+qr}else M+=X+" = "+ir+";",k+=X+" = "+qr;M+=`
`,k+=`
`,E.DEBUG&&console.log(`    ${M}`)}}}return M=M.replace(/\n$/gm,""),k=k.replace(/\n$/gm,""),E.defs.symbolsDependencies={},E.defs.symbolsHavingReassignments=[],E.defs.patternHasBeenFound=!1,E.defs.symbolsInExpressionsWithoutAssignments=[],E.DEBUG&&console.log(`testable string: ${m}`),kc&&console.log(`findDependenciesInScript time for: ${d} : ${new Date().getTime()-r}ms`),[m,R[0],M,k,R[1],E.defs.errorMessage,c]}function vv(e,t,r,s,n,i){if(r.push(e),E.defs.symbolsDependencies[n[n.length-1]]!=null&&E.defs.symbolsDependencies[n[n.length-1]].indexOf("'"+e)!==-1){E.DEBUG&&console.log("can't keep following the chain of "+e+" because it's actually a variable bound to a parameter"),t.indexOf("'"+e)===-1&&t.indexOf(e)===-1&&t.push(e);return}if(n.push(e),E.defs.symbolsDependencies[e]==null)t.indexOf(e)===-1&&t.push(e);else for(let a of Array.from(E.defs.symbolsDependencies[e]))if(n.indexOf(a)!==-1){E.DEBUG&&console.log("  found cycle:");let u="";for(let c of Array.from(n))s.indexOf(c)===-1&&s.push(c),E.DEBUG&&console.log(c+" --> "),u+=c+" --> ";E.DEBUG&&console.log(` ... then ${a} again`),u+=" ... then "+a+" again",i.push(u),s.indexOf(a)===-1&&s.push(a)}else vv(a,t,r,s,n,i),n.pop()}function l_(e){return e=e.replace(/\n/g,""),e=e.replace(/_/g,"} \\_ \\text{"),e=e.replace(new RegExp(String.fromCharCode(E.transpose_unicode),"g"),"}{}^{T}\\text{"),e=e.replace(new RegExp(String.fromCharCode(E.dotprod_unicode),"g"),"}\\cdot \\text{"),e=e.replace("Stop:","}  \\quad \\text{Stop:"),e=e.replace("->","}  \\rightarrow \\text{"),e=e.replace("?","}\\enspace "+XP+" \\enspace  \\text{"),e="$$\\text{"+e.replace(/\n/g,"")+"}$$",e}function c_(e){return e=e.replace(new RegExp(String.fromCharCode(8901),"g"),String.fromCharCode(E.dotprod_unicode)),e=e.replace(new RegExp(String.fromCharCode(8226),"g"),String.fromCharCode(E.dotprod_unicode)),e=e.replace(new RegExp(String.fromCharCode(12539),"g"),String.fromCharCode(E.dotprod_unicode)),e=e.replace(new RegExp(String.fromCharCode(55296),"g"),String.fromCharCode(E.dotprod_unicode)),e=e.replace(new RegExp(String.fromCharCode(65381),"g"),String.fromCharCode(E.dotprod_unicode)),e}function qv(e,t=!1){let r,s,n,i=new Date().getTime();e=c_(e),E.defs.inited||(E.defs.inited=!0,(0,Dc.init)());let a=0,u=0,c="",d="",m,R;for(;;){try{E.defs.errorMessage="",sa(),[a,r]=(0,yv.scan)(e.substring(u)),sa()}catch(k){E.PRINTOUTRESULT&&console.log(k),c+=k.message,t&&(d+=l_(k.message)),(0,E.reset_after_error)();break}if(a===0)break;u+=a;let M=!1;try{E.defs.stringsEmittedByUserPrintouts="",s=Ev(r),sa(),(0,E.isstr)(s)&&(E.DEBUG&&console.log(s.str),E.DEBUG&&console.log(`
`)),s===(0,ht.symbol)(E.NIL)?(R=E.defs.stringsEmittedByUserPrintouts,t&&(m="$$"+E.defs.stringsEmittedByUserPrintouts+"$$")):(R=(0,bv.print_expr)(s),R+=`
`,t&&(m="$$"+(0,bv.collectLatexStringFromReturnValue)(s)+"$$",E.DEBUG&&console.log(`collectedLatexResult: ${m}`))),c+=R,t&&(d+=m),E.PRINTOUTRESULT&&(E.DEBUG&&console.log("printline"),E.DEBUG&&console.log(R)),E.PRINTOUTRESULT&&(E.DEBUG&&console.log("display:"),(0,VP.print2dascii)(s)),t&&(d+=`
`)}catch(k){M=!0,R=k.message,t&&(m=l_(k.message)),E.PRINTOUTRESULT&&console.log(R),c+=R,R!==""&&(c+=`
`),t&&(d+=m,d+=`
`),(0,Dc.init)()}}if(c[c.length-1]===`
`&&(c=c.substring(0,c.length-1)),t&&d[d.length-1]===`
`&&(d=d.substring(0,d.length-1)),t?(E.DEBUG&&console.log(`allReturnedLatexStrings: ${d}`),n=[c,d]):n=c,kc){let M="run time on: "+e+" : "+(new Date().getTime()-i)+"ms";console.log(M)}return c="",d="",n}function sa(){E.defs.chainOfUserSymbolsNotFunctionsBeingEvaluated.length!==0&&(E.breakpoint,Al("symbols evaluation still ongoing?")),E.defs.evaluatingAsFloats&&(E.breakpoint,Al("numeric evaluation still ongoing?")),E.defs.evaluatingPolar&&(E.breakpoint,Al("evaluation of polar still ongoing?"))}function Ev(e){E.DEBUG&&console.log("#### top level eval"),E.defs.trigmode=0;let t=(0,ht.symbol)(E.AUTOEXPAND);E.defs.expanding=!(0,jl.isZeroAtomOrTensor)((0,ht.get_binding)(t));let r=e,s=(0,YP.Eval)(e);return s===(0,ht.symbol)(E.NIL)||((0,ht.set_binding)((0,ht.symbol)(E.LAST),s),(0,jl.isZeroAtomOrTensor)((0,ht.get_binding)((0,ht.symbol)(E.BAKE)))||(s=(0,zP.bake)(s)),(r===(0,ht.symbol)(E.SYMBOL_I)||r===(0,ht.symbol)(E.SYMBOL_J))&&(0,jl.isimaginaryunit)(s))?s:(0,jl.isimaginaryunit)((0,ht.get_binding)((0,ht.symbol)(E.SYMBOL_J)))?(0,Pc.subst)(s,E.Constants.imaginaryunit,(0,ht.symbol)(E.SYMBOL_J)):(0,jl.isimaginaryunit)((0,ht.get_binding)((0,ht.symbol)(E.SYMBOL_I)))?(0,Pc.subst)(s,E.Constants.imaginaryunit,(0,ht.symbol)(E.SYMBOL_I)):s}function HP(){E.defs.esc_flag&&Al("esc key")}function QP(e){let t,r;E.DEBUG&&console.log("computeDependenciesFromAlgebra!!!");let s=e,n=!0;if(E.defs.called_from_Algebra_block=!0,e=c_(e),!n){E.defs.userSimplificationsInListForm=[];let i="";for(let a of Array.from(E.defs.userSimplificationsInListForm))i+="silentpattern("+(0,E.car)(a)+","+(0,E.car)((0,E.cdr)(a))+","+(0,E.car)((0,E.cdr)((0,E.cdr)(a)))+`)
`;(0,gv.do_clearall)(),e=i+e,E.DEBUG&&console.log("codeFromAlgebraBlock including patterns: "+e)}if(E.DEBUG){console.log("computeDependenciesFromAlgebra: patterns in the list --------------- ");for(let i of Array.from(E.defs.userSimplificationsInListForm))console.log((0,E.car)(i)+","+(0,E.cdr)(i)+")");console.log("...end of list --------------- ")}return E.defs.called_from_Algebra_block=!1,u_(e,!0)[6]}function WP(e){let t,r,s,n,i,a,u,c,d,m=e,R=!0;E.defs.called_from_Algebra_block=!0;let M=new Date().getTime();kc&&console.log(" --------- computeResultsAndJavaScriptFromAlgebra input: "+e+" at: "+new Date),e=c_(e);let k=e;if(E.DEBUG){console.log("computeResultsAndJavaScriptFromAlgebra: patterns in the list --------------- ");for(i of Array.from(E.defs.userSimplificationsInListForm))console.log((0,E.car)(i)+","+(0,E.cdr)(i)+")");console.log("...end of list --------------- ")}if(!R){E.defs.userSimplificationsInListForm=[];let H="";for(i of Array.from(E.defs.userSimplificationsInListForm))H+="silentpattern("+(0,E.car)(i)+","+(0,E.car)((0,E.cdr)(i))+","+(0,E.car)((0,E.cdr)((0,E.cdr)(i)))+`)
`;(0,gv.do_clearall)(),e=H+e,E.DEBUG&&console.log("codeFromAlgebraBlock including patterns: "+e)}return[d,c,s,u,a,E.defs.errorMessage,n]=u_(e),E.defs.called_from_Algebra_block=!1,(u!==""||E.defs.errorMessage!=="")&&(c+=`
`+u,E.defs.errorMessage!==""&&(c+=`
`+E.defs.errorMessage),c=c.replace(/\n/g,`

`),a+=`
$$`+u+"$$",E.defs.errorMessage!==""&&(a+=l_(E.defs.errorMessage)),a=a.replace(/\n/g,`

`)),a=a.replace(/\n*/,""),a=a.replace(/\$\$\$\$\n*/g,""),s=s.replace(/Math\./g,""),s=s.replace(/\n/g,`

`),kc&&console.log("computeResultsAndJavaScriptFromAlgebra time (total time from notebook and back) for: "+k+" : "+(new Date().getTime()-M)+"ms"),{code:s,result:a,latexResult:a,dependencyInfo:n}}var zP,gv,YP,jl,bv,VP,yv,ZP,Pc,E,Dc,ht,XP,kc,Ae=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.computeResultsAndJavaScriptFromAlgebra=exports.computeDependenciesFromAlgebra=exports.check_esc_flag=exports.top_level_eval=exports.check_stack=exports.run=exports.findDependenciesInScript=exports.stop=void 0;zP=(If(),o(Mp)),gv=(e_(),o(nv)),YP=(F(),o(z)),jl=(K(),o(te)),bv=(to(),o(Do)),VP=(a_(),o(pv)),yv=(Xo(),o(On)),ZP=(Ho(),o(Mn)),Pc=(Xr(),o(ns)),E=(T(),o(N)),Dc=(vl(),o(wc)),ht=(U(),o(G));exports.stop=Al;exports.findDependenciesInScript=u_;XP="\\rlap{\\large\\color{red}\\bigtriangleup}{\\ \\ \\tiny\\color{red}!}";kc=!1;exports.run=qv;exports.check_stack=sa;exports.top_level_eval=Ev;exports.check_esc_flag=HP;exports.computeDependenciesFromAlgebra=QP;exports.computeResultsAndJavaScriptFromAlgebra=WP});var Ot={};function oD(e){Fs(e);let{nelem:t,ndim:r}=e.tensor,s=(0,zs.alloc_tensor)(t);return s.tensor.ndim=r,s.tensor.dim=Array.from(e.tensor.dim),Fs(s),s.tensor.elem=e.tensor.elem.map(eD.Eval),Fs(e),Fs(s),xD(s)}function nD(e,t){if(e.tensor.ndim!==t.tensor.ndim||e.tensor.dim.some((c,d)=>c!==t.tensor.dim[d]))return(0,Ol.symbol)(mr.NIL);let{nelem:r,ndim:s}=e.tensor,n=(0,zs.alloc_tensor)(r);n.tensor.ndim=s,n.tensor.dim=Array.from(e.tensor.dim);let i=e.tensor.elem,a=t.tensor.elem,u=n.tensor.elem;for(let c=0;c<r;c++)u[c]=(0,JP.add)(i[c],a[c]);return n}function iD(e,t){let{ndim:r,nelem:s}=e.tensor,n=(0,zs.alloc_tensor)(s);return n.tensor.ndim=r,n.tensor.dim=Array.from(e.tensor.dim),n.tensor.elem=e.tensor.elem.map(i=>(0,jv.multiply)(i,t)),n}function aD(e,t){let{ndim:r,nelem:s}=t.tensor,n=(0,zs.alloc_tensor)(s);return n.tensor.ndim=r,n.tensor.dim=Array.from(t.tensor.dim),n.tensor.elem=t.tensor.elem.map(i=>(0,jv.multiply)(e,i)),n}function Fs(e){if(e.tensor.nelem!==e.tensor.elem.length)return console.log("something wrong in tensor dimensions"),mr.breakpoint}function lD(e){return(0,mr.istensor)(e)&&e.tensor.ndim===2&&e.tensor.dim[0]===e.tensor.dim[1]}function uD(e,t){let{ndim:r,nelem:s}=e.tensor;if(r+1>=mr.MAXDIM)return(0,d_.makeList)((0,Ol.symbol)(mr.DERIVATIVE),e,t);let n=(0,zs.alloc_tensor)(s*t.tensor.nelem);n.tensor.ndim=r+1,n.tensor.dim=[...e.tensor.dim,t.tensor.dim[0]];let i=e.tensor.elem,a=t.tensor.elem,u=n.tensor.elem;for(let c=0;c<s;c++)for(let d=0;d<t.tensor.nelem;d++)u[c*t.tensor.nelem+d]=(0,__.derivative)(i[c],a[d]);return n}function cD(e,t){let r=(0,zs.alloc_tensor)(t.tensor.nelem);return r.tensor.ndim=1,r.tensor.dim[0]=t.tensor.dim[0],r.tensor.elem=t.tensor.elem.map(s=>(0,__.derivative)(e,s)),r}function fD(e,t){let r=(0,zs.alloc_tensor)(e.tensor.nelem);return r.tensor.ndim=e.tensor.ndim,r.tensor.dim=[...e.tensor.dim],r.tensor.elem=e.tensor.elem.map(s=>(0,__.derivative)(s,t)),r}function dD(e,t){if(e.tensor.ndim<t.tensor.ndim)return-1;if(e.tensor.ndim>t.tensor.ndim)return 1;for(let r=0;r<e.tensor.ndim;r++){if(e.tensor.dim[r]<t.tensor.dim[r])return-1;if(e.tensor.dim[r]>t.tensor.dim[r])return 1}for(let r=0;r<e.tensor.nelem;r++)if(!(0,hv.equal)(e.tensor.elem[r],t.tensor.elem[r]))return(0,hv.lessp)(e.tensor.elem[r],t.tensor.elem[r])?-1:1;return 0}function _D(e,t){let r=e.tensor.ndim-1;if(e.tensor.dim[0]!==e.tensor.dim[r])return(0,d_.makeList)((0,Ol.symbol)(mr.POWER),e,t);let s=(0,KP.nativeInt)(t);if(isNaN(s))return(0,d_.makeList)((0,Ol.symbol)(mr.POWER),e,t);if(s===0){e.tensor.ndim!==2&&(0,f_.stop)("power(tensor,0) with tensor rank not equal to 2"),s=e.tensor.dim[0],e=(0,zs.alloc_tensor)(s*s),e.tensor.ndim=2,e.tensor.dim[0]=s,e.tensor.dim[1]=s;for(let a=0;a<s;a++)e.tensor.elem[s*a+a]=mr.Constants.one;return Fs(e),e}let n=e;s<0&&(s=-s,n=(0,rD.inv)(n));let i=n;for(let a=1;a<s&&(i=(0,tD.inner)(i,n),!(0,sD.isZeroAtomOrTensor)(i));a++);return i}function mD(e){let t=(0,zs.alloc_tensor)(e.tensor.nelem);return t.tensor.ndim=e.tensor.ndim,t.tensor.dim=[...e.tensor.dim],t.tensor.elem=[...e.tensor.elem],Fs(e),Fs(t),t}function xD(e){if(!(0,mr.istensor)(e))return e;let t=e.tensor.elem[0];if(e.tensor.elem.some(i=>!pD(t,i))&&(0,f_.stop)("Cannot promote tensor due to inconsistent tensor components."),!(0,mr.istensor)(t))return e;let r=e.tensor.ndim+t.tensor.ndim;r>mr.MAXDIM&&(0,f_.stop)("tensor rank > "+mr.MAXDIM);let s=e.tensor.nelem*t.tensor.nelem,n=(0,zs.alloc_tensor)(s);return n.tensor.ndim=r,n.tensor.dim=[...e.tensor.dim,...t.tensor.dim],n.tensor.elem=[].concat(...e.tensor.elem.map(i=>i.tensor.elem)),Fs(t),Fs(n),n}function pD(e,t){if(!(0,mr.istensor)(e)&&!(0,mr.istensor)(t))return!0;if(!(0,mr.istensor)(e)||!(0,mr.istensor)(t)||e.tensor.ndim!==t.tensor.ndim)return!1;for(let r=0;r<e.tensor.ndim;r++)if(e.tensor.dim[r]!==t.tensor.dim[r])return!1;return!0}var zs,mr,f_,Ol,hv,JP,KP,__,eD,tD,rD,sD,d_,jv,jt=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.copy_tensor=exports.power_tensor=exports.compare_tensors=exports.d_tensor_scalar=exports.d_scalar_tensor=exports.d_tensor_tensor=exports.is_square_matrix=exports.check_tensor_dimensions=exports.scalar_times_tensor=exports.tensor_times_scalar=exports.tensor_plus_tensor=exports.Eval_tensor=void 0;zs=(Ct(),o(Dt)),mr=(T(),o(N)),f_=(Ae(),o(Me)),Ol=(U(),o(G)),hv=(Le(),o(Pe)),JP=(_e(),o(pe)),KP=(Y(),o(V)),__=(Ln(),o(Di)),eD=(F(),o(z)),tD=(zo(),o(jn)),rD=(Ga(),o(Ou)),sD=(K(),o(te)),d_=(se(),o(oe)),jv=(Q(),o(W));exports.Eval_tensor=oD;exports.tensor_plus_tensor=nD;exports.tensor_times_scalar=iD;exports.scalar_times_tensor=aD;exports.check_tensor_dimensions=Fs;exports.is_square_matrix=lD;exports.d_tensor_tensor=uD;exports.d_scalar_tensor=cD;exports.d_tensor_scalar=fD;exports.compare_tensors=dD;exports.power_tensor=_D;exports.copy_tensor=mD});var Dt={};function gD(e){let t=new Av.Tensor;for(let r=0;r<e;r++)t.tensor.elem[r]=Av.Constants.zero;return(0,bD.check_tensor_dimensions)(t),t}var bD,Av,Ct=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.alloc_tensor=void 0;bD=(jt(),o(Ot)),Av=(T(),o(N));exports.alloc_tensor=gD});var Pe={};function ED(e,t){let r=(0,yD.alloc_tensor)(e*t);return r.ndim=2,r.dim[0]=e,r.dim[1]=t,r}function hD(e,t){return Tl(e,t)===0}function jD(e,t){return Tl(e,t)<0}function $c(e){return e<0?-1:e>0?1:0}function Tl(e,t){let r=0;if(e===t)return 0;if(e===(0,Ml.symbol)(mt.NIL))return-1;if(t===(0,Ml.symbol)(mt.NIL))return 1;if((0,mt.isNumericAtom)(e)&&(0,mt.isNumericAtom)(t))return $c((0,Mv.compare_numbers)(e,t));if((0,mt.isNumericAtom)(e))return-1;if((0,mt.isNumericAtom)(t))return 1;if((0,mt.isstr)(e)&&(0,mt.isstr)(t))return $c((0,Ov.strcmp)(e.str,t.str));if((0,mt.isstr)(e))return-1;if((0,mt.isstr)(t))return 1;if((0,mt.issymbol)(e)&&(0,mt.issymbol)(t))return $c((0,Ov.strcmp)((0,Ml.get_printname)(e),(0,Ml.get_printname)(t)));if((0,mt.issymbol)(e))return-1;if((0,mt.issymbol)(t))return 1;if((0,mt.istensor)(e)&&(0,mt.istensor)(t))return(0,qD.compare_tensors)(e,t);if((0,mt.istensor)(e))return-1;if((0,mt.istensor)(t))return 1;for(;(0,mt.iscons)(e)&&(0,mt.iscons)(t);){if(r=Tl((0,mt.car)(e),(0,mt.car)(t)),r!==0)return r;e=(0,mt.cdr)(e),t=(0,mt.cdr)(t)}return(0,mt.iscons)(t)?-1:(0,mt.iscons)(e)?1:0}function AD(e){return(0,mt.iscons)(e)?[...e].length:0}function OD(e){return(0,mt.doexpand)(vD.Eval,e)}function MD(e){return(0,Tv.power)((0,Ml.symbol)(mt.E),e)}function TD(e){return(0,Tv.power)(e,(0,Mv.integer)(2))}function ND(e){e.sort(Tl)}var yD,mt,Ov,Ml,Mv,vD,Tv,qD,Le=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.sort=exports.square=exports.exponential=exports.yyexpand=exports.length=exports.cmp_expr=exports.sign=exports.lessp=exports.equal=exports.zero_matrix=void 0;yD=(Ct(),o(Dt)),mt=(T(),o(N)),Ov=(uo(),o(Go)),Ml=(U(),o(G)),Mv=(Y(),o(V)),vD=(F(),o(z)),Tv=(At(),o(Mt)),qD=(jt(),o(Ot));exports.zero_matrix=ED;exports.equal=hD;exports.lessp=jD;exports.sign=$c;exports.cmp_expr=Tl;exports.length=AD;exports.yyexpand=OD;exports.exponential=MD;exports.square=TD;exports.sort=ND});var jf={};function Bc(e){let t;if((0,Uc.iscons)(e)){let r=[...e];t=m_(r.map(Bc))+r.length}else t=1;return t}function Nv(e,t){let r=0;return(0,Uc.iscons)(t)?r=m_([...t].map(s=>Nv(e,s))):(0,ID.equal)(e,t)&&(r=1),r}function SD(e){let t=0;if((0,Uc.istensor)(e))for(let r=0;r<e.tensor.nelem;r++)t+=Bc(e.tensor.elem[r]);else if((0,Uc.iscons)(e)){let r=[...e];t=m_(r.map(Bc))+r.length}else t=1;return t}var ID,Uc,m_,wu=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.countsize=exports.countOccurrencesOfSymbol=exports.count=void 0;ID=(Le(),o(Pe)),Uc=(T(),o(N)),m_=e=>e.reduce((t,r)=>t+r,0);exports.count=Bc;exports.countOccurrencesOfSymbol=Nv;exports.countsize=SD});var G={};function wD(){let e=LD();return e!==""?new rs.Str(e):Iv(rs.NIL)}function LD(){return[...Vr.symbolinfo()].join(`
`)}function CD(e){let t=Vr;try{return Vr=new ln(Vr),e()}finally{Vr=t}}function PD(e,t){let r=si.getOrCreate(e);r.latexPrint=e,r.keyword=t}function DD(e){return Vr.getOrCreate(e)}function kD(e){return e.k!==rs.SYM&&(0,Gc.stop)("symbol error"),e.printname}function $D(e,t){e.k!==rs.SYM&&(0,Gc.stop)("symbol error"),Vr.set(e,t)}function UD(e){return e.k!==rs.SYM&&(0,Gc.stop)("symbol error"),Vr.binding(e)}function BD(e){return e.k!==rs.SYM?!1:/^[abcdjnrstxyz]_?$/.test(e.printname)||!si.has(e)}function GD(){si=new ln,Vr=new ln(si)}function FD(){Vr=new ln(si),si.clear()}function x_(e,t){if(t==null&&(t=[]),BD(e)&&t.indexOf(e)===-1){t.push(e);return}if((0,rs.istensor)(e)){for(let r=0;r<e.tensor.nelem;r++)x_(e.tensor.elem[r],t);return}for(;(0,rs.iscons)(e);)x_((0,rs.car)(e),t),e=(0,rs.cdr)(e)}function Iv(e){return Vr.mustGet(e)}function zD(e){return(0,rs.issymbol)(e)&&e.keyword!=null}function YD(){Vr.clearRenamedVariablesToAvoidBindingToExternalScope()}function VD(e){Vr.delete(e)}var RD,rs,Gc,ln,si,Vr,U=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.clear_symbol=exports.clearRenamedVariablesToAvoidBindingToExternalScope=exports.iskeyword=exports.symbol=exports.collectUserSymbols=exports.clear_symbols=exports.reset_symbols=exports.get_binding=exports.set_binding=exports.get_printname=exports.usr_symbol=exports.std_symbol=exports.inChildScope=exports.Eval_symbolsinfo=void 0;RD=(wu(),o(jf)),rs=(T(),o(N)),Gc=(Ae(),o(Me));exports.Eval_symbolsinfo=wD;ln=class{constructor(t){this.parent=t,this.symbols=new Map,this.bindings=new Map}getOrCreate(t){let r=this.getExisting(t);if(r)return r;let s=new rs.Sym(t);return this.symbols.set(t,s),s}getExisting(t){var r;return((r=this.parent)===null||r===void 0?void 0:r.getExisting(t))||this.symbols.get(t)}mustGet(t){var r;return this.symbols.get(t)||((r=this.parent)===null||r===void 0?void 0:r.mustGet(t))||(0,Gc.stop)(`${t} not defined`)}has(t){return this.symbols.has(t.printname)}binding(t){var r;return this.bindings.get(t.printname)||((r=this.parent)===null||r===void 0?void 0:r.binding(t))||t}set(t,r){this.bindings.set(t.printname,r)}clear(){this.bindings.clear()}delete(t){var r;this.symbols.delete(t.printname),this.bindings.delete(t.printname),(r=this.parent)===null||r===void 0||r.delete(t)}*symbolinfo(){this.parent&&(yield*this.parent.symbolinfo());for(let[t,r]of this.symbols.entries()){let s=this.bindings.get(t)||r,n=(s+"").substring(0,4);yield`symbol: ${r} size: ${(0,RD.countsize)(s)} value: ${n}...`}}clearRenamedVariablesToAvoidBindingToExternalScope(){var t;for(let r of this.symbols.keys())r.indexOf("AVOID_BINDING_TO_EXTERNAL_SCOPE_VALUE")!==-1&&this.symbols.delete(r);for(let r of this.bindings.keys())r.indexOf("AVOID_BINDING_TO_EXTERNAL_SCOPE_VALUE")!==-1&&this.bindings.delete(r);(t=this.parent)===null||t===void 0||t.clearRenamedVariablesToAvoidBindingToExternalScope()}},si=new ln,Vr=new ln(si);exports.inChildScope=CD;exports.std_symbol=PD;exports.usr_symbol=DD;exports.get_printname=kD;exports.set_binding=$D;exports.get_binding=UD;exports.reset_symbols=GD;exports.clear_symbols=FD;exports.collectUserSymbols=x_;exports.symbol=Iv;exports.iskeyword=zD;exports.clearRenamedVariablesToAvoidBindingToExternalScope=YD;exports.clear_symbol=VD});var Do={};function ek(e){return l.defs.stringsEmittedByUserPrintouts+=na((0,l.cdr)(e),l.defs.printMode),(0,ue.symbol)(l.NIL)}function tk(e){return l.defs.stringsEmittedByUserPrintouts+=na((0,l.cdr)(e),l.PRINTMODE_2DASCII),(0,ue.symbol)(l.NIL)}function rk(e){return l.defs.stringsEmittedByUserPrintouts+=na((0,l.cdr)(e),l.PRINTMODE_COMPUTER),(0,ue.symbol)(l.NIL)}function sk(e){return l.defs.stringsEmittedByUserPrintouts+=na((0,l.cdr)(e),l.PRINTMODE_LATEX),(0,ue.symbol)(l.NIL)}function ok(e){let t=l.defs.test_flag;return l.defs.test_flag=!1,l.defs.stringsEmittedByUserPrintouts+=na((0,l.cdr)(e),l.PRINTMODE_HUMAN),l.defs.test_flag=t,(0,ue.symbol)(l.NIL)}function nk(e){let t=na((0,l.cdr)(e),l.PRINTMODE_LIST);return l.defs.stringsEmittedByUserPrintouts+=t,(0,ue.symbol)(l.NIL)}function na(e,t){let r="";for(;(0,l.iscons)(e);){let s=(0,HD.Eval)((0,l.car)(e)),n=l.defs.printMode;t===l.PRINTMODE_COMPUTER?(l.defs.printMode=l.PRINTMODE_COMPUTER,r=Fc(s),Nl(r,l.LAST_FULL_PRINT)):t===l.PRINTMODE_HUMAN?(l.defs.printMode=l.PRINTMODE_HUMAN,r=Fc(s),Nl(r,l.LAST_PLAIN_PRINT)):t===l.PRINTMODE_2DASCII?(l.defs.printMode=l.PRINTMODE_2DASCII,r=(0,WD.print2dascii)(s),Nl(r,l.LAST_2DASCII_PRINT)):t===l.PRINTMODE_LATEX?(l.defs.printMode=l.PRINTMODE_LATEX,r=Fc(s),Nl(r,l.LAST_LATEX_PRINT)):t===l.PRINTMODE_LIST&&(l.defs.printMode=l.PRINTMODE_LIST,r=oa(s),Nl(r,l.LAST_LIST_PRINT)),l.defs.printMode=n,e=(0,l.cdr)(e)}return l.DEBUG&&console.log(`emttedString from display: ${l.defs.stringsEmittedByUserPrintouts}`),r}function Nl(e,t){let[,r]=(0,JD.scan)('"'+e+'"');(0,ue.set_binding)((0,ue.symbol)(t),r)}function S(e){return l.DEBUG&&console.log(`emttedString from print_str: ${l.defs.stringsEmittedByUserPrintouts}`),e}function ik(e){let t=l.defs.printMode;l.defs.printMode=l.PRINTMODE_LATEX;let r=l.defs.codeGen;l.defs.codeGen=!1;let s=C(e);return s=s.replace(/_/g,"\\_"),l.defs.printMode=t,l.defs.codeGen=r,l.DEBUG&&console.log(`emttedString from collectLatexStringFromReturnValue: ${l.defs.stringsEmittedByUserPrintouts}`),s}function Fc(e){let t="";return t+=C(e),t}function wv(e){let t="";return(0,It.isfraction)(e)||(0,l.isadd)(e)||(0,l.ismultiply)(e)||(0,l.ispower)(e)||(0,oi.lessp)(e,l.Constants.zero)?(t+="(",t+=C(e),t+=")"):t+=C(e),t}function Sv(e){let t="";return(0,It.isfraction)(e)||(0,l.isadd)(e)||(0,l.ismultiply)(e)||(0,l.ispower)(e)?(t+="(",t+=C(e),t+=")"):t+=C(e),t}function ak(e,t){let r="",s=(0,l.cadr)(e),n=(0,l.caddr)(e);return(0,It.isminusone)(n)?(r+=wv(s),r):(t===1&&(r+="("),n=(0,Rv.negate)(n),r+=Sl(s,n),t===1&&(r+=")"),r)}function lk(e){let t,r,s="",n=0,i=0,a=0,u=(0,l.cdr)(e),c=(0,l.car)(u);for((0,l.isrational)(c)?(t=(0,ZD.absval)((0,Yc.mp_numerator)(c)),r=(0,Yc.mp_denominator)(c),(0,It.isplusone)(t)||i++,(0,It.isplusone)(r)||a++,u=(0,l.cdr)(u)):(t=l.Constants.one,r=l.Constants.one);(0,l.iscons)(u);)c=(0,l.car)(u),zc(c)?a++:i++,u=(0,l.cdr)(u);if(l.defs.printMode===l.PRINTMODE_LATEX&&(s+=S("\\frac{")),i===0)s+="1";else for(n=0,u=(0,l.cdr)(e),(0,l.isrational)((0,l.car)(u))&&(u=(0,l.cdr)(u)),(0,It.isplusone)(t)||(s+=Es(t),n=1);(0,l.iscons)(u);)c=(0,l.car)(u),zc(c)||(n&&(s+=b_()),s+=Es(c),n=1),u=(0,l.cdr)(u);for(l.defs.printMode===l.PRINTMODE_LATEX?s+=S("}{"):l.defs.printMode===l.PRINTMODE_HUMAN&&!l.defs.test_flag?s+=S(" / "):s+=S("/"),a>1&&l.defs.printMode!==l.PRINTMODE_LATEX&&(s+="("),n=0,u=(0,l.cdr)(e),(0,l.isrational)((0,l.car)(u))&&(u=(0,l.cdr)(u)),(0,It.isplusone)(r)||(s+=Es(r),n=1);(0,l.iscons)(u);)c=(0,l.car)(u),zc(c)&&(n&&(s+=b_()),s+=ak(c,a),n=1),u=(0,l.cdr)(u);return a>1&&l.defs.printMode!==l.PRINTMODE_LATEX&&(s+=")"),l.defs.printMode===l.PRINTMODE_LATEX&&(s+=S("}")),s}function C(e){let t="";if((0,l.isadd)(e))for(e=(0,l.cdr)(e),Il((0,l.car)(e))==="-"&&(t+=S("-")),t+=p_((0,l.car)(e)),e=(0,l.cdr)(e);(0,l.iscons)(e);)Il((0,l.car)(e))==="+"?l.defs.printMode===l.PRINTMODE_HUMAN&&!l.defs.test_flag?t+=S(" + "):t+=S("+"):l.defs.printMode===l.PRINTMODE_HUMAN&&!l.defs.test_flag?t+=S(" - "):t+=S("-"),t+=p_((0,l.car)(e)),e=(0,l.cdr)(e);else Il(e)==="-"&&(t+=S("-")),t+=p_(e);return t}function Il(e){let t="";return(0,l.ismultiply)(e)&&(0,l.isNumericAtom)((0,l.cadr)(e))&&(0,oi.lessp)((0,l.cadr)(e),l.Constants.zero)||(0,l.isNumericAtom)(e)&&(0,oi.lessp)(e,l.Constants.zero)?t+="-":t+="+",t}function p_(e){let t="";if((0,l.ismultiply)(e)&&zk(e))return t+=lk(e),t;if((0,l.ismultiply)(e)){let r,s;e=(0,l.cdr)(e),(0,It.isminusone)((0,l.car)(e))&&(e=(0,l.cdr)(e));let n=!1;(0,l.isNumericAtom)((0,l.car)(e))&&(n=!0);let i=!1;for(l.defs.printMode===l.PRINTMODE_LATEX&&(0,l.iscons)((0,l.cdr)(e))&&(0,It.isNumberOneOverSomething)((0,l.car)(e))&&(i=!0,r=(0,l.car)(e).q.b.toString()),i?(s=t,t=""):t+=Es((0,l.car)(e)),e=(0,l.cdr)(e);(0,l.iscons)(e);)l.defs.printMode===l.PRINTMODE_LATEX&&n&&(0,l.caar)(e)===(0,ue.symbol)(l.POWER)&&(0,l.isNumericAtom)((0,l.car)((0,l.cdr)((0,l.car)(e))))&&((0,It.isfraction)((0,l.car)((0,l.cdr)((0,l.cdr)((0,l.car)(e)))))||(t+=" \\cdot ")),t+=b_(),t+=Es((0,l.car)(e),!1,!0),n=!1,(0,l.isNumericAtom)((0,l.car)(e))&&(n=!0),e=(0,l.cdr)(e);i&&(t=s+"\\frac{"+t+"}{"+r+"}")}else t+=Es(e);return t}function Lv(e){let t="";return t+="(",t+=C(e),t+=")",t}function uk(e){let t="";return e=(0,l.cadr)(e),(0,It.isfraction)(e)||(0,l.isadd)(e)||(0,l.ismultiply)(e)||(0,l.ispower)(e)||(0,l.isfactorial)(e)?t+=Lv(e):t+=C(e),t+="!",t}function ck(e){let t="";return t+=S("\\left |"),t+=C((0,l.cadr)(e)),t+=S(" \\right |"),t}function fk(e){let t="";return t+=S("\\binom{"),t+=C((0,l.cadr)(e)),t+=S("}{"),t+=C((0,l.caddr)(e)),t+=S("} "),t}function dk(e){let t="";return t+=C((0,l.cadr)(e)),t+=S(" \\cdot "),t+=C((0,l.caddr)(e)),t}function _k(e){let t="dot(";return t+=C((0,l.cadr)(e)),t+=", ",t+=C((0,l.caddr)(e)),t+=")",t}function mk(e){let t="Math.sin(";return t+=C((0,l.cadr)(e)),t+=")",t}function xk(e){let t="Math.cos(";return t+=C((0,l.cadr)(e)),t+=")",t}function pk(e){let t="Math.tan(";return t+=C((0,l.cadr)(e)),t+=")",t}function bk(e){let t="Math.asin(";return t+=C((0,l.cadr)(e)),t+=")",t}function gk(e){let t="Math.acos(";return t+=C((0,l.cadr)(e)),t+=")",t}function yk(e){let t="Math.atan(";return t+=C((0,l.cadr)(e)),t+=")",t}function vk(e){let t="";return t+=S("\\sqrt{"),t+=C((0,l.cadr)(e)),t+=S("} "),t}function qk(e){let t="";return t+=S("{"),(0,l.iscons)((0,l.cadr)(e))&&(t+=S("(")),t+=C((0,l.cadr)(e)),(0,l.iscons)((0,l.cadr)(e))&&(t+=S(")")),t+=S("}"),t+=S("^T"),t}function Ek(e){let t="";return t+=S("transpose("),t+=C((0,l.cadr)(e)),t+=S(")"),t}function hk(e){let t="";return t+=S("identity("),t+=C((0,l.cadr)(e)),t+=S(")"),t}function jk(e){let t="";return t+=S("{"),(0,l.iscons)((0,l.cadr)(e))&&(t+=S("(")),t+=C((0,l.cadr)(e)),(0,l.iscons)((0,l.cadr)(e))&&(t+=S(")")),t+=S("}"),t+=S("^{-1}"),t}function Ak(e){let t="";return t+=S("inv("),t+=C((0,l.cadr)(e)),t+=S(")"),t}function Ok(e){let t="",r=(0,l.car)((0,l.cdr)(e));e=(0,l.cdr)(e);let s=e,n=0;for(;(0,l.iscons)((0,l.cdr)((0,l.cdr)(e)));){n++;let i=(0,l.cdr)((0,l.cdr)(e));t+=S("\\int^{"),t+=C((0,l.car)((0,l.cdr)(i))),t+=S("}_{"),t+=C((0,l.car)(i)),t+=S("} \\! "),e=(0,l.cdr)(i)}t+=C(r),t+=S(" \\,"),e=s;for(let i=1;i<=n;i++){let a=(0,l.cdr)(e);t+=S(" \\mathrm{d} "),t+=C((0,l.car)(a)),i<n&&(t+=S(" \\, ")),e=(0,l.cdr)((0,l.cdr)(a))}return t}function Mk(e){let t="";return t+=Cv(e,0,0)[1],t}function Cv(e,t,r){let s="";if(s+=S("["),t<e.tensor.ndim-1)for(let n=0;n<e.tensor.dim[t];n++){let i;[r,i]=Array.from(Cv(e,t+1,r)),s+=i,n!==e.tensor.dim[t]-1&&(s+=S(","))}else for(let n=0;n<e.tensor.dim[t];n++)s+=C(e.tensor.elem[r]),n!==e.tensor.dim[t]-1&&(s+=S(",")),r++;return s+=S("]"),[r,s]}function Tk(e){let t="";return e.tensor.ndim<=2&&(t+=Pv(!0,e,0,0)[1]),t}function Pv(e,t,r,s){let n="";if(e&&(n+="\\begin{bmatrix} "),r<t.tensor.ndim-1)for(let i=0;i<t.tensor.dim[r];i++){let a;[s,a]=Array.from(Pv(!1,t,r+1,s)),n+=a,i!==t.tensor.dim[r]-1&&(n+=S(" \\\\ "))}else for(let i=0;i<t.tensor.dim[r];i++)n+=C(t.tensor.elem[s]),i!==t.tensor.dim[r]-1&&(n+=S(" & ")),s++;return e&&(n+=" \\end{bmatrix}"),[s,n]}function Nk(e){let t="\\sum_{";return t+=C((0,l.caddr)(e)),t+="=",t+=C((0,l.cadddr)(e)),t+="}^{",t+=C((0,l.caddddr)(e)),t+="}{",t+=C((0,l.cadr)(e)),t+="}",t}function Ik(e){let t=(0,l.cadr)(e),r=(0,l.caddr)(e),s=(0,l.cadddr)(e),n=(0,l.caddddr)(e);return"(function(){ var "+r+";  var holderSum = 0;  var lowerlimit = "+C(s)+";  var upperlimit = "+C(n)+";  for ("+r+" = lowerlimit; "+r+" < upperlimit; "+r+"++) {    holderSum += "+C(t)+"; }  return holderSum;})()"}function Sk(e){let t="\\left\\{ \\begin{array}{ll}";for(e=(0,l.cdr)(e);(0,l.iscons)(e);){if((0,l.cdr)(e)===(0,ue.symbol)(l.NIL)){t+="{",t+=C((0,l.car)(e)),t+="} & otherwise ",t+=" \\\\\\\\";break}t+="{",t+=C((0,l.cadr)(e)),t+="} & if & ",t+=C((0,l.car)(e)),t+=" \\\\\\\\",e=(0,l.cddr)(e)}return t=t.substring(0,t.length-4),t+="\\end{array} \\right."}function Rk(e){let t="(function(){";e=(0,l.cdr)(e);let r=0;for(;(0,l.iscons)(e);){if((0,l.cdr)(e)===(0,ue.symbol)(l.NIL)){t+="else {",t+="return ("+C((0,l.car)(e))+");",t+="}";break}r&&(t+=" else "),t+="if ("+C((0,l.car)(e))+"){",t+="return ("+C((0,l.cadr)(e))+");",t+="}",r++,e=(0,l.cddr)(e)}return t+="})()",t}function wk(e){let t="{";return t+=C((0,l.cadr)(e)),t+="}",t+=" < ",t+="{",t+=C((0,l.caddr)(e)),t+="}"}function Lk(e){let t="{";return t+=C((0,l.cadr)(e)),t+="}",t+=" \\leq ",t+="{",t+=C((0,l.caddr)(e)),t+="}"}function Ck(e){let t="{";return t+=C((0,l.cadr)(e)),t+="}",t+=" > ",t+="{",t+=C((0,l.caddr)(e)),t+="}"}function Pk(e){let t="{";return t+=C((0,l.cadr)(e)),t+="}",t+=" \\geq ",t+="{",t+=C((0,l.caddr)(e)),t+="}"}function Dk(e){let t="{";return t+=C((0,l.cadr)(e)),t+="}",t+=" = ",t+="{",t+=C((0,l.caddr)(e)),t+="}"}function kk(e){let t=(0,l.cadr)(e),r=(0,l.caddr)(e),s=(0,l.cadddr)(e),n=(0,l.caddddr)(e);return"(function(){ var "+r+";  var lowerlimit = "+C(s)+";  var upperlimit = "+C(n)+";  for ("+r+" = lowerlimit; "+r+" < upperlimit; "+r+"++) {    "+C(t)+" } })()"}function $k(e){let t="";for(e=(0,l.cdr)(e);(0,l.iscons)(e);)t+=C((0,l.car)(e)),e=(0,l.cdr)(e);return t}function Uk(e){let t="";return t+=C((0,l.cadr)(e)),t+=" = ",t+=C((0,l.caddr)(e)),t+="; ",t}function Bk(e){let t="\\prod_{";return t+=C((0,l.caddr)(e)),t+="=",t+=C((0,l.cadddr)(e)),t+="}^{",t+=C((0,l.caddddr)(e)),t+="}{",t+=C((0,l.cadr)(e)),t+="}",t}function Gk(e){let t=(0,l.cadr)(e),r=(0,l.caddr)(e),s=(0,l.cadddr)(e),n=(0,l.caddddr)(e);return"(function(){ var "+r+";  var holderProduct = 1;  var lowerlimit = "+C(s)+";  var upperlimit = "+C(n)+";  for ("+r+" = lowerlimit; "+r+" < upperlimit; "+r+"++) {    holderProduct *= "+C(t)+"; }  return holderProduct;})()"}function Sl(e,t){let r="";if(l.DEBUG&&console.log("power base: "+e+"  exponent: "+t),(0,It.isoneovertwo)(t))if((0,It.equaln)(e,2)){if(l.defs.codeGen)return r+=S("Math.SQRT2"),r}else{if(l.defs.printMode===l.PRINTMODE_LATEX)return r+=S("\\sqrt{"),r+=C(e),r+=S("}"),r;if(l.defs.codeGen)return r+=S("Math.sqrt("),r+=C(e),r+=S(")"),r}if((0,It.equaln)((0,ue.get_binding)((0,ue.symbol)(l.PRINT_LEAVE_E_ALONE)),1)&&e===(0,ue.symbol)(l.E))return l.defs.codeGen?(r+=S("Math.exp("),r+=Sv(t),r+=S(")"),r):(l.defs.printMode===l.PRINTMODE_LATEX?(r+=S("e^{"),r+=C(t),r+=S("}")):(r+=S("exp("),r+=C(t),r+=S(")")),r);if(l.defs.codeGen)return r+=S("Math.pow("),r+=wv(e),r+=S(", "),r+=Sv(t),r+=S(")"),r;if((0,It.equaln)((0,ue.get_binding)((0,ue.symbol)(l.PRINT_LEAVE_X_ALONE)),0)||e.printname!=="x"){if(e!==(0,ue.symbol)(l.E)){if((0,It.isminusone)(t))return l.defs.printMode===l.PRINTMODE_LATEX?r+=S("\\frac{1}{"):l.defs.printMode===l.PRINTMODE_HUMAN&&!l.defs.test_flag?r+=S("1 / "):r+=S("1/"),(0,l.iscons)(e)&&l.defs.printMode!==l.PRINTMODE_LATEX?(r+=S("("),r+=C(e),r+=S(")")):r+=C(e),l.defs.printMode===l.PRINTMODE_LATEX&&(r+=S("}")),r;if((0,It.isnegativeterm)(t)){l.defs.printMode===l.PRINTMODE_LATEX?r+=S("\\frac{1}{"):l.defs.printMode===l.PRINTMODE_HUMAN&&!l.defs.test_flag?r+=S("1 / "):r+=S("1/");let s=(0,Rv.multiply)(t,l.Constants.negOne);return(0,l.iscons)(e)&&l.defs.printMode!==l.PRINTMODE_LATEX?(r+=S("("),r+=Sl(e,s),r+=S(")")):r+=Sl(e,s),l.defs.printMode===l.PRINTMODE_LATEX&&(r+=S("}")),r}}if((0,It.isfraction)(t)&&l.defs.printMode===l.PRINTMODE_LATEX){r+=S("\\sqrt");let s=(0,XD.denominator)(t);return(0,It.isplustwo)(s)||(r+=S("["),r+=C(s),r+=S("]")),r+=S("{"),t=(0,QD.numerator)(t),r+=Sl(e,t),r+=S("}"),r}}return l.defs.printMode===l.PRINTMODE_LATEX&&(0,It.isplusone)(t)?r+=C(e):((0,l.isadd)(e)||(0,It.isnegativenumber)(e)?(r+=S("("),r+=C(e),r+=S(")")):(0,l.ismultiply)(e)||(0,l.ispower)(e)?(l.defs.printMode!==l.PRINTMODE_LATEX&&(r+=S("(")),r+=Es(e,!0),l.defs.printMode!==l.PRINTMODE_LATEX&&(r+=S(")"))):(0,l.isNumericAtom)(e)&&((0,oi.lessp)(e,l.Constants.zero)||(0,It.isfraction)(e))?(r+=S("("),r+=Es(e),r+=S(")")):r+=Es(e),l.defs.printMode===l.PRINTMODE_HUMAN&&!l.defs.test_flag?r+=S(KD):r+=S("^"),l.defs.printMode===l.PRINTMODE_LATEX?C(t).length>1?(r+=S("{"),r+=C(t),r+=S("}")):r+=C(t):(0,l.iscons)(t)||(0,It.isfraction)(t)||(0,l.isNumericAtom)(t)&&(0,oi.lessp)(t,l.Constants.zero)?(r+=S("("),r+=C(t),r+=S(")")):r+=Es(t)),r}function Fk(e){let t="";if(e=(0,l.cdr)(e),(0,l.caar)(e)===(0,ue.symbol)(l.ADD)||(0,l.caar)(e)===(0,ue.symbol)(l.MULTIPLY)||(0,l.caar)(e)===(0,ue.symbol)(l.POWER)||(0,l.caar)(e)===(0,ue.symbol)(l.FACTORIAL)?t+=Lv((0,l.car)(e)):t+=C((0,l.car)(e)),t+=S("["),e=(0,l.cdr)(e),(0,l.iscons)(e))for(t+=C((0,l.car)(e)),e=(0,l.cdr)(e);(0,l.iscons)(e);)t+=S(","),t+=C((0,l.car)(e)),e=(0,l.cdr)(e);return t+=S("]"),t}function Es(e,t=!1,r=!1){let s="";if((0,l.isNumericAtom)(e))return r&&(0,oi.lessp)(e,l.Constants.zero)&&(s+="("),s+=(0,Yc.print_number)(e,r),r&&(0,oi.lessp)(e,l.Constants.zero)&&(s+=")"),s;if((0,l.isstr)(e))return s+=S('"'),s+=S(e.str),s+=S('"'),s;if((0,l.istensor)(e))return l.defs.printMode===l.PRINTMODE_LATEX?s+=Tk(e):s+=Mk(e),s;if((0,l.ismultiply)(e))return t||(Il(e)==="-"||l.defs.printMode!==l.PRINTMODE_LATEX)&&(l.defs.printMode===l.PRINTMODE_LATEX?s+=S(" \\left ("):s+=S("(")),s+=C(e),t||(Il(e)==="-"||l.defs.printMode!==l.PRINTMODE_LATEX)&&(l.defs.printMode===l.PRINTMODE_LATEX?s+=S(" \\right ) "):s+=S(")")),s;if((0,l.isadd)(e))return t||(s+=S("(")),s+=C(e),t||(s+=S(")")),s;if((0,l.ispower)(e)){let n=(0,l.cadr)(e),i=(0,l.caddr)(e);return s+=Sl(n,i),s}if((0,l.car)(e)===(0,ue.symbol)(l.FUNCTION)){let n=(0,l.cadr)(e);if(!l.defs.codeGen){let i=(0,l.caddr)(e);s+=S("function "),l.DEBUG&&console.log(`emittedString from print_factor ${l.defs.stringsEmittedByUserPrintouts}`),s+=oa(i),s+=S(" -> ")}return s+=C(n),s}if((0,l.car)(e)===(0,ue.symbol)(l.PATTERN))return s+=C((0,l.caadr)(e)),l.defs.printMode===l.PRINTMODE_LATEX?s+=S(" \\rightarrow "):l.defs.printMode===l.PRINTMODE_HUMAN&&!l.defs.test_flag?s+=S(" -> "):s+=S("->"),s+=C((0,l.car)((0,l.cdr)((0,l.cadr)(e)))),s;if((0,l.car)(e)===(0,ue.symbol)(l.INDEX)&&(0,l.issymbol)((0,l.cadr)(e)))return s+=Fk(e),s;if((0,l.isfactorial)(e))return s+=uk(e),s;if((0,l.car)(e)===(0,ue.symbol)(l.ABS)&&l.defs.printMode===l.PRINTMODE_LATEX)return s+=ck(e),s;if((0,l.car)(e)===(0,ue.symbol)(l.SQRT)&&l.defs.printMode===l.PRINTMODE_LATEX)return s+=vk(e),s;if((0,l.isfactorial)(e)){if(l.defs.printMode===l.PRINTMODE_LATEX)return s+=qk(e),s;if(l.defs.codeGen)return s+=Ek(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.UNIT)){if(l.defs.codeGen)return s+=hk(e),s}else if((0,l.isinv)(e)){if(l.defs.printMode===l.PRINTMODE_LATEX)return s+=jk(e),s;if(l.defs.codeGen)return s+=Ak(e),s}else{if((0,l.car)(e)===(0,ue.symbol)(l.BINOMIAL)&&l.defs.printMode===l.PRINTMODE_LATEX)return s+=fk(e),s;if((0,l.car)(e)===(0,ue.symbol)(l.DEFINT)&&l.defs.printMode===l.PRINTMODE_LATEX)return s+=Ok(e),s;if((0,l.isinnerordot)(e)){if(l.defs.printMode===l.PRINTMODE_LATEX)return s+=dk(e),s;if(l.defs.codeGen)return s+=_k(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.SIN)){if(l.defs.codeGen)return s+=mk(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.COS)){if(l.defs.codeGen)return s+=xk(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.TAN)){if(l.defs.codeGen)return s+=pk(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.ARCSIN)){if(l.defs.codeGen)return s+=bk(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.ARCCOS)){if(l.defs.codeGen)return s+=gk(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.ARCTAN)){if(l.defs.codeGen)return s+=yk(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.SUM)){if(l.defs.printMode===l.PRINTMODE_LATEX)return s+=Nk(e),s;if(l.defs.codeGen)return s+=Ik(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.PRODUCT)){if(l.defs.printMode===l.PRINTMODE_LATEX)return s+=Bk(e),s;if(l.defs.codeGen)return s+=Gk(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.FOR)){if(l.defs.codeGen)return s+=kk(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.DO)){if(l.defs.codeGen)return s+=$k(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.TEST)){if(l.defs.codeGen)return s+=Rk(e),s;if(l.defs.printMode===l.PRINTMODE_LATEX)return s+=Sk(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.TESTLT)){if(l.defs.codeGen)return s+="(("+C((0,l.cadr)(e))+") < ("+C((0,l.caddr)(e))+"))",s;if(l.defs.printMode===l.PRINTMODE_LATEX)return s+=wk(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.TESTLE)){if(l.defs.codeGen)return s+="(("+C((0,l.cadr)(e))+") <= ("+C((0,l.caddr)(e))+"))",s;if(l.defs.printMode===l.PRINTMODE_LATEX)return s+=Lk(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.TESTGT)){if(l.defs.codeGen)return s+="(("+C((0,l.cadr)(e))+") > ("+C((0,l.caddr)(e))+"))",s;if(l.defs.printMode===l.PRINTMODE_LATEX)return s+=Ck(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.TESTGE)){if(l.defs.codeGen)return s+="(("+C((0,l.cadr)(e))+") >= ("+C((0,l.caddr)(e))+"))",s;if(l.defs.printMode===l.PRINTMODE_LATEX)return s+=Pk(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.TESTEQ)){if(l.defs.codeGen)return s+="(("+C((0,l.cadr)(e))+") === ("+C((0,l.caddr)(e))+"))",s;if(l.defs.printMode===l.PRINTMODE_LATEX)return s+=Dk(e),s}else if((0,l.car)(e)===(0,ue.symbol)(l.FLOOR)){if(l.defs.codeGen)return s+="Math.floor("+C((0,l.cadr)(e))+")",s;if(l.defs.printMode===l.PRINTMODE_LATEX)return s+=" \\lfloor {"+C((0,l.cadr)(e))+"} \\rfloor ",s}else if((0,l.car)(e)===(0,ue.symbol)(l.CEILING)){if(l.defs.codeGen)return s+="Math.ceiling("+C((0,l.cadr)(e))+")",s;if(l.defs.printMode===l.PRINTMODE_LATEX)return s+=" \\lceil {"+C((0,l.cadr)(e))+"} \\rceil ",s}else if((0,l.car)(e)===(0,ue.symbol)(l.ROUND)){if(l.defs.codeGen)return s+="Math.round("+C((0,l.cadr)(e))+")",s}else if((0,l.car)(e)===(0,ue.symbol)(l.SETQ))return l.defs.codeGen?(s+=Uk(e),s):(s+=C((0,l.cadr)(e)),s+=S("="),s+=C((0,l.caddr)(e)),s)}if((0,l.iscons)(e)){if(s+=Es((0,l.car)(e)),e=(0,l.cdr)(e),t||(s+=S("(")),(0,l.iscons)(e))for(s+=C((0,l.car)(e)),e=(0,l.cdr)(e);(0,l.iscons)(e);)s+=S(","),s+=C((0,l.car)(e)),e=(0,l.cdr)(e);return t||(s+=S(")")),s}return e===(0,ue.symbol)(l.DERIVATIVE)?s+="d":e===(0,ue.symbol)(l.E)?l.defs.codeGen?s+=S("Math.E"):s+=S("e"):e===(0,ue.symbol)(l.PI)?l.defs.printMode===l.PRINTMODE_LATEX?s+=S("\\pi"):s+=S("pi"):s+=S((0,ue.get_printname)(e)),s}function oa(e){let t="";switch(e.k){case l.CONS:for(t+="(",t+=oa((0,l.car)(e)),e===(0,l.cdr)(e)&&(console.log("oh no recursive!"),l.breakpoint),e=(0,l.cdr)(e);(0,l.iscons)(e);)t+=" ",t+=oa((0,l.car)(e)),e=(0,l.cdr)(e),e===(0,l.cdr)(e)&&e!==(0,ue.symbol)(l.NIL)&&(console.log("oh no recursive!"),l.breakpoint);e!==(0,ue.symbol)(l.NIL)&&(t+=" . ",t+=oa(e)),t+=")";break;case l.STR:t+=e.str;break;case l.NUM:case l.DOUBLE:t+=(0,Yc.print_number)(e,!0);break;case l.SYM:t+=(0,ue.get_printname)(e);break;default:t+="<tensor>"}return t}function b_(){let e="";return l.defs.printMode===l.PRINTMODE_LATEX||(l.defs.printMode===l.PRINTMODE_HUMAN&&!l.defs.test_flag&&!l.defs.codeGen?e+=S(" "):e+=S("*")),e}function zc(e){return(0,l.ispower)(e)&&(0,l.cadr)(e)!==(0,ue.symbol)(l.E)&&(0,It.isnegativeterm)((0,l.caddr)(e))}function zk(e){for(e=(0,l.cdr)(e);(0,l.iscons)(e);){let t=(0,l.car)(e);if(zc(t))return!0;e=(0,l.cdr)(e)}return!1}var l,ue,oi,ZD,Yc,XD,HD,It,Rv,QD,WD,JD,KD,to=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.print_list=exports.print_expr=exports.printline=exports.collectLatexStringFromReturnValue=exports.print_str=exports.Eval_printlist=exports.Eval_printhuman=exports.Eval_printlatex=exports.Eval_printcomputer=exports.Eval_print2dascii=exports.Eval_print=void 0;l=(T(),o(N)),ue=(U(),o(G)),oi=(Le(),o(Pe)),ZD=(is(),o(js)),Yc=(Y(),o(V)),XD=(Ns(),o(eo)),HD=(F(),o(z)),It=(K(),o(te)),Rv=(Q(),o(W)),QD=(no(),o($o)),WD=(a_(),o(pv)),JD=(Xo(),o(On)),KD="^";exports.Eval_print=ek;exports.Eval_print2dascii=tk;exports.Eval_printcomputer=rk;exports.Eval_printlatex=sk;exports.Eval_printhuman=ok;exports.Eval_printlist=nk;exports.print_str=S;exports.collectLatexStringFromReturnValue=ik;exports.printline=Fc;exports.print_expr=C;exports.print_list=oa});var N={};function kv(){}function ia(e){return e.k===exports.CONS}function $v(e){return e.k===exports.NUM}function Uv(e){return e.k===exports.DOUBLE}function Bv(e){return $v(e)||Uv(e)}function Xk(e){return e.k===exports.STR}function Gv(e){return e.k===exports.TENSOR}function Fv(e){if(Bv(e)||e===(0,Zr.symbol)(exports.SYMBOL_IDENTITY_MATRIX))return!0;if(!Gv(e))return!1;let t=e.tensor.nelem,r=e.tensor.elem;for(let s=0;s<t;s++)if(!Fv(r[s]))return!1;return!0}function Hk(e){return e.k===exports.SYM}function Ue(e){return ia(e)?e.cons.car:(0,Zr.symbol)(exports.NIL)}function ce(e){return ia(e)?e.cons.cdr:(0,Zr.symbol)(exports.NIL)}function Qk(e){return Ue(Ue(e))}function Wk(e){return Ue(ce(e))}function Jk(e){return ce(Ue(e))}function Kk(e){return ce(ce(e))}function e$(e){return Ue(Ue(ce(e)))}function t$(e){return Ue(ce(ce(e)))}function r$(e){return Ue(ce(Ue(e)))}function s$(e){return ce(Ue(ce(e)))}function o$(e){return ce(ce(Ue(e)))}function n$(e){return ce(ce(ce(e)))}function i$(e){return Ue(Ue(ce(ce(e))))}function a$(e){return Ue(ce(Ue(ce(e))))}function l$(e){return Ue(ce(ce(Ue(e))))}function u$(e){return ce(Ue(ce(ce(e))))}function c$(e){return Ue(ce(ce(ce(e))))}function f$(e){return ce(ce(ce(ce(e))))}function d$(e){return Ue(ce(ce(ce(ce(e)))))}function _$(e){return Ue(ce(Ue(ce(ce(e)))))}function m$(e){return ce(ce(Ue(ce(ce(e)))))}function x$(e){return Ue(ce(ce(Ue(ce(e)))))}function p$(e){return ce(ce(ce(Ue(ce(ce(e))))))}function b$(e){return Ue(ce(ce(Ue(ce(ce(e))))))}function g$(e){return Ue(e)===(0,Zr.symbol)(exports.ADD)}function y$(e){return Ue(e)===(0,Zr.symbol)(exports.MULTIPLY)}function v$(e){return Ue(e)===(0,Zr.symbol)(exports.POWER)}function q$(e){return Ue(e)===(0,Zr.symbol)(exports.FACTORIAL)}function E$(e){return Ue(e)===(0,Zr.symbol)(exports.INNER)||Ue(e)===(0,Zr.symbol)(exports.DOT)}function h$(e){return Ue(e)===(0,Zr.symbol)(exports.TRANSPOSE)}function j$(e){return Ue(e)===(0,Zr.symbol)(exports.INV)}function A$(e){return e===(0,Zr.symbol)(exports.SYMBOL_IDENTITY_MATRIX)}function O$(e){return e.isPositive()?1:e.isZero()?0:-1}function M$(e){return e.isZero()}function T$(e,t){return e==null,e.equals(t)}function N$(){exports.defs.esc_flag=!1,Zk=!1,exports.defs.evaluatingAsFloats=!1,exports.defs.evaluatingPolar=!1}function I$(e,...t){let r=exports.defs.expanding;exports.defs.expanding=!1;try{return e(...t)}finally{exports.defs.expanding=r}}function S$(e,...t){let r=exports.defs.expanding;exports.defs.expanding=!0;try{return e(...t)}finally{exports.defs.expanding=r}}function R$(e,...t){let r=exports.defs.evaluatingPolar;exports.defs.evaluatingPolar=!0;try{return e(...t)}finally{exports.defs.evaluatingPolar=r}}function w$(e,...t){let r=exports.defs.evaluatingAsFloats;exports.defs.evaluatingAsFloats=!0;try{return e(...t)}finally{exports.defs.evaluatingAsFloats=r}}var Yk,Vc,Dv,Zr,Vk,g_,To,Rl,aa,ni,y_,v_,q_,Zk,nr,T=j(()=>{"use strict";Yk=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});exports.CLEARALL=exports.CLEAR=exports.CIRCEXP=exports.CHOOSE=exports.CHECK=exports.CEILING=exports.BINOMIAL=exports.BINDING=exports.BESSELY=exports.BESSELJ=exports.ATOMIZE=exports.ARG=exports.ARCTANH=exports.ARCTAN=exports.ARCSINH=exports.ARCSIN=exports.ARCCOSH=exports.ARCCOS=exports.APPROXRATIO=exports.AND=exports.ADJ=exports.ADD=exports.ABS=exports.SYM=exports.TENSOR=exports.STR=exports.DOUBLE=exports.NUM=exports.CONS=exports.Sym=exports.Tensor=exports.Str=exports.Double=exports.Num=exports.Cons=exports.BaseAtom=exports.avoidCalculatingPowersIntoArctans=exports.do_simplify_nested_radicals=exports.dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication=exports.defs=exports.PRINTMODE_LIST=exports.PRINTMODE_HUMAN=exports.PRINTMODE_COMPUTER=exports.PRINTMODE_2DASCII=exports.PRINTMODE_LATEX=exports.PRINTOUTRESULT=exports.DEBUG=exports.NSYM=exports.version=exports.breakpoint=void 0;exports.INVG=exports.INV=exports.INTEGRAL=exports.INNER=exports.INDEX=exports.IMAG=exports.HILBERT=exports.HERMITE=exports.GCD=exports.GAMMA=exports.FUNCTION=exports.FOR=exports.FLOOR=exports.FLOATF=exports.FILTER=exports.FACTORPOLY=exports.FACTORIAL=exports.FACTOR=exports.EXPSIN=exports.EXPCOS=exports.EXPAND=exports.EXP=exports.EVAL=exports.ERFC=exports.ERF=exports.EIGENVEC=exports.EIGENVAL=exports.EIGEN=exports.DSOLVE=exports.DRAW=exports.DOT=exports.DO=exports.DIVISORS=exports.DIRAC=exports.DIM=exports.DET=exports.DERIVATIVE=exports.DENOMINATOR=exports.DEGREE=exports.DEFINT=exports.DECOMP=exports.COSH=exports.COS=exports.CONTRACT=exports.CONJ=exports.CONDENSE=exports.COFACTOR=exports.COEFF=exports.CLOCK=exports.CLEARPATTERNS=void 0;exports.SUM=exports.SUBST=exports.STOP=exports.SQRT=exports.SHAPE=exports.SINH=exports.SIN=exports.SIMPLIFY=exports.SILENTPATTERN=exports.SGN=exports.SETQ=exports.ROOTS=exports.YYRECT=exports.ROUND=exports.REAL=exports.RATIONALIZE=exports.RANK=exports.QUOTIENT=exports.QUOTE=exports.PRODUCT=exports.PRINTPLAIN=exports.PRINTLIST=exports.PRINTLATEX=exports.PRINTFULL=exports.PRINT2DASCII=exports.PRINT=exports.PRINT_LEAVE_X_ALONE=exports.PRINT_LEAVE_E_ALONE=exports.PRIME=exports.POWER=exports.POLAR=exports.PATTERNSINFO=exports.PATTERN=exports.OUTER=exports.OR=exports.OPERATOR=exports.NUMERATOR=exports.NUMBER=exports.NROOTS=exports.NOT=exports.MULTIPLY=exports.MOD=exports.LOOKUP=exports.LOG=exports.LEGENDRE=exports.LEADING=exports.LCM=exports.LAGUERRE=exports.ISPRIME=exports.ISINTEGER=void 0;exports.SYMBOL_A_UNDERSCORE=exports.SYMBOL_IDENTITY_MATRIX=exports.SYMBOL_Z=exports.SYMBOL_Y=exports.SYMBOL_X=exports.SYMBOL_T=exports.SYMBOL_S=exports.SYMBOL_R=exports.SYMBOL_N=exports.SYMBOL_J=exports.SYMBOL_I=exports.SYMBOL_D=exports.SYMBOL_C=exports.SYMBOL_B=exports.SYMBOL_A=exports.PI=exports.VERSION=exports.SECRETX=exports.METAX=exports.METAB=exports.METAA=exports.DRAWX=exports.YYE=exports.MAX_FIXED_PRINTOUT_DIGITS=exports.FORCE_FIXED_PRINTOUT=exports.TRACE=exports.ASSUME_REAL_VARIABLES=exports.BAKE=exports.AUTOEXPAND=exports.LAST_PLAIN_PRINT=exports.LAST_LIST_PRINT=exports.LAST_LATEX_PRINT=exports.LAST_FULL_PRINT=exports.LAST_2DASCII_PRINT=exports.LAST_PRINT=exports.LAST=exports.NIL=exports.ZERO=exports.UNIT=exports.TRANSPOSE=exports.TESTLT=exports.TESTLE=exports.TESTGT=exports.TESTGE=exports.TESTEQ=exports.TEST=exports.TAYLOR=exports.TANH=exports.TAN=exports.SYMBOLSINFO=void 0;exports.caddadr=exports.cddaddr=exports.cadaddr=exports.caddddr=exports.cddddr=exports.cadddr=exports.cdaddr=exports.caddar=exports.cadadr=exports.caaddr=exports.cdddr=exports.cddar=exports.cdadr=exports.cadar=exports.caddr=exports.caadr=exports.cddr=exports.cdar=exports.cadr=exports.caar=exports.cdr=exports.car=exports.issymbol=exports.isNumericAtomOrTensor=exports.istensor=exports.isstr=exports.isNumericAtom=exports.isdouble=exports.isrational=exports.iscons=exports.dotprod_unicode=exports.transpose_unicode=exports.logbuf=exports.mtotal=exports.primetab=exports.parse_time_simplifications=exports.predefinedSymbolsInGlobalScope_doNotTrackInDependencies=exports.MAXDIM=exports.MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE=exports.MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES=exports.MAXPRIMETAB=exports.E=exports.C6=exports.C5=exports.C4=exports.C3=exports.C2=exports.C1=exports.SYMBOL_X_UNDERSCORE=exports.SYMBOL_B_UNDERSCORE=void 0;exports.evalFloats=exports.evalPolar=exports.doexpand=exports.noexpand=exports.Constants=exports.$=exports.reset_after_error=exports.MEQUAL=exports.MZERO=exports.MSIGN=exports.isidentitymatrix=exports.isinv=exports.istranspose=exports.isinnerordot=exports.isfactorial=exports.ispower=exports.ismultiply=exports.isadd=exports.caddaddr=exports.cdddaddr=void 0;Vc=Yk(No()),Dv=(to(),o(Do)),Zr=(U(),o(G));exports.breakpoint=kv;Vk=(Wd(),o(Ky));Object.defineProperty(exports,"version",{enumerable:!0,get:function(){return Vk.version}});exports.NSYM=1e3;exports.DEBUG=!1;exports.PRINTOUTRESULT=!1;exports.PRINTMODE_LATEX="PRINTMODE_LATEX";exports.PRINTMODE_2DASCII="PRINTMODE_2DASCII";exports.PRINTMODE_COMPUTER="PRINTMODE_COMPUTER";exports.PRINTMODE_HUMAN="PRINTMODE_HUMAN";exports.PRINTMODE_LIST="PRINTMODE_LIST";g_=class{constructor(){this.printMode=exports.PRINTMODE_COMPUTER,this.recursionLevelNestedRadicalsRemoval=0,this.errorMessage="",this.symbolsDependencies={},this.symbolsHavingReassignments=[],this.symbolsInExpressionsWithoutAssignments=[],this.patternHasBeenFound=!1,this.inited=!1,this.chainOfUserSymbolsNotFunctionsBeingEvaluated=[],this.stringsEmittedByUserPrintouts="",this.called_from_Algebra_block=!1,this.expanding=!1,this.evaluatingAsFloats=!1,this.evaluatingPolar=!1,this.esc_flag=!1,this.trigmode=0,this.out_count=0,this.test_flag=!1,this.codeGen=!1,this.userSimplificationsInListForm=[],this.userSimplificationsInStringForm=[],this.fullDoubleOutput=!1}};exports.defs=new g_;exports.dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication=!0;exports.do_simplify_nested_radicals=!0;exports.avoidCalculatingPowersIntoArctans=!0;To=class{toString(){return(0,Dv.print_expr)(this)}toLatexString(){return(0,Dv.collectLatexStringFromReturnValue)(this)}};exports.BaseAtom=To;Rl=class extends To{constructor(t,r){super(),this.k=exports.CONS,this.cons={car:t,cdr:r}}*[Symbol.iterator](){let t=this;for(;ia(t);)yield Ue(t),t=ce(t)}tail(){return ia(this.cons.cdr)?[...this.cons.cdr]:[]}map(t){let r=Ue(this),s=ce(this);return ia(s)&&(s=s.map(t)),new Rl(t(r),s)}};exports.Cons=Rl;aa=class extends To{constructor(t,r=Vc.default.one){super(),this.a=t,this.b=r,this.q=this,this.k=exports.NUM}};exports.Num=aa;ni=class extends To{constructor(t){super(),this.d=t,this.k=exports.DOUBLE}};exports.Double=ni;y_=class extends To{constructor(t){super(),this.str=t,this.k=exports.STR}};exports.Str=y_;v_=class extends To{constructor(){super(...arguments),this.tensor=this,this.k=exports.TENSOR,this.ndim=0,this.dim=[],this.elem=[]}get nelem(){return this.elem.length}};exports.Tensor=v_;q_=class extends To{constructor(t){super(),this.printname=t,this.k=exports.SYM}};exports.Sym=q_;exports.CONS=0;exports.NUM=1;exports.DOUBLE=2;exports.STR=3;exports.TENSOR=4;exports.SYM=5;exports.ABS="abs";exports.ADD="add";exports.ADJ="adj";exports.AND="and";exports.APPROXRATIO="approxratio";exports.ARCCOS="arccos";exports.ARCCOSH="arccosh";exports.ARCSIN="arcsin";exports.ARCSINH="arcsinh";exports.ARCTAN="arctan";exports.ARCTANH="arctanh";exports.ARG="arg";exports.ATOMIZE="atomize";exports.BESSELJ="besselj";exports.BESSELY="bessely";exports.BINDING="binding";exports.BINOMIAL="binomial";exports.CEILING="ceiling";exports.CHECK="check";exports.CHOOSE="choose";exports.CIRCEXP="circexp";exports.CLEAR="clear";exports.CLEARALL="clearall";exports.CLEARPATTERNS="clearpatterns";exports.CLOCK="clock";exports.COEFF="coeff";exports.COFACTOR="cofactor";exports.CONDENSE="condense";exports.CONJ="conj";exports.CONTRACT="contract";exports.COS="cos";exports.COSH="cosh";exports.DECOMP="decomp";exports.DEFINT="defint";exports.DEGREE="deg";exports.DENOMINATOR="denominator";exports.DERIVATIVE="derivative";exports.DET="det";exports.DIM="dim";exports.DIRAC="dirac";exports.DIVISORS="divisors";exports.DO="do";exports.DOT="dot";exports.DRAW="draw";exports.DSOLVE="dsolve";exports.EIGEN="eigen";exports.EIGENVAL="eigenval";exports.EIGENVEC="eigenvec";exports.ERF="erf";exports.ERFC="erfc";exports.EVAL="eval";exports.EXP="exp";exports.EXPAND="expand";exports.EXPCOS="expcos";exports.EXPSIN="expsin";exports.FACTOR="factor";exports.FACTORIAL="factorial";exports.FACTORPOLY="factorpoly";exports.FILTER="filter";exports.FLOATF="float";exports.FLOOR="floor";exports.FOR="for";exports.FUNCTION="function";exports.GAMMA="Gamma";exports.GCD="gcd";exports.HERMITE="hermite";exports.HILBERT="hilbert";exports.IMAG="imag";exports.INDEX="component";exports.INNER="inner";exports.INTEGRAL="integral";exports.INV="inv";exports.INVG="invg";exports.ISINTEGER="isinteger";exports.ISPRIME="isprime";exports.LAGUERRE="laguerre";exports.LCM="lcm";exports.LEADING="leading";exports.LEGENDRE="legendre";exports.LOG="log";exports.LOOKUP="lookup";exports.MOD="mod";exports.MULTIPLY="multiply";exports.NOT="not";exports.NROOTS="nroots";exports.NUMBER="number";exports.NUMERATOR="numerator";exports.OPERATOR="operator";exports.OR="or";exports.OUTER="outer";exports.PATTERN="pattern";exports.PATTERNSINFO="patternsinfo";exports.POLAR="polar";exports.POWER="power";exports.PRIME="prime";exports.PRINT_LEAVE_E_ALONE="printLeaveEAlone";exports.PRINT_LEAVE_X_ALONE="printLeaveXAlone";exports.PRINT="print";exports.PRINT2DASCII="print2dascii";exports.PRINTFULL="printcomputer";exports.PRINTLATEX="printlatex";exports.PRINTLIST="printlist";exports.PRINTPLAIN="printhuman";exports.PRODUCT="product";exports.QUOTE="quote";exports.QUOTIENT="quotient";exports.RANK="rank";exports.RATIONALIZE="rationalize";exports.REAL="real";exports.ROUND="round";exports.YYRECT="rect";exports.ROOTS="roots";exports.SETQ="equals";exports.SGN="sgn";exports.SILENTPATTERN="silentpattern";exports.SIMPLIFY="simplify";exports.SIN="sin";exports.SINH="sinh";exports.SHAPE="shape";exports.SQRT="sqrt";exports.STOP="stop";exports.SUBST="subst";exports.SUM="sum";exports.SYMBOLSINFO="symbolsinfo";exports.TAN="tan";exports.TANH="tanh";exports.TAYLOR="taylor";exports.TEST="test";exports.TESTEQ="testeq";exports.TESTGE="testge";exports.TESTGT="testgt";exports.TESTLE="testle";exports.TESTLT="testlt";exports.TRANSPOSE="transpose";exports.UNIT="unit";exports.ZERO="zero";exports.NIL="nil";exports.LAST="last";exports.LAST_PRINT="lastprint";exports.LAST_2DASCII_PRINT="last2dasciiprint";exports.LAST_FULL_PRINT="lastfullprint";exports.LAST_LATEX_PRINT="lastlatexprint";exports.LAST_LIST_PRINT="lastlistprint";exports.LAST_PLAIN_PRINT="lastplainprint";exports.AUTOEXPAND="autoexpand";exports.BAKE="bake";exports.ASSUME_REAL_VARIABLES="assumeRealVariables";exports.TRACE="trace";exports.FORCE_FIXED_PRINTOUT="forceFixedPrintout";exports.MAX_FIXED_PRINTOUT_DIGITS="maxFixedPrintoutDigits";exports.YYE="~";exports.DRAWX="$DRAWX";exports.METAA="$METAA";exports.METAB="$METAB";exports.METAX="$METAX";exports.SECRETX="$SECRETX";exports.VERSION="version";exports.PI="pi";exports.SYMBOL_A="a";exports.SYMBOL_B="b";exports.SYMBOL_C="c";exports.SYMBOL_D="d";exports.SYMBOL_I="i";exports.SYMBOL_J="j";exports.SYMBOL_N="n";exports.SYMBOL_R="r";exports.SYMBOL_S="s";exports.SYMBOL_T="t";exports.SYMBOL_X="x";exports.SYMBOL_Y="y";exports.SYMBOL_Z="z";exports.SYMBOL_IDENTITY_MATRIX="I";exports.SYMBOL_A_UNDERSCORE="a_";exports.SYMBOL_B_UNDERSCORE="b_";exports.SYMBOL_X_UNDERSCORE="x_";exports.C1="$C1";exports.C2="$C2";exports.C3="$C3";exports.C4="$C4";exports.C5="$C5";exports.C6="$C6";exports.E=exports.YYE;exports.MAXPRIMETAB=1e4;exports.MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES=5;exports.MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE=10;exports.MAXDIM=24;exports.predefinedSymbolsInGlobalScope_doNotTrackInDependencies=["rationalize","abs","e","i","pi","sin","ceiling","cos","roots","integral","derivative","defint","sqrt","eig","cov","deig","dcov","float","floor","product","root","round","sum","test","unit"];exports.parse_time_simplifications=!0;exports.primetab=function(){let e=[2],t=3;for(;e.length<exports.MAXPRIMETAB;){let r=0,s=Math.sqrt(t);for(;r<e.length&&e[r]<=s;){if(t%e[r]===0){r=-1;break}r++}r!==-1&&e.push(t),t+=2}return e[exports.MAXPRIMETAB]=0,e}();Zk=!1;exports.mtotal=0;exports.logbuf="";exports.transpose_unicode=7488;exports.dotprod_unicode=183;exports.iscons=ia;exports.isrational=$v;exports.isdouble=Uv;exports.isNumericAtom=Bv;exports.isstr=Xk;exports.istensor=Gv;exports.isNumericAtomOrTensor=Fv;exports.issymbol=Hk;exports.car=Ue;exports.cdr=ce;exports.caar=Qk;exports.cadr=Wk;exports.cdar=Jk;exports.cddr=Kk;exports.caadr=e$;exports.caddr=t$;exports.cadar=r$;exports.cdadr=s$;exports.cddar=o$;exports.cdddr=n$;exports.caaddr=i$;exports.cadadr=a$;exports.caddar=l$;exports.cdaddr=u$;exports.cadddr=c$;exports.cddddr=f$;exports.caddddr=d$;exports.cadaddr=_$;exports.cddaddr=m$;exports.caddadr=x$;exports.cdddaddr=p$;exports.caddaddr=b$;exports.isadd=g$;exports.ismultiply=y$;exports.ispower=v$;exports.isfactorial=q$;exports.isinnerordot=E$;exports.istranspose=h$;exports.isinv=j$;exports.isidentitymatrix=A$;exports.MSIGN=O$;exports.MZERO=M$;exports.MEQUAL=T$;exports.reset_after_error=N$;exports.$={};nr=class{static One(){return exports.defs.evaluatingAsFloats?nr.oneAsDouble:nr.one}static NegOne(){return exports.defs.evaluatingAsFloats?nr.negOneAsDouble:nr.negOne}static Zero(){return exports.defs.evaluatingAsFloats?nr.zeroAsDouble:nr.zero}static Pi(){return exports.defs.evaluatingAsFloats?nr.piAsDouble:(0,Zr.symbol)(exports.PI)}};exports.Constants=nr;nr.one=new aa((0,Vc.default)(1));nr.oneAsDouble=new ni(1);nr.negOne=new aa((0,Vc.default)(-1));nr.negOneAsDouble=new ni(-1);nr.zero=new aa((0,Vc.default)(0));nr.zeroAsDouble=new ni(0);nr.piAsDouble=new ni(Math.PI);exports.noexpand=I$;exports.doexpand=S$;exports.evalPolar=R$;exports.evalFloats=w$});var $$={};function Yv(e){if(typeof e=="string"){let[,t]=(0,C$.scan)(e);return t}else return typeof e=="number"?e%1===0?(0,zv.integer)(e):(0,zv.double)(e):typeof e.k=="number"?e:(console.warn("unknown argument type",e),(0,E_.symbol)(wl.NIL))}function D$(e){let t;try{t=Yv(e),(0,Zc.check_stack)()}catch(r){throw(0,wl.reset_after_error)(),r}return t}function k$(e,...t){let r,s=(0,E_.get_binding)((0,E_.usr_symbol)(e));(0,Zc.check_stack)();let n=(0,L$.makeList)(s,...t.map(Yv));try{r=(0,Zc.top_level_eval)(n),(0,Zc.check_stack)()}catch(i){throw(0,wl.reset_after_error)(),i}return r}var Zc,zv,L$,C$,wl,P$,E_,Vv=j(()=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.exec=exports.parse=void 0;Zc=(Ae(),o(Me)),zv=(Y(),o(V)),L$=(se(),o(oe)),C$=(Xo(),o(On)),wl=(T(),o(N)),P$=(vl(),o(wc)),E_=(U(),o(G));wl.defs.inited||(wl.defs.inited=!0,(0,P$.init)());exports.parse=D$;exports.exec=k$});Object.defineProperty(exports,"__esModule",{value:!0});exports.$=void 0;var he=(T(),o(N)),U$=(ar(),o(xr)),B$=(vl(),o(wc)),G$=(Ae(),o(Me)),la=(U(),o(G)),h_=(Vv(),o($$)),Xc=(fd(),o(eg)),F$=(tl(),o(Bu)),Pt=(K(),o(te)),Zv=(Le(),o(Pe)),z$=(Xo(),o(On)),Y$={version:he.version,isadd:he.isadd,ismultiply:he.ismultiply,ispower:he.ispower,isfactorial:he.isfactorial,car:he.car,cdr:he.cdr,caar:he.caar,cadr:he.cadr,cdar:he.cdar,cddr:he.cddr,caadr:he.caadr,caddr:he.caddr,cadar:he.cadar,cdadr:he.cdadr,cddar:he.cddar,cdddr:he.cdddr,caaddr:he.caaddr,cadadr:he.cadadr,caddar:he.caddar,cdaddr:he.cdaddr,cadddr:he.cadddr,cddddr:he.cddddr,caddddr:he.caddddr,cadaddr:he.cadaddr,cddaddr:he.cddaddr,caddadr:he.caddadr,cdddaddr:he.cdddaddr,caddaddr:he.caddaddr,symbol:la.symbol,iscons:he.iscons,isrational:he.isrational,isdouble:he.isdouble,isNumericAtom:he.isNumericAtom,isstr:he.isstr,istensor:he.istensor,issymbol:he.issymbol,iskeyword:la.iskeyword,CONS:he.CONS,Cons:he.Cons,NUM:he.NUM,Num:he.Num,DOUBLE:he.DOUBLE,Double:he.Double,STR:he.STR,Str:he.Str,TENSOR:he.TENSOR,Tensor:he.Tensor,SYM:he.SYM,Sym:he.Sym,approxRadicals:Xc.approxRadicals,approxRationalsOfLogs:Xc.approxRationalsOfLogs,approxAll:Xc.approxAll,testApprox:Xc.testApprox,make_hashed_itab:F$.make_hashed_itab,isZeroAtomOrTensor:Pt.isZeroAtomOrTensor,isnegativenumber:Pt.isnegativenumber,isplusone:Pt.isplusone,isminusone:Pt.isminusone,isinteger:Pt.isinteger,isnonnegativeinteger:Pt.isnonnegativeinteger,isposint:Pt.isposint,isnegativeterm:Pt.isnegativeterm,isimaginarynumber:Pt.isimaginarynumber,iscomplexnumber:Pt.iscomplexnumber,iseveninteger:Pt.iseveninteger,isnegative:Pt.isnegative,issymbolic:Pt.issymbolic,isintegerfactor:Pt.isintegerfactor,isoneover:Pt.isoneover,isfraction:Pt.isfraction,isoneoversqrttwo:Pt.isoneoversqrttwo,isminusoneoversqrttwo:Pt.isminusoneoversqrttwo,isfloating:Pt.isfloating,isimaginaryunit:Pt.isimaginaryunit,isquarterturn:Pt.isquarterturn,isnpi:Pt.isnpi,equal:Zv.equal,length:Zv.length,scan:z$.scan,Find:U$.Find,get_binding:la.get_binding,set_binding:la.set_binding,usr_symbol:la.usr_symbol,collectUserSymbols:la.collectUserSymbols,init:B$.init,exec:h_.exec,parse:h_.parse,run:G$.run},V$=["abs","add","adj","and","approxratio","arccos","arccosh","arcsin","arcsinh","arctan","arctanh","arg","atomize","besselj","bessely","binding","binomial","ceiling","check","choose","circexp","clear","clearall","clearpatterns","clock","coeff","cofactor","condense","conj","contract","cos","cosh","decomp","defint","deg","denominator","det","derivative","dim","dirac","divisors","do","dot","draw","dsolve","eigen","eigenval","eigenvec","erf","erfc","eval","exp","expand","expcos","expsin","factor","factorial","factorpoly","filter","float","floor","for","Gamma","gcd","hermite","hilbert","imag","component","inner","integral","inv","invg","isinteger","isprime","laguerre","lcm","leading","legendre","log","mod","multiply","not","nroots","number","numerator","operator","or","outer","pattern","patternsinfo","polar","power","prime","print","print2dascii","printcomputer","printlatex","printlist","printhuman","product","quote","quotient","rank","rationalize","real","rect","roots","round","equals","shape","sgn","silentpattern","simplify","sin","sinh","sqrt","stop","subst","sum","symbolsinfo","tan","tanh","taylor","test","testeq","testge","testgt","testle","testlt","transpose","unit","zero"],j_=Y$;exports.$=j_;Array.from(V$).map(e=>j_[e]=h_.exec.bind(void 0,e));exports.default=j_;})();
